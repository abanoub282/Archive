function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{4:function(t,e){},PDX0:function(t,e){(function(e){t.exports=e}).call(this,{})},XoyV:function(t,e,n){"use strict";n.r(e);var i,o,r,c=n("ofXK"),a=n("tyNb"),s=n("fXoL"),l=n("6CRC"),d=((r=function(){function t(e){_classCallCheck(this,t),this.authService=e}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"signOut",value:function(){this.authService.logOut()}}]),t}()).\u0275fac=function(t){return new(t||r)(s.Vb(l.a))},r.\u0275cmp=s.Pb({type:r,selectors:[["app-header"]],decls:6,vars:0,consts:[[1,"col-md-12","main-header"],["routerLink","/delivery",1,"nav-box"],[1,"container"],[1,"row","justify-content-between",2,"align-items","left"],[1,"col-md-12","logout",2,"align-items","left","line-height","normal","color","aliceblue",3,"click"]],template:function(t,e){1&t&&(s.bc(0,"div",0),s.bc(1,"div",1),s.bc(2,"div",2),s.bc(3,"div",3),s.bc(4,"div",4),s.nc("click",(function(){return e.signOut()})),s.Rc(5," \u062a\u0633\u062c\u064a\u0644 \u062e\u0631\u0648\u062c "),s.ac(),s.ac(),s.ac(),s.ac(),s.ac())},directives:[a.e],styles:[".main-header[_ngcontent-%COMP%]{padding:5px;background-color:#3e4651;height:70px;box-shadow:1px 1px 5px rgba(0,0,0,.5)}"]}),r),u=((o=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=s.Pb({type:o,selectors:[["app-sidebar"]],decls:34,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-3"],["routerLink","/tables",1,"nav-box","text-center"],[1,"row","justify-content-between",2,"align-items","center"],[1,"col-md-6"],["src","../../../../../assets/images/notepad (1)@2x.png","width","50px"],["routerLink","/delivery",1,"nav-box","text-center"],["src","../../../../../assets/images/delivery-guy.png","width","50px"],["routerLink","/report",1,"nav-box","text-center"],["src","../../../../../assets/images/invoice@2x.png","width","50px"],["routerLink","/myorders",1,"nav-box","text-center"]],template:function(t,e){1&t&&(s.bc(0,"div",0),s.bc(1,"div",1),s.bc(2,"div",2),s.bc(3,"div",3),s.bc(4,"div",0),s.bc(5,"div",4),s.bc(6,"div",5),s.Wb(7,"img",6),s.ac(),s.bc(8,"div",5),s.Rc(9," \u0637\u0644\u0628 \u0635\u0627\u0644\u0629 "),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(10,"div",2),s.bc(11,"div",7),s.bc(12,"div",0),s.bc(13,"div",4),s.bc(14,"div",5),s.Wb(15,"img",8),s.ac(),s.bc(16,"div",5),s.Rc(17," \u062f\u0644\u064a\u0641\u0631\u064a "),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(18,"div",2),s.bc(19,"div",9),s.bc(20,"div",0),s.bc(21,"div",4),s.bc(22,"div",5),s.Wb(23,"img",10),s.ac(),s.bc(24,"div",5),s.Rc(25," \u0627\u0644\u0635\u0646\u062f\u0648\u0642 "),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(26,"div",2),s.bc(27,"div",11),s.bc(28,"div",0),s.bc(29,"div",4),s.bc(30,"div",5),s.Wb(31,"img",6),s.ac(),s.bc(32,"div",5),s.Rc(33," \u0637\u0644\u0628\u0627\u062a \u0627\u0644\u064a\u0648\u0645 "),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac())},directives:[a.e],styles:[".nav-box[_ngcontent-%COMP%]{background-color:#fff;padding:25px;border-radius:5px;font-size:18px;font-weight:700;color:#3e4651;cursor:pointer;height:130px;margin-bottom:10px;transition:all .3s ease-out}.nav-box[_ngcontent-%COMP%]:hover{box-shadow:1px 1px 5px rgba(0,0,0,.5)}"]}),o),p=((i=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=s.Pb({type:i,selectors:[["app-body"]],decls:9,vars:0,consts:[[1,"container"],[1,"row"],[1,"main-nav"]],template:function(t,e){1&t&&(s.Wb(0,"app-header"),s.bc(1,"div",0),s.bc(2,"div",1),s.bc(3,"nav",2),s.Wb(4,"app-sidebar"),s.ac(),s.ac(),s.ac(),s.bc(5,"div",0),s.bc(6,"div",1),s.bc(7,"div",0),s.Wb(8,"router-outlet"),s.ac(),s.ac(),s.ac())},directives:[d,u,a.i],styles:[".main-nav[_ngcontent-%COMP%]{width:100%;margin-top:80px;margin-bottom:40px}"]}),i),h=n("cDTu"),f=n("bCcq"),b=n("sSVM"),g=n("rMZv");function m(t,e){if(1&t&&(s.bc(0,"option",34),s.Rc(1),s.ac()),2&t){var n=e.$implicit;s.yc("value",n.id),s.Eb(1),s.Sc(n.name)}}function v(t,e){1&t&&(s.bc(0,"th"),s.Rc(1,"\u0636\u0631\u064a\u0628\u0629 \u062e\u062f\u0645\u0629"),s.ac())}function y(t,e){if(1&t&&(s.bc(0,"td"),s.Rc(1),s.ac()),2&t){var n=s.qc().$implicit;s.Eb(1),s.Tc("",n.tax.service," %")}}function _(t,e){if(1&t){var n=s.cc();s.bc(0,"tr",37),s.bc(1,"div",38),s.bc(2,"td"),s.Rc(3),s.ac(),s.bc(4,"td"),s.Rc(5),s.ac(),s.bc(6,"td"),s.Wb(7,"input",39),s.ac(),s.ac(),s.bc(8,"td",40),s.Rc(9),s.ac(),s.bc(10,"td"),s.Rc(11),s.ac(),s.bc(12,"td",40),s.bc(13,"input",41),s.nc("change",(function(t){s.Ic(n);var i=e.index;return s.qc(2).updateItems(t,i)})),s.ac(),s.ac(),s.bc(14,"td"),s.Rc(15),s.ac(),s.Pc(16,y,2,1,"td",19),s.bc(17,"td"),s.bc(18,"button",42),s.nc("click",(function(t){s.Ic(n);var i=e.$implicit;return s.qc(2).highlighted(t,i)})),s.Wb(19,"i",43),s.ac(),s.bc(20,"button",44),s.nc("click",(function(t){s.Ic(n);var i=e.index;return s.qc(2).removeRow(t,i)})),s.Wb(21,"i",45),s.ac(),s.ac(),s.ac()}if(2&t){var i=e.$implicit,o=s.qc(2);s.Eb(3),s.Sc(i.name),s.Eb(2),s.Tc("",i.price," \u062c.\u0645"),s.Eb(4),s.Sc(i.name),s.Eb(2),s.Tc("",i.price," \u062c.\u0645"),s.Eb(2),s.zc("value",i.totalamount),s.Eb(2),s.Tc("",i.tax.percentage," %"),s.Eb(1),s.yc("ngIf",o.serviceTax>-1)}}function k(t,e){if(1&t&&(s.bc(0,"tbody",35),s.Pc(1,_,22,7,"tr",36),s.ac()),2&t){var n=s.qc();s.Eb(1),s.yc("ngForOf",n.addItems)}}function P(t,e){if(1&t&&(s.bc(0,"div",46),s.bc(1,"div",47),s.bc(2,"label",48),s.Rc(3," \u0636\u0631\u064a\u0628\u0629 \u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u0636\u0627\u0641\u0629"),s.ac(),s.Wb(4,"input",49),s.rc(5,"number"),s.ac(),s.ac()),2&t){var n=s.qc();s.Eb(4),s.zc("value",s.tc(5,1,n.VAT,"1.2-2"))}}function x(t,e){if(1&t&&(s.bc(0,"div",46),s.bc(1,"div",47),s.bc(2,"label",50),s.Rc(3," \u0636\u0631\u064a\u0628\u0629 \u062e\u062f\u0645\u0629"),s.ac(),s.Wb(4,"input",51),s.rc(5,"number"),s.ac(),s.ac()),2&t){var n=s.qc();s.Eb(4),s.zc("value",s.tc(5,1,n.serviceTax,"1.2-2"))}}function C(t,e){if(1&t&&(s.bc(0,"div",46),s.bc(1,"div",47),s.bc(2,"label",52),s.Rc(3,"\u0645\u0628\u0644\u063a \u0627\u062c\u0645\u0627\u0644\u064a"),s.ac(),s.Wb(4,"input",53),s.rc(5,"number"),s.ac(),s.ac()),2&t){var n=s.qc();s.Eb(4),s.zc("value",s.tc(5,1,n.itemPrice,"1.2-2"))}}function O(t,e){if(1&t&&(s.bc(0,"div",46),s.bc(1,"div",47),s.bc(2,"label",54),s.Rc(3,"\u0627\u0644\u0645\u062c\u0645\u0648\u0639"),s.ac(),s.Wb(4,"input",55),s.rc(5,"number"),s.ac(),s.ac()),2&t){var n=s.qc();s.Eb(4),s.zc("value",s.tc(5,1,n.itemTotal,"1.2-2"))}}function w(t,e){if(1&t){var n=s.cc();s.bc(0,"div",56),s.bc(1,"div",11),s.bc(2,"button",57),s.nc("click",(function(){return s.Ic(n),s.qc().addOrder()})),s.Rc(3," \u0627\u0636\u0627\u0641\u0629 \u0637\u0644\u0628 "),s.ac(),s.ac(),s.ac()}}function S(t,e){if(1&t){var n=s.cc();s.bc(0,"li",58),s.nc("click",(function(){s.Ic(n);var t=e.$implicit;return s.qc().clicked=t}))("click",(function(){s.Ic(n);var t=e.index;return s.qc().getItemsByCategory(t)})),s.Rc(1),s.ac()}if(2&t){var i=e.$implicit,o=s.qc();s.Lb("active",o.clicked===i),s.zc("id",i.id),s.Eb(1),s.Tc(" ",i.name," ")}}function I(t,e){if(1&t){var n=s.cc();s.bc(0,"li",63),s.nc("click",(function(t){s.Ic(n);var i=e.index,o=s.qc().index;return s.qc(2).PutItemForSell(t,i,o)})),s.Wb(1,"img",64),s.Rc(2),s.ac()}if(2&t){var i=e.$implicit;s.zc("id",i.id),s.Eb(2),s.Tc(" ",i.name," ")}}function M(t,e){if(1&t&&(s.bc(0,"ul",5),s.bc(1,"li",61),s.Rc(2),s.ac(),s.Pc(3,I,3,2,"li",62),s.ac()),2&t){var n=e.$implicit;s.Eb(2),s.Sc(n.subcategory.name),s.Eb(1),s.yc("ngForOf",n.subcategory.items)}}function A(t,e){if(1&t&&(s.bc(0,"div",59),s.Pc(1,M,4,2,"ul",60),s.ac()),2&t){var n=s.qc();s.Eb(1),s.yc("ngForOf",n.offeritems)}}function E(t,e){if(1&t){var n=s.cc();s.bc(0,"li",66),s.nc("click",(function(t){s.Ic(n);var i=e.index;return s.qc(2).getItems(t,i)})),s.Wb(1,"img",64),s.Rc(2),s.ac()}if(2&t){var i=e.$implicit;s.zc("id",i.id),s.Eb(2),s.Tc(" ",i.name," ")}}function R(t,e){if(1&t&&(s.bc(0,"ul",5),s.Pc(1,E,3,2,"li",65),s.ac()),2&t){var n=s.qc();s.Eb(1),s.yc("ngForOf",n.subs[0])}}function T(t,e){if(1&t){var n=s.cc();s.bc(0,"li",63),s.nc("click",(function(t){s.Ic(n);var i=e.index;return s.qc(2).PutItemForSell(t,i,0)})),s.Wb(1,"img",64),s.Rc(2),s.ac()}if(2&t){var i=e.$implicit;s.zc("id",i.id),s.Eb(2),s.Tc(" ",i.name," ")}}function H(t,e){if(1&t&&(s.bc(0,"ul",5),s.Pc(1,T,3,2,"li",62),s.ac()),2&t){var n=s.qc();s.Eb(1),s.yc("ngForOf",n.items)}}var F,D,q=((F=function(){function t(e,n,i,o){var r=this;_classCallCheck(this,t),this.route=e,this.service=n,this.datePipe=i,this.router=o,this.isReadyToShow=!1,this.categories=[],this.items=[],this.subs=[],this.offeritems=[],this.addItems=[],this.tblItems=[],this.itemTax=0,this.itemPrice=0,this.itemTotal=0,this.VAT=0,this.serviceTax=0,this.addedItemsForPrint=[],this.discount=0,this.isearchByName=0,h.api.setSha256Type((function(t){return Object(f.sha256)(t)})),h.api.setPromiseType((function(t){return new Promise(t)})),h.websocket.connect().then((function(){return h.printers.find("HP LaserJet 2420")})).then((function(t){console.log(t,"lklkl")})).catch((function(t){console.error(t)})),this.route.paramMap.subscribe((function(t){r.table_id=t.get("table_id"),r.order_id=t.get("order_id"),r.check=t.get("check")}))}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.service.getMarketersAndPaymentway().subscribe((function(e){console.log(e),t.marketers=e.marketers,t.paymentways=e.paymentsways,t.selectedPaymentways=e.paymentsways[0].id,t.selectedMarketer=e.marketers[0].id})),this.service.getCategoriesData().subscribe((function(e){t.categories.push(e.data)})),1==this.check&&this.service.checkOrderCompletesById(this.order_id).subscribe((function(e){for(var n=0;n<=e.query[0].orderdetails.length-1;n++)t.addItems.push(e.query[0].orderdetails[n].item),t.itemTax=t.addItems[n].tax.percentage,t.addItems[n].totalamount=e.query[0].orderdetails[n].itemamount,0==e.query[0].orderdetails[n].itemtotal?t.addItems[n].price=0:(t.itemPrice+=e.query[0].orderdetails[n].itemtotal,t.addItems[n].tax.percentage>0&&(console.log(t.addItems[n]),t.VAT+=Math.round(e.query[0].orderdetails[n].itemtotal*t.itemTax/100*100)/100),t.addItems[n].tax.service>0&&(console.log(t.addItems[n]),t.serviceTax+=Math.round(e.query[0].orderdetails[n].itemtotal*t.addItems[n].tax.service/100*100)/100));t.itemTotal=Math.round(100*(t.itemPrice+t.VAT+t.serviceTax))/100}))}},{key:"getItemsByCategory",value:function(t){console.log(t),this.offer=2==t?1:0;var e=this.categories[0][t].subcategories;this.offeritems=[],this.items=[],this.subs=[],this.subs.push(e),console.log(this.categories)}},{key:"searchItem",value:function(t){var e=this;console.log(t),this.isearchByName=1,this.service.searchItems({id:t.value,offer:this.offer}).subscribe((function(t){console.log(t.data),e.subs=[],e.offeritems=[],e.items=t.data}))}},{key:"getItems",value:function(t,e){var n=this;console.log(t.target.getAttribute("id")),this.service.getItems(t).subscribe((function(t){n.subs=[],n.items=[],console.log(t.data),n.items=t.data}))}},{key:"getoffersitems",value:function(t,e){var n=this;this.service.getoffersitems(t).subscribe((function(t){n.subs=[],n.items=[],console.log(t.data),n.offeritems=t.data;for(var e=0;e<=n.offeritems.length-1;e++)for(var i=0;i<=n.offeritems[e].subcategory.items.length-1;i++)console.log(n.offeritems[e].subcategory.items[i]),n.items.push(n.offeritems[e].subcategory.items[i]);n.offer=0}))}},{key:"PutItemForSell",value:function(t,e,n){0==this.offer?(this.offeritems.length>0?(console.log(this.offeritems[n]),this.addItems.push(this.offeritems[n].subcategory.items[e])):this.addItems.push(this.items[e]),this.addItems[this.addItems.length-1].totalamount=1,this.itemTax=this.items[e].tax.percentage,this.itemPrice+=Math.round(100*this.items[e].price)/100,this.itemTax>0&&(this.VAT=Math.round(this.itemPrice*this.itemTax/100*100)/100),1!=this.delivry&&this.items[e].tax.service>0&&(this.serviceTax=Math.round(this.itemPrice*this.items[e].tax.service/100*100)/100),this.itemTotal=Math.round(100*(this.itemPrice+this.VAT+this.serviceTax))/100):(this.addItems.push(this.items[e]),this.addItems[this.addItems.length-1].totalamount=1,this.itemTax=this.items[e].tax.percentage,this.itemPrice+=Math.round(100*this.items[e].price)/100,this.itemTax>0&&(this.VAT=Math.round(this.itemPrice*this.itemTax/100*100)/100),1!=this.delivry&&this.items[e].tax.service>0&&(this.serviceTax=Math.round(this.itemPrice*this.items[e].tax.service/100*100)/100),this.itemTotal=Math.round(100*(this.itemPrice+this.VAT+this.serviceTax))/100,0==this.isearchByName&&(this.items=[],this.getoffersitems(t,e)))}},{key:"updateItems",value:function(t,e){var n=e,i=t.target.value;t.target.getAttribute("value"),this.itemPrice-=Math.round(this.addItems[n].price*this.addItems[n].totalamount*100)/100,this.itemPrice+=Math.round(this.addItems[n].price*i*100)/100,this.addedItemsForPrint.length>0&&(this.addedItemsForPrint[n].totalamount=i),this.addItems[n].totalamount=i,console.log(this.addItems),this.addItems[n].tax.percentage>0&&(this.VAT=100*Math.round(this.itemPrice*this.addItems[n].tax.percentage/100)/100),1!=this.delivry&&this.addItems[n].tax.service>0&&(this.serviceTax=100*Math.round(this.itemPrice*this.addItems[n].tax.service/100)/100),this.itemTotal=Math.round(100*(this.itemPrice+this.VAT+this.serviceTax))/100}},{key:"removeRow",value:function(t,e){var n=e;console.log(this.addItems[n]),this.addItems[n].price>0&&(this.itemPrice-=Math.round(this.addItems[n].price*this.addItems[n].totalamount*100)/100,this.addItems[n].tax.percentage>0&&(this.VAT-=this.addItems[n].price*this.addItems[n].tax.percentage*this.addItems[n].totalamount/100),1!=this.delivry&&this.addItems[n].tax.service>0&&(console.log(this.addItems[n].price),this.serviceTax-=100*Math.round(this.addItems[n].price*this.addItems[n].tax.service*this.addItems[n].totalamount/100)/100),console.log(this.serviceTax),this.itemTotal=Math.round(100*(this.itemPrice+this.VAT+this.serviceTax))/100),this.addedItemsForPrint=this.arrayRemove(this.addedItemsForPrint,this.addItems[n].index),this.addItems.splice(n,1)}},{key:"highlighted",value:function(t,e){t.target.parentNode.parentNode.classList.toggle("highlighted"),t.target.parentNode.parentNode.classList.contains("highlighted")?(this.addedItemsForPrint.push(e),this.addedItemsForPrint[this.addedItemsForPrint.length-1].index=this.makeid(7),console.log("added")):(console.log("deleted"),console.log(e.index),this.addedItemsForPrint=this.arrayRemove(this.addedItemsForPrint,e.index)),console.log(this.addedItemsForPrint)}},{key:"makeid",value:function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=n.length,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*i));return e}},{key:"arrayRemove",value:function(t,e){return t.filter((function(t){return t.index!=e}))}},{key:"addOrder",value:function(){var t=this,e=this,n={total:this.itemTotal,service:this.serviceTax,taxes:this.VAT,discount:this.discount,branch_id:localStorage.getItem("branch"),marketer_id:this.selectedMarketer,paymenttype_id:this.selectedPaymentways,platform_id:1};console.log(n),console.log(this.order_id),this.service.EditOrder(n,this.order_id).subscribe((function(n){if(1==n.success){var i=[];t.addItems.forEach((function(t){console.log(t.name),i.push(t.name+"         \x1ba0",+t.price*t.totalamount+"       \x1ba0",+t.totalamount+"\n")}));var o=t.datePipe.transform(new Date,"yyyy-MM-dd hh:mm"),r=[{type:"raw",format:"image",data:"assets/images/62123932_340200260263485_2674160429353140224_n (2).png",options:{encoding:"IBM864",language:"ESCPOS",dotDensity:"double"}},"\x1b@","\x1ba1","\x1bE\r"," \u0637\u0644\u0628 \u0631\u0642\u0645   : "+t.order_id+"\n","  \u0637\u0631\u0627\u0628\u064a\u0632\u0629 \u0631\u0642\u0645 : "+t.table_id+"\n","\n",o+"\n","\n\x1ba2","\u0627\u0644\u0627\u0633\u0645                      \u0627\u0644\u0643\u0645\u064a\u0629     \u0627\u0644\u0633\u0639\u0631\n","\n","\n","------------------------------------------","\n",i.toString().replace(/,/g,""),"\n","\n","\x1ba0","SubTotal   "+Math.round(100*t.itemPrice)/100+"\n","\n","\n","DisCount    "+Math.round(100*t.discount)/100+"\n","\n","Service   "+Math.round(100*t.serviceTax)/100+"\n","\n","Taxes   "+Math.round(100*t.VAT)/100+"\n","\n","Total   "+Math.round(100*t.itemTotal)/100+"\n","\n","\n","\n","------------------------------------------","\n","\n","\n","\x1ba0","\n\n\n\n\n\x1bi","\x10\x14\x01\0\x05"];t.printers=[],console.log("AppComponent____________");var c=h.configs.create(localStorage.getItem("printer").replace(/['"]+/g,""),{encoding:"IBM864"});return h.print(c,r).then((function(t){e.router.navigate(["/tables"])})).catch((function(t){alert("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0642\u0645 \u0628\u0639\u0645\u0644 \u0627\u0639\u0627\u062f\u0629 \u0644\u0628\u0631\u0646\u0627\u0645\u062c qz tray"),console.error(t)}))}}))}},{key:"AddOrderForKitchen",value:function(){var t=this;if(confirm("\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u0637\u0628\u0627\u0639\u0647")){for(var e=[],n=0;n<=this.addedItemsForPrint.length-1;n++){var i="quantity-"+n;localStorage.getItem(i)&&parseInt(localStorage.getItem(i)),e.push({itemamount:this.addedItemsForPrint[n].totalamount,itemtotal:this.addedItemsForPrint[n].price*this.addedItemsForPrint[n].totalamount,item_id:this.addedItemsForPrint[n].id,order_id:parseInt(this.order_id)})}this.service.adddetailsOrder(e).subscribe((function(e){if(0!=e.id){null==t.table_id&&(t.table_id="T.K");var n=[];t.addedItemsForPrint.forEach((function(t){console.log(t.name),n.push(t.name+"         \x1ba0",+t.price*t.totalamount+"       \x1ba0",+t.totalamount+"\n")}));var i=t.datePipe.transform(new Date,"yyyy-MM-dd hh:mm"),o=[{type:"raw",format:"image",data:"assets/images/Screen Shot 2019-10-21 at 12.35.58 AM.png",options:{encoding:"IBM864",language:"ESCPOS",dotDensity:"double"}},"\x1b@","\x1ba1","\x1bE\r","\u0637\u0644\u0628 \u0631\u0642\u0645   : "+t.order_id+"\n","\n","  \u0637\u0631\u0627\u0628\u064a\u0632\u0629 \u0631\u0642\u0645 : "+t.table_id+"\n","\n",i+"\n","\n\n\x1ba2","\u0627\u0644\u0627\u0633\u0645                      \u0627\u0644\u0643\u0645\u064a\u0629     \u0627\u0644\u0633\u0639\u0631\n","\n","\n","------------------------------------------","\n",n.toString().replace(/,/g,""),"\n","\n","\x1ba0","------------------------------------------","\n","\n","\n","\x1ba0","\n\n\n","\x1bi","\x10\x14\x01\0\x05"];t.printers=[],console.log("AppComponent____________"),console.log(localStorage.getItem("printer").replace(/['"]+/g,""));var r=h.configs.create(localStorage.getItem("printer").replace(/['"]+/g,""),{encoding:"IBM864"});return h.print(r,o).then((function(t){})).catch((function(t){alert("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0642\u0645 \u0628\u0639\u0645\u0644 \u0627\u0639\u0627\u062f\u0629 \u0644\u0628\u0631\u0646\u0627\u0645\u062c qz tray"),console.error(t)}))}alert("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0637\u0644\u0628")}))}}},{key:"CompleteOrder",value:function(){for(var t=this,e=[],n=0;n<=this.addedItemsForPrint.length-1;n++){var i="quantity-"+n;localStorage.getItem(i)&&parseInt(localStorage.getItem(i)),e.push({itemamount:this.addedItemsForPrint[n].totalamount,itemtotal:this.addedItemsForPrint[n].price*this.addedItemsForPrint[n].totalamount,item_id:this.addedItemsForPrint[n].id,order_id:this.order_id,marketer_id:this.selectedMarketer,paymenttype_id:this.selectedPaymentways,platform_id:1})}this.service.addOrder(e).subscribe((function(e){console.log(e),t.addedItemsForPrint=[]}))}},{key:"print",value:function(t){this.AddOrderForKitchen()}},{key:"printAllOrder",value:function(t){this.addOrder()}},{key:"MakeDiscount",value:function(t){var e=t.target.value;this.itemPrice<this.lastitemPrice?(this.itemPrice=this.lastitemPrice,this.VAT=this.lastVAT,this.serviceTax=this.lastserviceTax):(this.lastitemPrice=this.itemPrice,this.lastVAT=this.VAT,this.lastserviceTax=this.serviceTax),this.itemPrice-=this.itemPrice*e/100,this.VAT-=this.VAT*e/100,this.serviceTax-=this.serviceTax*e/100,this.itemTotal=Math.round(100*(this.itemPrice+this.VAT+this.serviceTax))/100,this.discount=this.itemTotal*t.target.value/100,console.log(this.discount)}},{key:"selectedPaymentway",value:function(t){this.selectedPaymentways=t}},{key:"selectedMarketers",value:function(t){this.selectedMarketer=t}}]),t}()).\u0275fac=function(t){return new(t||F)(s.Vb(a.a),s.Vb(b.a),s.Vb(c.e),s.Vb(a.d))},F.\u0275cmp=s.Pb({type:F,selectors:[["app-orders"]],features:[s.Db([c.e])],decls:64,vars:12,consts:[[1,"order-background",2,"background-color","#fff","border-radius","5px"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"print-options"],[1,"list-unstyled","text-right"],[1,"fas","fa-print",3,"click"],[1,"fas","fa-print"],["type","number","min","1",2,"width","70px","margin","auto","text-align","center","background-color","#d8d8d8",3,"change"],[1,"row","orderoptions"],[1,"col-md-4"],[1,"form-group"],["for","country_id"],["id","country_id","name","country_id","required","","country_id","",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"section-background",2,"padding","20px","background-color","#e6eaed"],[1,"table-responsive",2,"height","256px"],[1,"table","text-center"],[2,"background-color","#d8d8d8"],[4,"ngIf"],["style","background-color: #fff",4,"ngIf"],["class","col-md-3",4,"ngIf"],["class","col-md-4 text-right",4,"ngIf"],[1,"container",2,"margin-top","20px"],[1,"col-md-8"],["min","1",2,"width","180px","margin","auto","text-align","center","background-color","#ffffff",3,"keyup"],["search",""],[1,"categories"],[1,"list-unstyled","text-right","categories"],[3,"active","id","click",4,"ngFor","ngForOf"],[1,"items"],["class","offercontainer",4,"ngIf"],["class","list-unstyled text-right",4,"ngIf"],[2,"margin","20px 0","background-color","#5c9d15","color","#fff","padding","5px","width","150px","border","none","border-radius","5px"],[3,"value"],[2,"background-color","#fff"],["style","cursor: pointer; border-bottom: 1px solid #f5f7f8;","class","rowparents",4,"ngFor","ngForOf"],[1,"rowparents",2,"cursor","pointer","border-bottom","1px solid #f5f7f8"],[1,"print-items","d-none"],["type","number","value","1"],[1,"print-item"],["type","number","min","1",1,"form-control",2,"width","70px","margin","auto","text-align","center","background-color","#d8d8d8",3,"value","change"],[1,"btn","btn-warning",2,"border-radius","50%","margin-left","10px","height","35px","width","35px","text-align","center","padding","0",3,"click"],[1,"fas","fa-highlighter",2,"pointer-events","none"],[1,"btn","btn-danger",2,"border-radius","50%","height","35px","width","35px","text-align","center","padding","0",3,"click"],[1,"fas","fa-times"],[1,"col-md-3"],[1,"form-group","text-right"],["for","tax",2,"font-weight","bold"],["id","tax","type","text","disabled","",1,"form-control",3,"value"],["for","serviceTax",2,"font-weight","bold"],["id","serviceTax","type","text","disabled","",1,"form-control",3,"value"],["for","price",2,"font-weight","bold"],["id","price","type","text","disabled","",1,"form-control",3,"value"],["for","total",2,"font-weight","bold"],["id","total","type","text","disabled","",1,"form-control",3,"value"],[1,"col-md-4","text-right"],[1,"btn","btn-primary",3,"click"],[3,"id","click"],[1,"offercontainer"],["class","list-unstyled text-right",4,"ngFor","ngForOf"],[1,"headforoffer"],["data-sub","false",3,"id","click",4,"ngFor","ngForOf"],["data-sub","false",3,"id","click"],["src","http://wokhouse.codesroots.com/img/logo.png",2,"width","100%","height","100%","display","block","border-radius","5px","pointer-events","none"],["data-sub","true",3,"id","click",4,"ngFor","ngForOf"],["data-sub","true",3,"id","click"]],template:function(t,e){if(1&t){var n=s.cc();s.bc(0,"div",0),s.bc(1,"div",1),s.bc(2,"div",2),s.bc(3,"div",3),s.bc(4,"div",4),s.bc(5,"ul",5),s.bc(6,"i",6),s.nc("click",(function(){return e.print("BIXOLON SRP-330")})),s.ac(),s.Rc(7," \u0637\u0628\u0627\u0639\u0647 \u0627\u0644\u0645\u0637\u0628\u062e "),s.bc(8,"li"),s.bc(9,"i",6),s.nc("click",(function(){return e.printAllOrder("BIXOLON SRP-330")})),s.ac(),s.Rc(10," \u0637\u0628\u0627\u0639\u0647 \u0627\u0644\u0643\u0627\u0634\u064a\u0631 "),s.ac(),s.Wb(11,"i",7),s.Rc(12," \u062e\u0635\u0645 "),s.bc(13,"input",8),s.nc("change",(function(t){return e.MakeDiscount(t)})),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(14,"div",9),s.bc(15,"div",10),s.bc(16,"div",11),s.bc(17,"label",12),s.Rc(18,"\u0648\u0633\u064a\u0644\u0629 \u0627\u0644\u062f\u0641\u0639 :"),s.ac(),s.bc(19,"select",13),s.nc("change",(function(t){return e.selectedPaymentway(t.target.value)})),s.Pc(20,m,2,2,"option",14),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(21,"div",1),s.bc(22,"div",15),s.bc(23,"div",2),s.bc(24,"div",3),s.bc(25,"div",16),s.bc(26,"table",17),s.bc(27,"thead",18),s.bc(28,"tr"),s.bc(29,"th"),s.Rc(30,"\u0627\u0644\u0627\u0633\u0645"),s.ac(),s.bc(31,"th"),s.Rc(32,"\u0633\u0639\u0631"),s.ac(),s.bc(33,"th"),s.Rc(34,"\u0648\u062d\u062f\u0627\u062a"),s.ac(),s.bc(35,"th"),s.Rc(36,"\u0636\u0631\u064a\u0628\u0629 \u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u0636\u0627\u0641\u0629"),s.ac(),s.Pc(37,v,2,0,"th",19),s.Wb(38,"th"),s.ac(),s.ac(),s.Pc(39,k,2,1,"tbody",20),s.ac(),s.ac(),s.ac(),s.Pc(40,P,6,4,"div",21),s.Pc(41,x,6,4,"div",21),s.Pc(42,C,6,4,"div",21),s.Pc(43,O,6,4,"div",21),s.Pc(44,w,4,0,"div",22),s.ac(),s.ac(),s.ac(),s.bc(45,"div",23),s.bc(46,"div",15),s.bc(47,"div",2),s.bc(48,"div",24),s.Rc(49," \u0627\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645 \u0628\u0639\u062f \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0642\u0633\u0645 "),s.bc(50,"input",25,26),s.nc("keyup",(function(){s.Ic(n);var t=s.Hc(51);return e.searchItem(t)})),s.ac(),s.ac(),s.ac(),s.bc(52,"div",2),s.bc(53,"div",10),s.bc(54,"div",27),s.bc(55,"ul",28),s.Pc(56,S,2,4,"li",29),s.ac(),s.ac(),s.ac(),s.bc(57,"div",24),s.bc(58,"div",30),s.Pc(59,A,2,1,"div",31),s.Pc(60,R,2,1,"ul",32),s.Pc(61,H,2,1,"ul",32),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(62,"button",33),s.Rc(63," \u062f\u0641\u0639 "),s.ac(),s.ac(),s.ac()}2&t&&(s.Eb(20),s.yc("ngForOf",e.paymentways),s.Eb(17),s.yc("ngIf",e.serviceTax>-1),s.Eb(2),s.yc("ngIf",e.addItems),s.Eb(1),s.yc("ngIf",e.addItems),s.Eb(1),s.yc("ngIf",e.serviceTax>-1&&e.addItems),s.Eb(1),s.yc("ngIf",e.addItems),s.Eb(1),s.yc("ngIf",e.addItems),s.Eb(1),s.yc("ngIf",e.addItems.length>=1),s.Eb(12),s.yc("ngForOf",e.categories[0]),s.Eb(3),s.yc("ngIf",e.offeritems.length>0),s.Eb(1),s.yc("ngIf",e.subs.length>=1),s.Eb(1),s.yc("ngIf",e.items.length>=1&&0==e.offeritems.length))},directives:[c.n,g.e,g.f,g.a,g.d,c.o,g.c],pipes:[c.f],styles:[".highlighted[_ngcontent-%COMP%]{background-color:#e1e9d7!important}.orderoptions[_ngcontent-%COMP%]{text-align:right}.active[_ngcontent-%COMP%]{background-color:#efdede!important}.headforoffer[_ngcontent-%COMP%]{height:10px!important;width:100%!important;text-align:right!important;font-size:15px!important;margin-right:8px}.print-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:20px 0}.print-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;padding:9px;margin-left:10px;background-color:#4a90e2;border-radius:5px;cursor:pointer;border:1px solid #4a90e2;color:#fff}.manage-table[_ngcontent-%COMP%]{padding:0}.manage-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;padding:10px;background-color:#9fa4a7;border:1px solid #eee;border-radius:5px;color:#fff;cursor:pointer}.manage-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i.red-arrow[_ngcontent-%COMP%]{padding:5px;background-color:#ef0000;border-radius:50%;display:inline-block;height:25px;width:25px;line-height:15px;text-align:center}.calculator[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-right:0;margin-bottom:10px}.calculator[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{width:100%;padding:10px;font-size:15px;font-weight:700;color:#414673}.categories[_ngcontent-%COMP%]{height:240px;border:1px solid #414673;margin-top:15px;background-color:#fff;border-radius:5px}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{padding:0;height:100%;margin:0;overflow-y:scroll}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding:10px;cursor:pointer;position:relative;text-align:center;width:150px;border-radius:5px;background-color:#e6eaed;color:#414673;font-size:18px;font-weight:700;margin:10px auto auto;transition:all .3s ease-out}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .subcategories[_ngcontent-%COMP%]{position:absolute;right:0;margin:10px 0;background-color:#fff;box-shadow:1px 1px 5px rgba(0,0,0,.5);border-radius:5px;width:100%;padding:0;display:none}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .subcategories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:9px;transition:all .3s ease-out}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .subcategories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{margin-right:5px}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   li.show-sub-list[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:block}.items[_ngcontent-%COMP%]{height:240px;border:1px solid #414673;margin-top:15px;background-color:#fff;border-radius:5px}.items[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:5px;height:100%;margin:0;overflow-y:scroll}.items[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-align:center;border-radius:5px;color:#414673;display:inline-block;margin-top:10px;margin-left:10px;width:100px;height:65px;cursor:pointer}.offercontainer[_ngcontent-%COMP%]{height:100%;overflow-y:scroll}.client-list[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]:disabled, .form-control[readonly][_ngcontent-%COMP%]{background-color:#fff}.client-list[_ngcontent-%COMP%]{position:absolute;list-style-type:none;width:91%;margin-top:10px;border-radius:5px;padding:5px;box-shadow:1px 1px 5px rgba(0,0,0,.5);z-index:9999}.client-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:5px;transition:all .3s ease-out}.client-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#eee}#invoice-POS[_ngcontent-%COMP%]{box-shadow:0 0 1in -.25in rgba(0,0,0,.5);padding:2mm;margin:0 auto;width:44mm;background:#fff}#invoice-POS[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5em;color:#222}#invoice-POS[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.9em}#invoice-POS[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2em;font-weight:300;line-height:2em}#invoice-POS[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.7em;color:#666;line-height:1.2em}#invoice-POS[_ngcontent-%COMP%]   #bot[_ngcontent-%COMP%], #invoice-POS[_ngcontent-%COMP%]   #mid[_ngcontent-%COMP%], #invoice-POS[_ngcontent-%COMP%]   #top[_ngcontent-%COMP%]{border-bottom:1px solid #eee}#invoice-POS[_ngcontent-%COMP%]   #top[_ngcontent-%COMP%]{min-height:100px}#invoice-POS[_ngcontent-%COMP%]   #mid[_ngcontent-%COMP%]{min-height:80px}#invoice-POS[_ngcontent-%COMP%]   #bot[_ngcontent-%COMP%]{min-height:50px}#invoice-POS[_ngcontent-%COMP%]   #top[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:60px;width:60px;background:url(http://michaeltruong.ca/images/logo1.png) no-repeat;background-size:60px 60px}#invoice-POS[_ngcontent-%COMP%]   .clientlogo[_ngcontent-%COMP%]{float:left;height:60px;width:60px;background:url(http://michaeltruong.ca/images/client.jpg) no-repeat;background-size:60px 60px;border-radius:50px}#invoice-POS[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:block;margin-left:0}#invoice-POS[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{float:right}#invoice-POS[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:right}#invoice-POS[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}#invoice-POS[_ngcontent-%COMP%]   .tabletitle[_ngcontent-%COMP%]{font-size:.5em;background:#eee}#invoice-POS[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]{border-bottom:1px solid #eee}#invoice-POS[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:24mm}#invoice-POS[_ngcontent-%COMP%]   .itemtext[_ngcontent-%COMP%]{font-size:.5em}#invoice-POS[_ngcontent-%COMP%]   #legalcopy[_ngcontent-%COMP%]{margin-top:5mm}"]}),F),B=n("tk/3"),N=((D=function(){function t(e){_classCallCheck(this,t),this.http=e,this.Tablesurl="http://wokhouse.codesroots.com/api/restables/gettablesdata/",this.orderUrl="http://wokhouse.codesroots.com/api/orders/add.json",this.checkOrderComplete="http://wokhouse.codesroots.com/api/orderdetails/getDetailsByOrder/"}return _createClass(t,[{key:"getTablesPosition",value:function(){return this.http.get(this.Tablesurl+localStorage.getItem("branch")+".json")}},{key:"addOrder",value:function(t){var e={headers:new B.e({"Content-Type":"application/json"})};return this.http.post(this.orderUrl,JSON.stringify(t),e)}},{key:"checkOrderCompletes",value:function(t){var e=new B.e({"Content-Type":"application/json"});return this.http.get(this.checkOrderComplete+t+".json",{headers:e})}}]),t}()).\u0275fac=function(t){return new(t||D)(s.jc(B.b))},D.\u0275prov=s.Rb({token:D,factory:D.\u0275fac,providedIn:"root"}),D),j=function(t){return{"background-color":t}};function X(t,e){if(1&t){var n=s.cc();s.bc(0,"input",14),s.nc("click",(function(t){return s.Ic(n),s.qc(2).addOrder(t)})),s.ac()}if(2&t){var i=s.qc().$implicit;s.zc("id",i.id),s.Ac("value","Table ",i.number,""),s.yc("ngStyle",s.Cc(3,j,i.orders.length>0?"#35e235":"white"))}}function z(t,e){if(1&t&&(s.bc(0,"li"),s.Pc(1,X,1,5,"input",13),s.ac()),2&t){var n=e.$implicit;s.Eb(1),s.yc("ngIf",1==n.position)}}function V(t,e){if(1&t){var n=s.cc();s.bc(0,"input",14),s.nc("click",(function(t){return s.Ic(n),s.qc(2).addOrder(t)})),s.ac()}if(2&t){var i=s.qc().$implicit;s.zc("id",i.id),s.Ac("value","Table ",i.number,""),s.yc("ngStyle",s.Cc(3,j,i.orders.length>0?"#35e235":"white"))}}function U(t,e){if(1&t&&(s.bc(0,"li"),s.Pc(1,V,1,5,"input",13),s.ac()),2&t){var n=e.$implicit;s.Eb(1),s.yc("ngIf",2==n.position)}}function W(t,e){if(1&t){var n=s.cc();s.bc(0,"input",14),s.nc("click",(function(t){return s.Ic(n),s.qc(2).addOrder(t)})),s.ac()}if(2&t){var i=s.qc().$implicit;s.zc("id",i.id),s.Ac("value","Table ",i.number,""),s.yc("ngStyle",s.Cc(3,j,i.orders.length>0?"#35e235":"white"))}}function L(t,e){if(1&t&&(s.bc(0,"li"),s.Pc(1,W,1,5,"input",13),s.ac()),2&t){var n=e.$implicit;s.Eb(1),s.yc("ngIf",3==n.position)}}function J(t,e){if(1&t){var n=s.cc();s.bc(0,"input",14),s.nc("click",(function(t){return s.Ic(n),s.qc(2).addOrder(t)})),s.ac()}if(2&t){var i=s.qc().$implicit;s.zc("id",i.id),s.Ac("value","Table ",i.number,""),s.yc("ngStyle",s.Cc(3,j,i.orders.length>0?"#35e235":"white"))}}function $(t,e){if(1&t&&(s.bc(0,"li"),s.Pc(1,J,1,5,"input",13),s.ac()),2&t){var n=e.$implicit;s.Eb(1),s.yc("ngIf",4==n.position)}}function K(t,e){if(1&t){var n=s.cc();s.bc(0,"input",14,15),s.nc("click",(function(t){return s.Ic(n),s.qc(2).addOrder(t)})),s.ac()}if(2&t){var i=s.qc().$implicit;s.zc("id",i.id),s.Ac("value","Table ",i.number,""),s.yc("ngStyle",s.Cc(3,j,i.orders.length>0?"#35e235":"white"))}}function Y(t,e){if(1&t&&(s.bc(0,"li"),s.Pc(1,K,2,5,"input",13),s.ac()),2&t){var n=e.$implicit;s.Eb(1),s.yc("ngIf",5==n.position)}}var G,Z=((G=function(){function t(e,n){_classCallCheck(this,t),this.service=e,this.router=n,this.tables=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.service.getTablesPosition().subscribe((function(e){t.tables=e.data,console.log(t.tables)}))}},{key:"addOrder",value:function(t){var e=this,n=t.target.getAttribute("id");this.service.checkOrderCompletes(n).subscribe((function(t){var i={typeorder:0,total:0,user_id:localStorage.getItem("userid"),waiter_id:1,table_id:parseInt(n),branch_id:localStorage.getItem("branch")};t.query.length>0?(console.log(t.query[0].orderdetails),e.router.navigate(["/orders/"+n+"/"+t.query[0].id+"/1"])):e.service.addOrder(i).subscribe((function(t){e.router.navigate(["/orders/"+n+"/"+t.data.id])}))}))}}]),t}()).\u0275fac=function(t){return new(t||G)(s.Vb(N),s.Vb(a.d))},G.\u0275cmp=s.Pb({type:G,selectors:[["app-tables"]],decls:32,vars:5,consts:[[1,"container"],[1,"row"],[1,"col-md-12"],[1,"borders"],[1,"border",2,"border-color","transparent !important"],[1,"tables-top"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,""],[1,"tables-right"],[1,"tables-bottom"],[1,"tables-left"],[1,"tables-center"],["type","button",3,"ngStyle","id","value","click",4,"ngIf"],["type","button",3,"ngStyle","id","value","click"],["table_id",""]],template:function(t,e){1&t&&(s.bc(0,"div",0),s.bc(1,"div",1),s.bc(2,"div",2),s.bc(3,"div",3),s.bc(4,"div",4),s.bc(5,"div",5),s.bc(6,"ul",6),s.Pc(7,z,2,1,"li",7),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(8,"div",2),s.bc(9,"div",3),s.bc(10,"div",8),s.bc(11,"div",9),s.bc(12,"ul",6),s.Pc(13,U,2,1,"li",7),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(14,"div",2),s.bc(15,"div",3),s.bc(16,"div",8),s.bc(17,"div",10),s.bc(18,"ul",6),s.Pc(19,L,2,1,"li",7),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(20,"div",2),s.bc(21,"div",3),s.bc(22,"div",8),s.bc(23,"div",11),s.bc(24,"ul",6),s.Pc(25,$,2,1,"li",7),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(26,"div",2),s.bc(27,"div",3),s.bc(28,"div",8),s.bc(29,"div",12),s.bc(30,"ul",6),s.Pc(31,Y,2,1,"li",7),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac()),2&t&&(s.Eb(7),s.yc("ngForOf",e.tables),s.Eb(6),s.yc("ngForOf",e.tables),s.Eb(6),s.yc("ngForOf",e.tables),s.Eb(6),s.yc("ngForOf",e.tables),s.Eb(6),s.yc("ngForOf",e.tables))},directives:[c.n,c.o,c.p],styles:["input[_ngcontent-%COMP%]{border-radius:5px!important;cursor:pointer!important;border:1px solid #eee!important;padding:10px!important;font-size:15px!important;font-weight:700!important;color:#414673!important;width:85px!important}ul[_ngcontent-%COMP%]{padding:0;margin-bottom:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;margin-right:5px}.borders[_ngcontent-%COMP%]{border-radius:5px;position:relative}.borders[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{position:absolute;top:0;width:100%}.borders[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]   .tables-top[_ngcontent-%COMP%]{width:100%;margin:auto}.borders[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]   .tables-top[_ngcontent-%COMP%], .tables-right[_ngcontent-%COMP%]{padding:10px;border:1px solid #eee;border-radius:5px;height:150px;overflow-y:scroll}.tables-right[_ngcontent-%COMP%]{position:absolute;right:0;top:190px}.tables-right[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block;margin:0 0 10px}.tables-left[_ngcontent-%COMP%]{position:absolute;left:0;top:190px;padding:10px;border:1px solid #eee;border-radius:5px;height:150px;overflow-y:scroll}.tables-left[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block;margin:0 0 10px}.tables-bottom[_ngcontent-%COMP%]{left:0;bottom:-535px;width:100%}.tables-bottom[_ngcontent-%COMP%], .tables-center[_ngcontent-%COMP%]{position:absolute;padding:10px;border:1px solid #eee;border-radius:5px;height:150px;overflow-y:scroll}.tables-center[_ngcontent-%COMP%]{bottom:-345px;width:45%;right:27%}"]}),G);function Q(t,e){if(1&t&&(s.bc(0,"option",56),s.Rc(1),s.ac()),2&t){var n=e.$implicit;s.yc("value",n.id),s.Eb(1),s.Sc(n.name)}}function tt(t,e){if(1&t&&(s.bc(0,"option",56),s.Rc(1),s.ac()),2&t){var n=e.$implicit;s.yc("value",n.id),s.Eb(1),s.Sc(n.name)}}function et(t,e){1&t&&(s.bc(0,"th"),s.Rc(1,"\u0636\u0631\u064a\u0628\u0629 \u062e\u062f\u0645\u0629"),s.ac())}function nt(t,e){if(1&t){var n=s.cc();s.bc(0,"tr",59),s.bc(1,"div",60),s.bc(2,"td"),s.Rc(3),s.ac(),s.bc(4,"td"),s.Rc(5),s.ac(),s.bc(6,"td"),s.Wb(7,"input",61),s.ac(),s.ac(),s.bc(8,"td",62),s.Rc(9),s.ac(),s.bc(10,"td"),s.Rc(11),s.ac(),s.bc(12,"td",62),s.bc(13,"input",63),s.nc("change",(function(t){s.Ic(n);var i=e.index;return s.qc(2).updateItems(t,i)})),s.ac(),s.ac(),s.bc(14,"td"),s.Rc(15),s.ac(),s.bc(16,"td"),s.bc(17,"button",64),s.nc("click",(function(t){s.Ic(n);var i=e.$implicit;return s.qc(2).highlighted(t,i)})),s.Wb(18,"i",65),s.ac(),s.bc(19,"button",66),s.nc("click",(function(t){s.Ic(n);var i=e.index;return s.qc(2).removeRow(t,i)})),s.Wb(20,"i",67),s.ac(),s.ac(),s.ac()}if(2&t){var i=e.$implicit;s.Eb(3),s.Sc(i.name),s.Eb(2),s.Tc("",i.price," \u062c.\u0645"),s.Eb(4),s.Sc(i.name),s.Eb(2),s.Tc("",i.price," \u062c.\u0645"),s.Eb(4),s.Tc("",i.tax.percentage," %"),s.Eb(2),s.zc("id",i.id)}}function it(t,e){if(1&t&&(s.bc(0,"tbody",57),s.Pc(1,nt,21,6,"tr",58),s.ac()),2&t){var n=s.qc();s.Eb(1),s.yc("ngForOf",n.addItems)}}function ot(t,e){if(1&t&&(s.bc(0,"div",68),s.bc(1,"div",69),s.bc(2,"label",70),s.Rc(3," \u0636\u0631\u064a\u0628\u0629 \u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u0636\u0627\u0641\u0629"),s.ac(),s.Wb(4,"input",71),s.rc(5,"number"),s.ac(),s.ac()),2&t){var n=s.qc();s.Eb(4),s.zc("value",s.tc(5,1,n.VAT,"1.2-2"))}}function rt(t,e){if(1&t){var n=s.cc();s.bc(0,"div",68),s.bc(1,"div",69),s.bc(2,"label",72),s.Rc(3," \u0636\u0631\u064a\u0628\u0629 \u062e\u062f\u0645\u0629"),s.ac(),s.bc(4,"input",73),s.nc("change",(function(t){return s.Ic(n),s.qc().ServiceChanged(t)})),s.ac(),s.ac(),s.ac()}}function ct(t,e){if(1&t&&(s.bc(0,"div",68),s.bc(1,"div",69),s.bc(2,"label",74),s.Rc(3,"\u0645\u0628\u0644\u063a \u0627\u062c\u0645\u0627\u0644\u064a"),s.ac(),s.Wb(4,"input",75),s.rc(5,"number"),s.ac(),s.ac()),2&t){var n=s.qc();s.Eb(4),s.zc("value",s.tc(5,1,n.itemPrice,"1.2-2"))}}function at(t,e){if(1&t&&(s.bc(0,"div",68),s.bc(1,"div",69),s.bc(2,"label",76),s.Rc(3,"\u0627\u0644\u0645\u062c\u0645\u0648\u0639"),s.ac(),s.Wb(4,"input",77),s.rc(5,"number"),s.ac(),s.ac()),2&t){var n=s.qc();s.Eb(4),s.zc("value",s.tc(5,1,n.itemTotal,"1.2-2"))}}function st(t,e){if(1&t){var n=s.cc();s.bc(0,"li",81),s.nc("click",(function(){s.Ic(n);var t=e.index;return s.qc(2).clientInfo(t)})),s.Rc(1),s.ac()}if(2&t){var i=e.$implicit;s.Eb(1),s.Tc(" ",i.mobile," ")}}function lt(t,e){if(1&t){var n=s.cc();s.bc(0,"ul",78),s.bc(1,"i",79),s.nc("click",(function(){return s.Ic(n),s.qc().clientArray=[]})),s.ac(),s.Pc(2,st,2,1,"li",80),s.ac()}if(2&t){var i=s.qc();s.Eb(2),s.yc("ngForOf",i.clientArray)}}function dt(t,e){if(1&t&&(s.bc(0,"div",10),s.Wb(1,"input",82),s.ac()),2&t){var n=s.qc();s.Eb(1),s.zc("value",n.clientExistName)}}function ut(t,e){if(1&t&&(s.bc(0,"div",10),s.Wb(1,"input",82),s.ac()),2&t){var n=s.qc();s.Eb(1),s.zc("value",n.clientExistAddress)}}function pt(t,e){if(1&t&&(s.bc(0,"div",10),s.Wb(1,"input",82),s.ac()),2&t){var n=s.qc();s.Eb(1),s.zc("value",n.clientExistPhone)}}function ht(t,e){if(1&t){var n=s.cc();s.bc(0,"li",83),s.nc("click",(function(){s.Ic(n);var t=e.$implicit;return s.qc().clicked=t}))("click",(function(){s.Ic(n);var t=e.index;return s.qc().getItemsByCategory(t)})),s.Rc(1),s.ac()}if(2&t){var i=e.$implicit,o=s.qc();s.Lb("active",o.clicked===i),s.zc("id",i.id),s.Eb(1),s.Tc(" ",i.name," ")}}function ft(t,e){if(1&t){var n=s.cc();s.bc(0,"li",88),s.nc("click",(function(t){s.Ic(n);var i=e.index,o=s.qc().index;return s.qc(2).PutItemForSell(t,i,o)})),s.Wb(1,"img",89),s.Rc(2),s.ac()}if(2&t){var i=e.$implicit;s.zc("id",i.id),s.Eb(2),s.Tc(" ",i.name," ")}}function bt(t,e){if(1&t&&(s.bc(0,"ul",5),s.bc(1,"li",86),s.Rc(2),s.ac(),s.Pc(3,ft,3,2,"li",87),s.ac()),2&t){var n=e.$implicit;s.Eb(2),s.Sc(n.subcategory.name),s.Eb(1),s.yc("ngForOf",n.subcategory.items)}}function gt(t,e){if(1&t&&(s.bc(0,"div",84),s.Pc(1,bt,4,2,"ul",85),s.ac()),2&t){var n=s.qc();s.Eb(1),s.yc("ngForOf",n.offeritems)}}function mt(t,e){if(1&t){var n=s.cc();s.bc(0,"li",91),s.nc("click",(function(t){s.Ic(n);var i=e.index;return s.qc(2).getItems(t,i)})),s.Wb(1,"img",89),s.Rc(2),s.ac()}if(2&t){var i=e.$implicit;s.zc("id",i.id),s.Eb(2),s.Tc(" ",i.name," ")}}function vt(t,e){if(1&t&&(s.bc(0,"ul",5),s.Pc(1,mt,3,2,"li",90),s.ac()),2&t){var n=s.qc();s.Eb(1),s.yc("ngForOf",n.subs[0])}}function yt(t,e){if(1&t){var n=s.cc();s.bc(0,"li",88),s.nc("click",(function(t){s.Ic(n);var i=e.index;return s.qc(2).PutItemForSell(t,i,0)})),s.Wb(1,"img",89),s.Rc(2),s.ac()}if(2&t){var i=e.$implicit;s.zc("id",i.id),s.Eb(2),s.Tc(" ",i.name," ")}}function _t(t,e){if(1&t&&(s.bc(0,"ul",5),s.Pc(1,yt,3,2,"li",87),s.ac()),2&t){var n=s.qc();s.Eb(1),s.yc("ngForOf",n.items)}}var kt,Pt,xt=((Pt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o,r){var c;return _classCallCheck(this,n),(c=e.call(this,t,i,o,r)).route=t,c.service=i,c.datePipe=o,c.router=r,c.clientArray=[],h.api.setSha256Type((function(t){return Object(f.sha256)(t)})),h.api.setPromiseType((function(t){return new Promise(t)})),c.service.getLastNotCompeleteOrder(localStorage.getItem("branch")).subscribe((function(t){null==t.query?c.addOrders():(c.order_id=t.query.id,console.log(c.order_id),c.service.checkOrderCompletesById(c.order_id).subscribe((function(t){if(null!=t.query[0].orderdetails){for(var e=0;e<=t.query[0].orderdetails.length-1;e++)c.addItems.push(t.query[0].orderdetails[e].item),c.itemTax=c.addItems[e].tax.percentage,c.addItems[e].totalamount=t.query[0].orderdetails[e].itemamount,0==t.query[0].orderdetails[e].itemtotal?c.addItems[e].price=0:(c.itemPrice+=t.query[0].orderdetails[e].itemtotal,c.addItems[e].tax.percentage>0&&(console.log(c.addItems[e]),c.VAT+=Math.round(t.query[0].orderdetails[e].itemtotal*c.itemTax/100*100)/100));c.itemTotal=Math.round(100*(c.itemPrice+c.VAT+c.serviceTax))/100}})))})),c.delivry=1,c}return _createClass(n,[{key:"addOrders",value:function(){var t=this,e={typeorder:1,total:0,user_id:1,waiter_id:1,table_id:0,branch_id:localStorage.getItem("branch")};this.service.addOrder(e).subscribe((function(e){t.order_id=e.data.id,localStorage.setItem("orderid",t.order_id)}))}},{key:"setClientName",value:function(t){this.clientName=t.value}},{key:"setClientPhone",value:function(t){this.clientPhone=t.value}},{key:"setClientAddress",value:function(t){this.clientAddress=t.value}},{key:"addClient",value:function(t){t={firstname:this.clientName,mobile:this.clientPhone,address:this.clientAddress,username:this.clientName,branch_id:localStorage.getItem("branch"),password:"123456",email:"a@a.com",email_verified:1,active:1},console.log(JSON.stringify(t)),this.service.addClient(t).subscribe((function(t){console.log(t),null!=t.data?alert("\u062a\u0645 \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0645\u064a\u0644 \u0628\u0646\u062c\u0627\u062d"):alert("\u0645\u0648\u062c\u0648\u062f \u0645\u0646 \u0642\u0628\u0644")}),(function(t){alert("\u0645\u0648\u062c\u0648\u062f \u0645\u0646 \u0642\u0628\u0644")}))}},{key:"ServiceChanged",value:function(t){this.lastvalue>0&&(this.itemTotal=this.itemTotal-parseInt(this.lastvalue)),this.lastvalue=t.target.value,this.serviceTax=parseInt(t.target.value),this.itemTotal=this.itemTotal+parseInt(t.target.value)}},{key:"printAllOrder",value:function(t){var e=this;console.log(this.order_id);var n=this;if(null!=this.clientExistName){var i={total:this.itemTotal,service:this.serviceTax,taxes:this.VAT,discount:this.discount,branch_id:localStorage.getItem("branch"),marketer_id:this.selectedMarketer,paymenttype_id:this.selectedPaymentways,platform_id:1};console.log(i),console.log(this.order_id),this.service.EditOrder(i,this.order_id).subscribe((function(t){if(1==t.success){console.log(e.order_id),localStorage.removeItem("orderid");var i=[];e.addItems.forEach((function(t){console.log(t.name),i.push(t.name+"         \x1ba0",+t.totalamount+"       \x1ba0",+t.price*t.totalamount+"\n")})),e.addItems=[];var o=e.datePipe.transform(new Date,"yyyy-MM-dd hh:mm"),r=[{type:"raw",format:"image",data:"assets/images/62123932_340200260263485_2674160429353140224_n (2).png",options:{encoding:"IBM864",language:"ESCPOS",dotDensity:"double"}},"\x1b@","\x1ba2"," \u0637\u0644\u0628 \u0631\u0642\u0645   : "+e.order_id+"\n","  \u0625\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644  : "+e.clientExistName+"\n","\n","  \u0631\u0642\u0645 \u0627\u0644\u0639\u0645\u064a\u0644  : "+e.clientExistPhone+"\n","\n","\n","  \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0639\u0645\u064a\u0644  : "+e.clientExistAddress+"\n","\n","\n",o+"\n","\n\n\x1ba2","\u0627\u0644\u0627\u0633\u0645                      \u0627\u0644\u0643\u0645\u064a\u0629     \u0627\u0644\u0633\u0639\u0631\n","\n","\n","------------------------------------------","\n",i.toString().replace(/,/g,""),"\n","\n","\x1ba0","SubTotal   "+Math.round(100*e.itemPrice)/100+"\n","\n","DisCount    "+Math.round(100*e.discount)/100+"%\n","\n","Service   "+Math.round(100*e.serviceTax)/100+"\n","\n","\n","Taxes   "+Math.round(100*e.VAT)/100+"\n","\n","Total   "+Math.round(100*e.itemTotal)/100+"\n","\n","\n","\n","------------------------------------------","\n","\n","\n","\x1ba0","\n\n\n\n\n\x1bi","\x10\x14\x01\0\x05"];e.printers=[],console.log("AppComponent____________");var c=h.configs.create(localStorage.getItem("printer").replace(/['"]+/g,""),{encoding:"IBM864"});return h.print(c,r).then((function(t){n.router.navigate(["/tables"])})).catch((function(t){alert("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0642\u0645 \u0628\u0639\u0645\u0644 \u0627\u0639\u0627\u062f\u0629 \u0644\u0628\u0631\u0646\u0627\u0645\u062c qz tray"),console.error(t)}))}}))}else alert("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0627\u062f\u062e\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644")}},{key:"searchClient",value:function(t){var e=this;console.log(t);var n={mobile:t};console.log(JSON.stringify(n)),this.service.searchClient(n).subscribe((function(t){console.log(t.data),e.clientArray=t.data}))}},{key:"clientInfo",value:function(t){this.clientExistName=this.clientArray[t].username,this.clientExistAddress=this.clientArray[t].address,this.clientExistPhone=this.clientArray[t].mobile,this.clientId=this.clientArray[t].id,this.clientArray=[]}}]),n}(q)).\u0275fac=function(t){return new(t||Pt)(s.Vb(a.a),s.Vb(b.a),s.Vb(c.e),s.Vb(a.d))},Pt.\u0275cmp=s.Pb({type:Pt,selectors:[["app-orders"]],features:[s.Db([c.e]),s.Bb],decls:104,vars:16,consts:[[1,"order-background",2,"background-color","#fff","border-radius","5px"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"print-options"],[1,"list-unstyled","text-right"],[1,"fas","fa-print",3,"click"],[1,"fas","fa-print"],["type","number","min","1",2,"width","70px","margin","auto","text-align","center","background-color","#d8d8d8",3,"change"],[1,"row","orderoptions"],[1,"col-md-4"],[1,"form-group"],["for","country_id"],["id","country_id","name","country_id","required","","country_id","",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"section-background",2,"padding","20px","background-color","#e6eaed"],[1,"table-responsive",2,"height","256px"],[1,"table","text-center"],[2,"background-color","#d8d8d8"],[4,"ngIf"],["style","background-color: #fff",4,"ngIf"],["class","col-md-3",4,"ngIf"],[1,"col-md-4","text-right",2,"position","relative"],["type","text","placeholder","\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0639\u0645\u064a\u0644 \u0628\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641",1,"form-control",3,"keyup"],["search",""],["class","client-list",4,"ngIf"],[1,"col-md-4","text-right"],["data-toggle","modal","data-target","#newClientModal",1,"btn","btn-danger"],["id","newClientModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","d-flex","justify-content-between"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body"],[1,""],[2,"margin-bottom","10px"],["type","text","placeholder","\u0627\u0644\u0627\u0633\u0645",1,"form-control",3,"change"],["clientName",""],["type","text","placeholder","\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641",1,"form-control",3,"change"],["clientPhone",""],["type","text","placeholder","\u0627\u0644\u0639\u0646\u0648\u0627\u0646",1,"form-control",3,"change"],["clientAddress",""],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["class","col-md-4",4,"ngIf"],[1,"container",2,"margin-top","20px"],[1,"col-md-8"],["min","1",2,"width","180px","margin","auto","text-align","center","background-color","#ffffff",3,"keyup"],["searchdelivry",""],[1,"categories"],[1,"list-unstyled","text-right","categories"],[3,"active","id","click",4,"ngFor","ngForOf"],[1,"items"],["class","offercontainer",4,"ngIf"],["class","list-unstyled text-right",4,"ngIf"],[2,"margin","20px 0","background-color","#5c9d15","color","#fff","padding","5px","width","150px","border","none","border-radius","5px"],[3,"value"],[2,"background-color","#fff"],["style","cursor: pointer; border-bottom: 1px solid #f5f7f8;",4,"ngFor","ngForOf"],[2,"cursor","pointer","border-bottom","1px solid #f5f7f8"],[1,"print-items","d-none"],["type","number","value","1"],[1,"print-item"],["type","number","value","1","min","1",1,"form-control",2,"width","70px","margin","auto","text-align","center","background-color","#d8d8d8",3,"change"],[1,"btn","btn-warning",2,"border-radius","50%","margin-left","10px","height","35px","width","35px","text-align","center","padding","0",3,"id","click"],[1,"fas","fa-highlighter"],[1,"btn","btn-danger",2,"border-radius","50%","height","35px","width","35px","text-align","center","padding","0",3,"click"],[1,"fas","fa-times"],[1,"col-md-3"],[1,"form-group","text-right"],["for","tax",2,"font-weight","bold"],["id","tax","type","text","disabled","",1,"form-control",3,"value"],["for","serviceTax",2,"font-weight","bold"],["id","serviceTax","type","text","type","number","min","0","max","99","required","",1,"form-control",3,"change"],["for","price",2,"font-weight","bold"],["id","price","type","text","disabled","",1,"form-control",3,"value"],["for","total",2,"font-weight","bold"],["id","total","type","text","disabled","",1,"form-control",3,"value"],[1,"client-list"],[1,"far","fa-times-circle",2,"color","red","cursor","pointer",3,"click"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["type","text","disabled","",1,"form-control",3,"value"],[3,"id","click"],[1,"offercontainer"],["class","list-unstyled text-right",4,"ngFor","ngForOf"],[1,"headforoffer"],["data-sub","false",3,"id","click",4,"ngFor","ngForOf"],["data-sub","false",3,"id","click"],["src","http://wokhouse.codesroots.com/img/logo.png",2,"width","100%","height","100%","display","block","border-radius","5px","pointer-events","none"],["data-sub","true",3,"id","click",4,"ngFor","ngForOf"],["data-sub","true",3,"id","click"]],template:function(t,e){if(1&t){var n=s.cc();s.bc(0,"div",0),s.bc(1,"div",1),s.bc(2,"div",2),s.bc(3,"div",3),s.bc(4,"div",4),s.bc(5,"ul",5),s.bc(6,"i",6),s.nc("click",(function(){return e.print("BIXOLON SRP-330")})),s.ac(),s.Rc(7," \u0637\u0628\u0627\u0639\u0647 \u0627\u0644\u0645\u0637\u0628\u062e "),s.bc(8,"li"),s.bc(9,"i",6),s.nc("click",(function(){return e.printAllOrder("BIXOLON SRP-330")})),s.ac(),s.Rc(10," \u0637\u0628\u0627\u0639\u0647 \u0627\u0644\u0643\u0627\u0634\u064a\u0631 "),s.ac(),s.Wb(11,"i",7),s.Rc(12," \u062e\u0635\u0645 "),s.bc(13,"input",8),s.nc("change",(function(t){return e.MakeDiscount(t)})),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(14,"div",9),s.bc(15,"div",10),s.bc(16,"div",11),s.bc(17,"label",12),s.Rc(18,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u0648\u0642:"),s.ac(),s.bc(19,"select",13),s.nc("change",(function(t){return e.selectedMarketers(t.target.value)})),s.Pc(20,Q,2,2,"option",14),s.ac(),s.ac(),s.ac(),s.bc(21,"div",10),s.bc(22,"div",11),s.bc(23,"label",12),s.Rc(24,"\u0648\u0633\u064a\u0644\u0629 \u0627\u0644\u062f\u0641\u0639 :"),s.ac(),s.bc(25,"select",13),s.nc("change",(function(t){return e.selectedPaymentway(t.target.value)})),s.Pc(26,tt,2,2,"option",14),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(27,"div",1),s.bc(28,"div",15),s.bc(29,"div",2),s.bc(30,"div",3),s.bc(31,"div",16),s.bc(32,"table",17),s.bc(33,"thead",18),s.bc(34,"tr"),s.bc(35,"th"),s.Rc(36,"\u0627\u0644\u0627\u0633\u0645"),s.ac(),s.bc(37,"th"),s.Rc(38,"\u0633\u0639\u0631"),s.ac(),s.bc(39,"th"),s.Rc(40,"\u0648\u062d\u062f\u0627\u062a"),s.ac(),s.bc(41,"th"),s.Rc(42,"\u0636\u0631\u064a\u0628\u0629 \u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u0636\u0627\u0641\u0629"),s.ac(),s.Pc(43,et,2,0,"th",19),s.Wb(44,"th"),s.ac(),s.ac(),s.Pc(45,it,2,1,"tbody",20),s.ac(),s.ac(),s.ac(),s.Pc(46,ot,6,4,"div",21),s.Pc(47,rt,5,0,"div",21),s.Pc(48,ct,6,4,"div",21),s.Pc(49,at,6,4,"div",21),s.bc(50,"div",22),s.bc(51,"div",11),s.bc(52,"input",23,24),s.nc("keyup",(function(t){return e.searchClient(t.target.value)})),s.ac(),s.Pc(54,lt,3,1,"ul",25),s.ac(),s.ac(),s.bc(55,"div",26),s.bc(56,"div",11),s.bc(57,"button",27),s.Rc(58," \u0627\u0636\u0627\u0641\u0629 \u0639\u0645\u064a\u0644 "),s.ac(),s.ac(),s.ac(),s.bc(59,"div",28),s.bc(60,"div",29),s.bc(61,"div",30),s.bc(62,"div",31),s.bc(63,"h5",32),s.Rc(64,"\u0627\u0636\u0627\u0641\u0629 \u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f"),s.ac(),s.ac(),s.bc(65,"div",33),s.bc(66,"div",1),s.bc(67,"div",2),s.bc(68,"div",3),s.bc(69,"form",34),s.bc(70,"div",35),s.bc(71,"input",36,37),s.nc("change",(function(){s.Ic(n);var t=s.Hc(72);return e.setClientName(t)})),s.ac(),s.ac(),s.bc(73,"div",35),s.bc(74,"input",38,39),s.nc("change",(function(){s.Ic(n);var t=s.Hc(75);return e.setClientPhone(t)})),s.ac(),s.ac(),s.bc(76,"div",35),s.bc(77,"input",40,41),s.nc("change",(function(){s.Ic(n);var t=s.Hc(78);return e.setClientAddress(t)})),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(79,"div",42),s.bc(80,"button",43),s.nc("click",(function(){return e.addClient(e.clientArray)})),s.Rc(81," \u0627\u0636\u0627\u0641\u0629 \u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f "),s.ac(),s.ac(),s.ac(),s.ac(),s.ac(),s.Pc(82,dt,2,1,"div",44),s.Pc(83,ut,2,1,"div",44),s.Pc(84,pt,2,1,"div",44),s.ac(),s.ac(),s.ac(),s.bc(85,"div",45),s.bc(86,"div",15),s.bc(87,"div",2),s.bc(88,"div",46),s.Rc(89," \u0627\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645 \u0628\u0639\u062f \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0642\u0633\u0645 "),s.bc(90,"input",47,48),s.nc("keyup",(function(){s.Ic(n);var t=s.Hc(91);return e.searchItem(t)})),s.ac(),s.ac(),s.ac(),s.bc(92,"div",2),s.bc(93,"div",10),s.bc(94,"div",49),s.bc(95,"ul",50),s.Pc(96,ht,2,4,"li",51),s.ac(),s.ac(),s.ac(),s.bc(97,"div",46),s.bc(98,"div",52),s.Pc(99,gt,2,1,"div",53),s.Pc(100,vt,2,1,"ul",54),s.Pc(101,_t,2,1,"ul",54),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(102,"button",55),s.Rc(103," \u062f\u0641\u0639 "),s.ac(),s.ac(),s.ac()}2&t&&(s.Eb(20),s.yc("ngForOf",e.marketers),s.Eb(6),s.yc("ngForOf",e.paymentways),s.Eb(17),s.yc("ngIf",e.serviceTax>-1),s.Eb(2),s.yc("ngIf",e.addItems),s.Eb(1),s.yc("ngIf",e.addItems),s.Eb(1),s.yc("ngIf",e.serviceTax>-1&&e.addItems),s.Eb(1),s.yc("ngIf",e.addItems),s.Eb(1),s.yc("ngIf",e.addItems),s.Eb(5),s.yc("ngIf",e.clientArray.length>=1),s.Eb(28),s.yc("ngIf",e.clientExistName),s.Eb(1),s.yc("ngIf",e.clientExistAddress),s.Eb(1),s.yc("ngIf",e.clientExistPhone),s.Eb(12),s.yc("ngForOf",e.categories[0]),s.Eb(3),s.yc("ngIf",e.offeritems.length>0),s.Eb(1),s.yc("ngIf",e.subs.length>=1),s.Eb(1),s.yc("ngIf",e.items.length>=1&&0==e.offeritems.length))},directives:[c.n,g.e,g.f,g.a,g.d,c.o,g.c],pipes:[c.f],styles:[".highlighted[_ngcontent-%COMP%]{background-color:#e1e9d7!important}.orderoptions[_ngcontent-%COMP%]{text-align:right}.print-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:20px 0;float:right}.print-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;padding:9px;margin-left:10px;background-color:#4a90e2;border-radius:5px;cursor:pointer;color:#fff}.manage-table[_ngcontent-%COMP%]{padding:0}.manage-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;padding:10px;background-color:#9fa4a7;border:1px solid #eee;border-radius:5px;color:#fff;cursor:pointer}.manage-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i.red-arrow[_ngcontent-%COMP%]{padding:5px;background-color:#ef0000;border-radius:50%;display:inline-block;height:25px;width:25px;line-height:15px;text-align:center}.calculator[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-right:0;margin-bottom:10px}.calculator[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{width:100%;padding:10px;font-size:15px;font-weight:700;color:#414673}.categories[_ngcontent-%COMP%]{height:240px;border:1px solid #414673;margin-top:15px;background-color:#fff;border-radius:5px}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{padding:0;height:100%;margin:0;overflow-y:scroll}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding:10px;cursor:pointer;position:relative;text-align:center;width:150px;border-radius:5px;background-color:#e6eaed;color:#414673;font-size:18px;font-weight:700;margin:10px auto auto;transition:all .3s ease-out}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .subcategories[_ngcontent-%COMP%]{position:absolute;right:0;margin:10px 0;background-color:#fff;box-shadow:1px 1px 5px rgba(0,0,0,.5);border-radius:5px;width:100%;padding:0;display:none}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .subcategories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:9px;transition:all .3s ease-out}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .subcategories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{margin-right:5px}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   li.show-sub-list[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:block}.items[_ngcontent-%COMP%]{height:240px;border:1px solid #414673;margin-top:15px;background-color:#fff;border-radius:5px}.items[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:5px;height:100%;margin:0;overflow-y:scroll}.items[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-align:center;border-radius:5px;color:#414673;display:inline-block;margin-top:10px;margin-left:10px;width:100px;height:65px;cursor:pointer}.offercontainer[_ngcontent-%COMP%]{height:100%;overflow-y:scroll}.headforoffer[_ngcontent-%COMP%]{height:10px!important;width:100%!important;text-align:right!important;font-size:15px!important;margin-right:8px}.client-list[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]:disabled, .form-control[readonly][_ngcontent-%COMP%]{background-color:#fff}.client-list[_ngcontent-%COMP%]{position:absolute;list-style-type:none;width:91%;margin-top:10px;border-radius:5px;padding:5px;box-shadow:1px 1px 5px rgba(0,0,0,.5);z-index:9999}.client-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:5px;transition:all .3s ease-out}.client-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#eee}"]}),Pt),Ct=((kt=function(){function t(e){_classCallCheck(this,t),this.http=e,this.categoriesUrl="http://wokhouse.codesroots.com/api/orderdetails/getSellsByCategory.json",this.categoriesUrlByDate="http://wokhouse.codesroots.com/api/orderdetails/getSellsByCategoryByDate.json",this.ExpensesByDay="http://wokhouse.codesroots.com/api/expenses/getDailyExpenses.json",this.ExpensesByDayByDate="http://wokhouse.codesroots.com/api/expenses/getDailyExpensesByDate.json",this.PaymentStaffByDay="http://wokhouse.codesroots.com/api/StaffPayments/getDailyStaffPayments.json",this.EaymentStaffByDayByDate="http://wokhouse.codesroots.com/api/StaffPayments/getDailyStaffPaymentsByDate.json",this.headers=new B.e({"Content-Type":"application/json"}),this.options={headers:this.headers}}return _createClass(t,[{key:"getdayreport",value:function(t){var e={headers:new B.e({"Content-Type":"application/json"})};return this.http.post(this.categoriesUrl,JSON.stringify(t),e)}},{key:"getdayreportByDate",value:function(t){var e={headers:new B.e({"Content-Type":"application/json"})};return this.http.post(this.categoriesUrlByDate,JSON.stringify(t),e)}},{key:"ExpensesByDaysDate",value:function(t){var e={headers:new B.e({"Content-Type":"application/json"})};return this.http.post(this.ExpensesByDayByDate,JSON.stringify(t),e)}},{key:"ExpensesByDays",value:function(t){var e={headers:new B.e({"Content-Type":"application/json"})};return this.http.post(this.ExpensesByDay,JSON.stringify(t),e)}},{key:"StaffPaymentsByDaysDate",value:function(t){var e={headers:new B.e({"Content-Type":"application/json"})};return this.http.post(this.EaymentStaffByDayByDate,JSON.stringify(t),e)}},{key:"StaffPaymentsByDays",value:function(t){var e={headers:new B.e({"Content-Type":"application/json"})};return this.http.post(this.PaymentStaffByDay,JSON.stringify(t),e)}}]),t}()).\u0275fac=function(t){return new(t||kt)(s.jc(B.b))},kt.\u0275prov=s.Rb({token:kt,factory:kt.\u0275fac,providedIn:"root"}),kt),Ot=n("1kSV");function wt(t,e){if(1&t&&(s.bc(0,"td"),s.Rc(1),s.ac()),2&t){var n=s.qc().$implicit;s.Eb(1),s.Tc(" ",n.item.subcategory.category.name,"")}}function St(t,e){if(1&t&&(s.bc(0,"td"),s.Rc(1),s.rc(2,"number"),s.ac()),2&t){var n=s.qc().$implicit;s.Eb(1),s.Tc(" ",s.tc(2,1,n.SumTotal,"1.2-2"),"")}}function It(t,e){if(1&t&&(s.bc(0,"tr",12),s.Pc(1,wt,2,1,"td",13),s.Pc(2,St,3,4,"td",13),s.ac()),2&t){var n=e.$implicit;s.Eb(1),s.yc("ngIf",null!=n.item.subcategory&&null!=n.item),s.Eb(1),s.yc("ngIf",null!=n.item.subcategory&&null!=n.item)}}function Mt(t,e){if(1&t&&(s.bc(0,"tr"),s.bc(1,"td"),s.Rc(2),s.ac(),s.bc(3,"td"),s.Rc(4),s.ac(),s.ac()),2&t){var n=e.$implicit;s.Eb(2),s.Tc(" \u0628\u064a\u0639 \u0627\u0644\u0639\u0631\u0648\u0636 \u0641\u064a ",n.key,""),s.Eb(2),s.Tc(" ",n.value,"")}}function At(t,e){1&t&&(s.bc(0,"td"),s.Rc(1," \u062f\u0644\u064a\u0641\u0631\u064a "),s.ac())}function Et(t,e){1&t&&(s.bc(0,"td"),s.Rc(1," \u0635\u0627\u0644\u0629 "),s.ac())}function Rt(t,e){if(1&t){var n=s.cc();s.bc(0,"tr",9),s.bc(1,"td"),s.Rc(2),s.ac(),s.bc(3,"td"),s.Rc(4),s.ac(),s.Pc(5,At,2,0,"td",10),s.Pc(6,Et,2,0,"td",10),s.bc(7,"td",11),s.Rc(8),s.rc(9,"date"),s.ac(),s.bc(10,"td"),s.Rc(11),s.ac(),s.bc(12,"td",11),s.Rc(13),s.ac(),s.bc(14,"td"),s.bc(15,"button",12),s.nc("click",(function(){s.Ic(n);var t=e.index;return s.qc(2).printAllOrder(t)})),s.Wb(16,"i",13),s.ac(),s.ac(),s.ac()}if(2&t){var i=e.$implicit;s.Eb(2),s.Sc(i.id),s.Eb(2),s.Tc("",i.total," \u062c.\u0645"),s.Eb(1),s.yc("ngIf",1==i.typeorder),s.Eb(1),s.yc("ngIf",0==i.typeorder),s.Eb(2),s.Sc(s.tc(9,7,i.modified,"H:m")),s.Eb(3),s.Tc("",i.taxes," \u062c.\u0645"),s.Eb(2),s.Tc(" ",i.service," \u062c.\u0645 ")}}function Tt(t,e){if(1&t&&(s.bc(0,"tbody",7),s.Pc(1,Rt,17,10,"tr",8),s.ac()),2&t){var n=s.qc();s.Eb(1),s.yc("ngForOf",n.addedorders)}}var Ht,Ft,Dt,qt=[{path:"",component:p,children:[{path:"orders/:table_id/:order_id/:check",component:q},{path:"orders/:table_id/:order_id",component:q},{path:"tables",component:Z},{path:"delivery",component:xt},{path:"report",component:(Ft=function(){function t(e,n,i){_classCallCheck(this,t),this.service=e,this.calendar=n,this.datePipe=i,this.isExpresesVisible=!1,this.categories=[],h.api.setSha256Type((function(t){return Object(f.sha256)(t)})),h.api.setPromiseType((function(t){return new Promise(t)})),h.websocket.connect().then((function(){return h.printers.find("HP LaserJet 2420")})).then((function(t){console.log(t)})).catch((function(t){console.error(t)}))}return _createClass(t,[{key:"locationsSum",value:function(){return this.categories.map((function(t){return t.SumTotal})).reduce((function(t,e){return t+e}),0)}},{key:"selectToday",value:function(){this.model=this.calendar.getToday()}},{key:"ngOnInit",value:function(){this.getdayreport()}},{key:"getdayreport",value:function(){var t=this,e=[];e.push({branch_id:localStorage.getItem("branch")}),this.service.getdayreport(e).subscribe((function(e){t.maindata=e,t.alltotal=Math.round(100*t.maindata.allsales[0].SumTotal)/100,t.services=Math.round(100*t.maindata.allsales[0].TaxesTotal)/100,t.taxes=Math.round(100*t.maindata.allsales[0].ServiceTotal)/100,t.discount=Math.round(100*t.maindata.allsales[0].DiscountTotal)/100,console.log(t.maindata.offerdetailsarray),t.categories=t.maindata.query})),this.service.ExpensesByDays(e).subscribe((function(e){console.log(e),t.expenses=Math.round(100*e.query[0].SumTotal)/100})),this.service.StaffPaymentsByDays(e).subscribe((function(e){console.log(e),t.staffpayments=Math.round(100*e.query[0].SumTotal)/100}))}},{key:"ServiceChanged",value:function(t){var e=this;this.date=t.target.value;var n=[];n.push({date:this.date,branch_id:localStorage.getItem("branch")}),this.service.getdayreportByDate(n).subscribe((function(t){e.maindata=t,e.alltotal=Math.round(100*e.maindata.allsales[0].SumTotal)/100,e.services=Math.round(100*e.maindata.allsales[0].TaxesTotal)/100,e.taxes=Math.round(100*e.maindata.allsales[0].ServiceTotal)/100,e.discount=Math.round(100*e.maindata.allsales[0].DiscountTotal)/100,console.log(e.discount),e.categories=e.maindata.query})),this.service.ExpensesByDaysDate(n).subscribe((function(t){console.log(t),e.expenses=Math.round(100*t.query[0].SumTotal)/100})),this.service.StaffPaymentsByDaysDate(n).subscribe((function(t){console.log(t),e.staffpayments=Math.round(100*t.query[0].SumTotal)/100}))}},{key:"printAllOrder",value:function(t){null==this.date&&(this.date=this.datePipe.transform(new Date,"yyyy-MM-dd hh:mm"));var e=[];this.categories.forEach((function(t){e.push(t.item.subcategory.category.name+"                      "+t.SumTotal+"\n")})),console.log(e.toString().replace(/,/g,""));var n=[{type:"raw",format:"image",data:"assets/images/62123932_340200260263485_2674160429353140224_n (2).png",options:{encoding:"IBM864",language:"ESCPOS",dotDensity:"double"}},"\x1b@","\x1ba2","\u0645\u0628\u064a\u0639\u0627\u062a  : "+Math.round(100*this.maindata.allsales[0].SumTotal)/100+"\n","\n","\n","\n",this.date+"\n","\n\u0627\u0644\u0642\u0633\u0645                      \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a\n","\n","\n","------------------------------------------","\n",e.toString().replace(/,/g,""),"\n","\n","------------------------------------------","\n","\n","\n","\x1ba0","\n\n\n\n\n\x1bi","\x10\x14\x01\0\x05"];this.printers=[],console.log("AppComponent____________");var i=h.configs.create(localStorage.getItem("printer").replace(/['"]+/g,""),{encoding:"IBM864"});return h.print(i,n).catch((function(t){console.error(t)}))}},{key:"showProducts",value:function(){this.isExpresesVisible=!0}},{key:"handleCancelisExpresesVisible",value:function(){this.isExpresesVisible=!1}}]),t}(),Ft.\u0275fac=function(t){return new(t||Ft)(s.Vb(Ct),s.Vb(Ot.a),s.Vb(c.e))},Ft.\u0275cmp=s.Pb({type:Ft,selectors:[["app-final-report"]],features:[s.Db([c.e])],decls:62,vars:36,consts:[[1,"container"],[1,"row"],[1,"col-md-6"],["data-format","Y-m-d","type","date",3,"change"],[2,"text-align","right"],[1,"fas","fa-print",3,"click"],[1,"row","totalsales"],[1,"col-md-12"],[1,"sumkitchen"],[3,"click"],["class","col-md-4 cateogrysales",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"col-md-4","cateogrysales"],[4,"ngIf"]],template:function(t,e){1&t&&(s.bc(0,"div",0),s.bc(1,"div",1),s.bc(2,"div",2),s.bc(3,"input",3),s.nc("change",(function(t){return e.ServiceChanged(t)})),s.ac(),s.ac(),s.bc(4,"div",2),s.bc(5,"li",4),s.bc(6,"i",5),s.nc("click",(function(){return e.printAllOrder("BIXOLON SRP-330")})),s.ac(),s.Rc(7," \u0637\u0628\u0627\u0639\u0647 \u0627\u0644\u0643\u0627\u0634\u064a\u0631 "),s.ac(),s.ac(),s.ac(),s.bc(8,"div",6),s.Wb(9,"div",7),s.bc(10,"table",7),s.bc(11,"tr"),s.bc(12,"th"),s.Rc(13,"\u0645\u0628\u064a\u0639\u0627\u062a"),s.ac(),s.bc(14,"th"),s.Rc(15),s.rc(16,"number"),s.ac(),s.ac(),s.bc(17,"tr",8),s.bc(18,"td"),s.Rc(19,"\u062e\u062f\u0645\u0629"),s.ac(),s.bc(20,"td"),s.Rc(21),s.rc(22,"number"),s.ac(),s.ac(),s.bc(23,"tr",8),s.bc(24,"td"),s.Rc(25,"\u0636\u0631\u064a\u0628\u0629"),s.ac(),s.bc(26,"td"),s.Rc(27),s.rc(28,"number"),s.ac(),s.ac(),s.bc(29,"tr",8),s.bc(30,"td"),s.Rc(31,"\u0645\u0628\u064a\u0639\u0627\u062a \u0627\u0644\u0645\u0637\u0628\u062e"),s.ac(),s.bc(32,"td"),s.Rc(33),s.rc(34,"number"),s.ac(),s.ac(),s.bc(35,"tr",8),s.bc(36,"td"),s.Rc(37,"\u0645\u0635\u0627\u0631\u064a\u0641 "),s.ac(),s.bc(38,"td"),s.Rc(39),s.rc(40,"number"),s.ac(),s.ac(),s.bc(41,"tr",8),s.bc(42,"td",9),s.nc("click",(function(){return e.showProducts()})),s.Rc(43,"\u0627\u0644\u0633\u0644\u0641"),s.ac(),s.bc(44,"td"),s.Rc(45),s.rc(46,"number"),s.ac(),s.ac(),s.bc(47,"tr",8),s.bc(48,"td"),s.Rc(49,"\u0627\u0644\u0635\u0627\u0641\u064a"),s.ac(),s.bc(50,"td"),s.Rc(51),s.rc(52,"number"),s.ac(),s.ac(),s.bc(53,"tr"),s.bc(54,"td"),s.Rc(55,"\u062e\u0635\u0648\u0645\u0627\u062a"),s.ac(),s.bc(56,"td"),s.Rc(57),s.rc(58,"number"),s.ac(),s.ac(),s.Pc(59,It,3,2,"tr",10),s.Pc(60,Mt,5,2,"tr",11),s.rc(61,"keyvalue"),s.ac(),s.ac(),s.ac()),2&t&&(s.Eb(15),s.Sc(s.tc(16,10,e.alltotal,"1.2-2")),s.Eb(6),s.Sc(s.tc(22,13,e.services,"1.2-2")),s.Eb(6),s.Sc(s.tc(28,16,e.taxes,"1.2-2")),s.Eb(6),s.Sc(s.tc(34,19,e.locationsSum(),"1.2-2")),s.Eb(6),s.Sc(s.tc(40,22,e.expenses,"1.2-2")),s.Eb(6),s.Sc(s.tc(46,25,e.staffpayments,"1.2-2")),s.Eb(6),s.Sc(s.tc(52,28,e.alltotal-e.expenses-e.staffpayments,"1.2-2")),s.Eb(6),s.Sc(s.tc(58,31,e.discount,"1.2-2")),s.Eb(2),s.yc("ngForOf",e.categories),s.Eb(1),s.yc("ngForOf",s.sc(61,34,e.maindata.offerdetailsarray)))},directives:[g.f,g.a,g.d,c.n,c.o],pipes:[c.f,c.i],styles:[".totalsales[_ngcontent-%COMP%]{background-color:#fff!important;height:500px;border-radius:10px;text-align:center;font-size:20px;padding-top:20px}.cateogrysales[_ngcontent-%COMP%]{border:1px solid #d3d3d3;background-color:salmon}.sumkitchen[_ngcontent-%COMP%]{background-color:#f4a460}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{border:1px solid #d3d3d3}"]}),Ft)},{path:"myorders",component:(Ht=function(){function t(e){_classCallCheck(this,t),this.service=e,this.addedorders=[],h.api.setSha256Type((function(t){return Object(f.sha256)(t)})),h.api.setPromiseType((function(t){return new Promise(t)})),h.websocket.connect().then((function(){return h.printers.find("HP LaserJet 2420")})).then((function(t){console.log(t,"lklkl")})).catch((function(t){console.error(t)}))}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.service.getMyOrderData().subscribe((function(e){t.addedorders=e.data,console.log(t.addedorders)}))}},{key:"printAllOrder",value:function(t){var e=[];this.addedorders[t].orderdetails.forEach((function(t){console.log(t),e.push(t.item.name+"         \x1ba0",+t.itemtotal+"       \x1ba0",+t.itemamount+"\n")}));var n=[{type:"raw",format:"image",data:"assets/images/62123932_340200260263485_2674160429353140224_n (2).png",options:{encoding:"IBM864",language:"ESCPOS",dotDensity:"double"}},"\x1b@","\x1ba1","\x1bE\r"," \u0637\u0644\u0628 \u0631\u0642\u0645   : "+this.addedorders[t].id+"\n","  \u0637\u0631\u0627\u0628\u064a\u0632\u0629 \u0631\u0642\u0645 : "+this.addedorders[t].table_id+"\n","\n","\n\x1ba2","\u0627\u0644\u0627\u0633\u0645                      \u0627\u0644\u0643\u0645\u064a\u0629     \u0627\u0644\u0633\u0639\u0631\n","\n","\n","------------------------------------------","\n",e.toString().replace(/,/g,""),"\n","\n","\x1ba0","\n","Taxes    "+Math.round(this.addedorders[t].service)+"\n","\n","DisCount    "+Math.round(this.addedorders[t].discount)+"%\n","\n","Service   "+Math.round(100*this.addedorders[t].taxes)/100+"\n","\n","Total   "+Math.round(100*this.addedorders[t].total)/100+"\n","\n","\n","\n","------------------------------------------","\n","\n","\n","\x1ba0","\n\n\n\n\n\x1bi","\x10\x14\x01\0\x05"];console.log("AppComponent____________");var i=h.configs.create(localStorage.getItem("printer").replace(/['"]+/g,""),{encoding:"IBM864"});return h.print(i,n).then((function(t){})).catch((function(t){alert("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0642\u0645 \u0628\u0639\u0645\u0644 \u0627\u0639\u0627\u062f\u0629 \u0644\u0628\u0631\u0646\u0627\u0645\u062c qz tray"),console.error(t)}))}}]),t}(),Ht.\u0275fac=function(t){return new(t||Ht)(s.Vb(b.a))},Ht.\u0275cmp=s.Pb({type:Ht,selectors:[["app-myorders"]],decls:23,vars:1,consts:[[1,"container"],[1,"section-background",2,"padding","20px","background-color","#e6eaed"],[1,"row"],[1,"table-responsive",2,"height","256px"],[1,"table","text-center"],[2,"background-color","#d8d8d8"],["style","background-color: #fff",4,"ngIf"],[2,"background-color","#fff"],["style","cursor: pointer; border-bottom: 1px solid #f5f7f8;",4,"ngFor","ngForOf"],[2,"cursor","pointer","border-bottom","1px solid #f5f7f8"],[4,"ngIf"],[1,"print-item"],[1,"btn","btn-warning",2,"border-radius","50%","margin-left","10px","height","35px","width","35px","text-align","center","padding","0",3,"click"],[1,"fas","fa-highlighter",2,"pointer-events","none"]],template:function(t,e){1&t&&(s.bc(0,"div",0),s.bc(1,"div",1),s.bc(2,"div",2),s.bc(3,"div",3),s.bc(4,"table",4),s.bc(5,"thead",5),s.bc(6,"tr"),s.bc(7,"th"),s.Rc(8,"\u0631\u0642\u0645 \u0627\u0644\u0637\u0644\u0628"),s.ac(),s.bc(9,"th"),s.Rc(10,"\u0633\u0639\u0631"),s.ac(),s.bc(11,"th"),s.Rc(12,"\u0646\u0648\u0639 \u0627\u0644\u0637\u0644\u0628"),s.ac(),s.bc(13,"th"),s.Rc(14,"\u0627\u0644\u062a\u0627\u0631\u064a\u062e \u0648\u0627\u0644\u0648\u0642\u062a"),s.ac(),s.bc(15,"th"),s.Rc(16,"\u0627\u0644\u0636\u0631\u064a\u0628\u0629"),s.ac(),s.bc(17,"th"),s.Rc(18,"\u0636\u0631\u064a\u0628\u0629 \u062e\u062f\u0645\u0629"),s.ac(),s.bc(19,"th"),s.Rc(20,"\u0637\u0628\u0627\u0639\u0629"),s.ac(),s.Wb(21,"th"),s.ac(),s.ac(),s.Pc(22,Tt,2,1,"tbody",6),s.ac(),s.ac(),s.ac(),s.ac(),s.ac()),2&t&&(s.Eb(22),s.yc("ngIf",e.addedorders))},directives:[g.e,g.f,g.a,g.d,c.o,g.c,c.n],pipes:[c.e],styles:[""]}),Ht)}]}],Bt=((Dt=function t(){_classCallCheck(this,t)}).\u0275mod=s.Tb({type:Dt}),Dt.\u0275inj=s.Sb({factory:function(t){return new(t||Dt)},imports:[[a.h.forChild(qt)],a.h]}),Dt),Nt=n("dEAy"),jt=n("0nng");n.d(e,"DashboardModule",(function(){return zt}));var Xt,zt=((Xt=function t(){_classCallCheck(this,t)}).\u0275mod=s.Tb({type:Xt}),Xt.\u0275inj=s.Sb({factory:function(t){return new(t||Xt)},imports:[[c.c,Nt.a,jt.a,Bt]]}),Xt)},bCcq:function bCcq(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__("PDX0"),ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});var createOutputMethod=function(t,e){return function(n){return new Sha256(e,!0).update(n)[t]()}},createMethod=function(t){var e=createOutputMethod("hex",t);NODE_JS&&(e=nodeWrap(e,t)),e.create=function(){return new Sha256(t)},e.update=function(t){return e.create().update(t)};for(var n=0;n<OUTPUT_TYPES.length;++n){var i=OUTPUT_TYPES[n];e[i]=createOutputMethod(i,t)}return e},nodeWrap=function nodeWrap(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(t){if("string"==typeof t)return crypto.createHash(algorithm).update(t,"utf8").digest("hex");if(null==t)throw new Error(ERROR);return t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(t)).digest("hex"):method(t)};return nodeMethod},createHmacOutputMethod=function(t,e){return function(n,i){return new HmacSha256(n,e,!0).update(i)[t]()}},createHmacMethod=function(t){var e=createHmacOutputMethod("hex",t);e.create=function(e){return new HmacSha256(e,t)},e.update=function(t,n){return e.create(t).update(n)};for(var n=0;n<OUTPUT_TYPES.length;++n){var i=OUTPUT_TYPES[n];e[i]=createHmacOutputMethod(i,t)}return e};function Sha256(t,e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}function HmacSha256(t,e,n){var i,o=typeof t;if("string"===o){var r,c=[],a=t.length,s=0;for(i=0;i<a;++i)(r=t.charCodeAt(i))<128?c[s++]=r:r<2048?(c[s++]=192|r>>6,c[s++]=128|63&r):r<55296||r>=57344?(c[s++]=224|r>>12,c[s++]=128|r>>6&63,c[s++]=128|63&r):(r=65536+((1023&r)<<10|1023&t.charCodeAt(++i)),c[s++]=240|r>>18,c[s++]=128|r>>12&63,c[s++]=128|r>>6&63,c[s++]=128|63&r);t=c}else{if("object"!==o)throw new Error(ERROR);if(null===t)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||ARRAY_BUFFER&&ArrayBuffer.isView(t)))throw new Error(ERROR)}t.length>64&&(t=new Sha256(e,!0).update(t).array());var l=[],d=[];for(i=0;i<64;++i){var u=t[i]||0;l[i]=92^u,d[i]=54^u}Sha256.call(this,e,n),this.update(d),this.oKeyPad=l,this.inner=!0,this.sharedMemory=n}Sha256.prototype.update=function(t){if(!this.finalized){var e,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(ERROR);if(null===t)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||ARRAY_BUFFER&&ArrayBuffer.isView(t)))throw new Error(ERROR);e=!0}for(var i,o,r=0,c=t.length,a=this.blocks;r<c;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)for(o=this.start;r<c&&o<64;++r)a[o>>2]|=t[r]<<SHIFT[3&o++];else for(o=this.start;r<c&&o<64;++r)(i=t.charCodeAt(r))<128?a[o>>2]|=i<<SHIFT[3&o++]:i<2048?(a[o>>2]|=(192|i>>6)<<SHIFT[3&o++],a[o>>2]|=(128|63&i)<<SHIFT[3&o++]):i<55296||i>=57344?(a[o>>2]|=(224|i>>12)<<SHIFT[3&o++],a[o>>2]|=(128|i>>6&63)<<SHIFT[3&o++],a[o>>2]|=(128|63&i)<<SHIFT[3&o++]):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++r)),a[o>>2]|=(240|i>>18)<<SHIFT[3&o++],a[o>>2]|=(128|i>>12&63)<<SHIFT[3&o++],a[o>>2]|=(128|i>>6&63)<<SHIFT[3&o++],a[o>>2]|=(128|63&i)<<SHIFT[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=a[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=EXTRA[3&e],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var t,e,n,i,o,r,c=this.h0,a=this.h1,s=this.h2,l=this.h3,d=this.h4,u=this.h5,p=this.h6,h=this.h7,f=this.blocks;for(t=16;t<64;++t)f[t]=f[t-16]+(((e=f[t-15])>>>7|e<<25)^(e>>>18|e<<14)^e>>>3)+f[t-7]+(((e=f[t-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)<<0;for(r=a&s,t=0;t<64;t+=4)this.first?(this.is224?(n=300032,h=(e=f[0]-1413257819)-150054599<<0,l=e+24177077<<0):(n=704751109,h=(e=f[0]-210244248)-1521486534<<0,l=e+143694565<<0),this.first=!1):(h=l+(e=h+((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&u^~d&p)+K[t]+f[t])<<0,l=e+(((c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10))+((n=c&a)^c&s^r))<<0),p=s+(e=p+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&d^~h&u)+K[t+1]+f[t+1])<<0,s=e+(((l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10))+((i=l&c)^l&a^n))<<0,u=a+(e=u+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&h^~p&d)+K[t+2]+f[t+2])<<0,a=e+(((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+((o=s&l)^s&c^i))<<0,d=c+(e=d+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&p^~u&h)+K[t+3]+f[t+3])<<0,c=e+(((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+((r=a&s)^a&l^o))<<0;this.h0=this.h0+c<<0,this.h1=this.h1+a<<0,this.h2=this.h2+s<<0,this.h3=this.h3+l<<0,this.h4=this.h4+d<<0,this.h5=this.h5+u<<0,this.h6=this.h6+p<<0,this.h7=this.h7+h<<0},Sha256.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,i=this.h3,o=this.h4,r=this.h5,c=this.h6,a=this.h7,s=HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[c>>28&15]+HEX_CHARS[c>>24&15]+HEX_CHARS[c>>20&15]+HEX_CHARS[c>>16&15]+HEX_CHARS[c>>12&15]+HEX_CHARS[c>>8&15]+HEX_CHARS[c>>4&15]+HEX_CHARS[15&c];return this.is224||(s+=HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]),s},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,i=this.h3,o=this.h4,r=this.h5,c=this.h6,a=this.h7,s=[t>>24&255,t>>16&255,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24&255,n>>16&255,n>>8&255,255&n,i>>24&255,i>>16&255,i>>8&255,255&i,o>>24&255,o>>16&255,o>>8&255,255&o,r>>24&255,r>>16&255,r>>8&255,255&r,c>>24&255,c>>16&255,c>>8&255,255&c];return this.is224||s.push(a>>24&255,a>>16&255,a>>8&255,255&a),s},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=(function(){return exports}).call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()},cDTu:function(t,e,n){"use strict";var i,o;void 0===(o="function"==typeof(i=function(){Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))}),void 0===String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(t){return this}});var t={VERSION:"2.1.3",DEBUG:!1,log:{trace:function(){t.DEBUG&&console.log.apply(console,arguments)},info:function(){console.info.apply(console,arguments)},warn:function(){console.warn.apply(console,arguments)},allay:function(){t.DEBUG&&console.warn.apply(console,arguments)},error:function(){console.error.apply(console,arguments)}},streams:{serial:"SERIAL",usb:"USB",hid:"HID",printer:"PRINTER",file:"FILE",socket:"SOCKET"},websocket:{connection:null,connectConfig:{host:["localhost","localhost.qz.io"],hostIndex:0,usingSecure:!0,protocol:{secure:"wss://",insecure:"ws://"},port:{secure:[8181,8282,8383,8484],insecure:[8182,8283,8384,8485],portIndex:0},keepAlive:60,retries:0,delay:0},setup:{findConnection:function(e,n,i){if(e.port.secure.length)e.port.insecure.length||e.usingSecure||(t.log.trace("No insecure ports specified - forcing secure connection"),e.usingSecure=!0);else{if(!e.port.insecure.length)return void i(new Error("No ports have been specified to connect over"));e.usingSecure&&(t.log.error("No secure ports specified - forcing insecure connection"),e.usingSecure=!1)}var o,r=function(){if(e.port.portIndex++,e.usingSecure&&e.port.portIndex>=e.port.secure.length||!e.usingSecure&&e.port.portIndex>=e.port.insecure.length){if(e.hostIndex>=e.host.length-1)return void i(new Error("Unable to establish connection with QZ"));e.hostIndex++,e.port.portIndex=0}t.websocket.setup.findConnection(e,n,i)};o=e.usingSecure?e.protocol.secure+e.host[e.hostIndex]+":"+e.port.secure[e.port.portIndex]:e.protocol.insecure+e.host[e.hostIndex]+":"+e.port.insecure[e.port.portIndex];try{t.log.trace("Attempting connection",o),t.websocket.connection=new t.tools.ws(o)}catch(c){return t.log.error(c),void r()}null!=t.websocket.connection?(t.websocket.connection.established=!1,t.websocket.connection.onopen=function(r){if(!t.websocket.connection.established&&(t.log.trace(r),t.log.info("Established connection with QZ Tray on "+o),t.websocket.setup.openConnection({resolve:n,reject:i}),e.keepAlive>0))var c=setInterval((function(){t.tools.isActive()?t.websocket.connection.send("ping"):clearInterval(c)}),1e3*e.keepAlive)},t.websocket.connection.onclose=function(){t.websocket.connection&&"undefined"!=typeof navigator&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&t.websocket.connection.onerror()},t.websocket.connection.onerror=function(e){t.log.trace(e),t.websocket.connection=null,r()}):i(new Error("Unable to create a websocket connection"))},openConnection:function(e){function n(n){void 0===n&&(n=null),i.api.getVersion().then((function(e){t.websocket.connection.version=e,t.websocket.connection.semver=e.toLowerCase().replace(/-rc\./g,"-rc").split(/[\\+\\.-]/g);for(var n=0;n<t.websocket.connection.semver.length;n++){try{if(3==n&&0==t.websocket.connection.semver[n].toLowerCase().indexOf("rc")){t.websocket.connection.semver[n]=-t.websocket.connection.semver[n].replace(/\D/g,"");continue}t.websocket.connection.semver[n]=parseInt(t.websocket.connection.semver[n])}catch(i){}t.websocket.connection.semver.length<4&&(t.websocket.connection.semver[3]=0)}t.compatible.algorithm(!0)})).then((function(){t.websocket.connection.sendData({certificate:n,promise:e})}))}t.websocket.connection.established=!0,t.websocket.connection.onclose=function(e){for(var n in t.log.trace(e),t.websocket.connection=null,t.websocket.callClose(e),t.log.info("Closed connection with QZ Tray"),t.websocket.pendingCalls)t.websocket.pendingCalls.hasOwnProperty(n)&&t.websocket.pendingCalls[n].reject(new Error("Connection closed before response received"));null!=this.promise&&this.promise.resolve()},t.websocket.connection.onerror=function(e){t.websocket.callError(e)},t.websocket.connection.sendData=function(e){t.log.trace("Preparing object for websocket",e),null==e.timestamp&&(e.timestamp=Date.now(),"number"!=typeof e.timestamp&&(e.timestamp=(new Date).getTime())),null!=e.promise&&(e.uid=t.websocket.setup.newUID(),t.websocket.pendingCalls[e.uid]=e.promise),e.signAlgorithm=t.security.signAlgorithm,e.position={x:"undefined"!=typeof screen?(screen.availWidth||screen.width)/2+(screen.left||screen.availLeft):0,y:"undefined"!=typeof screen?(screen.availHeight||screen.height)/2+(screen.top||screen.availTop):0};try{if(null!=e.call&&null==e.signature){var n=t.tools.hash(t.tools.stringify({call:e.call,params:e.params,timestamp:e.timestamp}));n.then||(n=t.tools.promise((function(t){t(n)}))),n.then((function(e){return t.security.callSign(e)})).then((function(n){t.log.trace("Signature for call",n),e.signature=n,t.signContent=void 0,t.websocket.connection.send(t.tools.stringify(e))}))}else t.log.trace("Signature for call",e.signature),t.websocket.connection.send(t.tools.stringify(e))}catch(i){t.log.error(i),null!=e.promise&&(e.promise.reject(i),delete t.websocket.pendingCalls[e.uid])}},t.websocket.connection.onmessage=function(e){var n=JSON.parse(e.data);if(null!=n.uid){t.log.trace("Received response from websocket",n);var i=t.websocket.pendingCalls[n.uid];null==i?t.log.allay("No promise found for returned response"):null!=n.error?i.reject(new Error(n.error)):i.resolve(n.result),delete t.websocket.pendingCalls[n.uid]}else if(null==n.type)t.websocket.connection.close(4003,"Connected to incompatible QZ Tray version");else switch(n.type){case t.streams.serial:n.event||(n.event=JSON.stringify({portName:n.key,output:n.data})),t.serial.callSerial(JSON.parse(n.event));break;case t.streams.socket:t.socket.callSocket(JSON.parse(n.event));break;case t.streams.usb:n.event||(n.event=JSON.stringify({vendorId:n.key[0],productId:n.key[1],output:n.data})),t.usb.callUsb(JSON.parse(n.event));break;case t.streams.hid:t.hid.callHid(JSON.parse(n.event));break;case t.streams.printer:t.printers.callPrinter(JSON.parse(n.event));break;case t.streams.file:t.file.callFile(JSON.parse(n.event));break;default:t.log.allay("Cannot determine stream type for callback",n)}},t.security.callCert().then(n).catch(n)},newUID:function(){return(new Array(7).join("0")+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)}},dataPromise:function(e,n,i,o){return t.tools.promise((function(r,c){t.websocket.connection.sendData({call:e,promise:{resolve:r,reject:c},params:n,signature:i,timestamp:o})}))},pendingCalls:{},errorCallbacks:[],callError:function(e){if(Array.isArray(t.websocket.errorCallbacks))for(var n=0;n<t.websocket.errorCallbacks.length;n++)t.websocket.errorCallbacks[n](e);else t.websocket.errorCallbacks(e)},closedCallbacks:[],callClose:function(e){if(Array.isArray(t.websocket.closedCallbacks))for(var n=0;n<t.websocket.closedCallbacks.length;n++)t.websocket.closedCallbacks[n](e);else t.websocket.closedCallbacks(e)}},printing:{defaultConfig:{bounds:null,colorType:"color",copies:1,density:0,duplex:!1,fallbackDensity:null,interpolation:"bicubic",jobName:null,legacy:!1,margins:0,orientation:null,paperThickness:null,printerTray:null,rasterize:!1,rotation:0,scaleContent:!0,size:null,units:"in",altPrinting:!1,encoding:null,spool:null}},serial:{serialCallbacks:[],callSerial:function(e){if(Array.isArray(t.serial.serialCallbacks))for(var n=0;n<t.serial.serialCallbacks.length;n++)t.serial.serialCallbacks[n](e);else t.serial.serialCallbacks(e)}},socket:{socketCallbacks:[],callSocket:function(e){if(Array.isArray(t.socket.socketCallbacks))for(var n=0;n<t.socket.socketCallbacks.length;n++)t.socket.socketCallbacks[n](e);else t.socket.socketCallbacks(e)}},usb:{usbCallbacks:[],callUsb:function(e){if(Array.isArray(t.usb.usbCallbacks))for(var n=0;n<t.usb.usbCallbacks.length;n++)t.usb.usbCallbacks[n](e);else t.usb.usbCallbacks(e)}},hid:{hidCallbacks:[],callHid:function(e){if(Array.isArray(t.hid.hidCallbacks))for(var n=0;n<t.hid.hidCallbacks.length;n++)t.hid.hidCallbacks[n](e);else t.hid.hidCallbacks(e)}},printers:{printerCallbacks:[],callPrinter:function(e){if(Array.isArray(t.printers.printerCallbacks))for(var n=0;n<t.printers.printerCallbacks.length;n++)t.printers.printerCallbacks[n](e);else t.printers.printerCallbacks(e)}},file:{fileCallbacks:[],callFile:function(e){if(Array.isArray(t.file.fileCallbacks))for(var n=0;n<t.file.fileCallbacks.length;n++)t.file.fileCallbacks[n](e);else t.file.fileCallbacks(e)}},security:{certHandler:function(t,e){e()},callCert:function(){return"function"==typeof t.security.certHandler.then||"AsyncFunction"===t.security.certHandler.constructor.name?t.security.certHandler():t.tools.promise(t.security.certHandler)},signatureFactory:function(){return function(t){t()}},callSign:function(e){return"function"==typeof t.security.signatureFactory.then||"AsyncFunction"===t.security.signatureFactory.constructor.name?t.security.signatureFactory(e):t.tools.promise(t.security.signatureFactory(e))},signAlgorithm:"SHA1"},tools:{promise:function(e){return"undefined"!=typeof RSVP?new RSVP.Promise(e):"undefined"!=typeof Promise?new Promise(e):void t.log.error("Promise/A+ support is required.  See qz.api.setPromiseType(...)")},stringify:function(t){var e=Array.prototype.toJSON;delete Array.prototype.toJSON;var n=JSON.stringify(t);return e&&(Array.prototype.toJSON=e),n},hash:function(e){return"undefined"!=typeof Sha256?Sha256.hash(e):t.SHA.hash(e)},ws:"undefined"!=typeof WebSocket?WebSocket:null,absolute:function(t){if("undefined"!=typeof window&&"function"==typeof document.createElement){var e=document.createElement("a");return e.href=t,e.href}return n(4).resolve(t),t},relative:function(e){for(var n=0;n<e.length;n++)if(e[n].constructor===Object){var i=!1;0===e[n].data.search(/data:image\/\w+;base64,/)?(e[n].flavor="base64",e[n].data=e[n].data.replace(/^data:image\/\w+;base64,/,"")):e[n].flavor?["FILE","XML"].indexOf(e[n].flavor.toUpperCase())>-1&&(i=!0):e[n].format&&["HTML","IMAGE","PDF","FILE","XML"].indexOf(e[n].format.toUpperCase())>-1?i=!0:e[n].type&&(["PIXEL","IMAGE","PDF"].indexOf(e[n].type.toUpperCase())>-1&&!e[n].format||["HTML","PDF"].indexOf(e[n].type.toUpperCase())>-1&&(!e[n].format||"FILE"===e[n].format.toUpperCase()))&&(i=!0),i&&(e[n].data=t.tools.absolute(e[n].data)),e[n].options&&"string"==typeof e[n].options.overlay&&(e[n].options.overlay=t.tools.absolute(e[n].options.overlay))}},extend:function(e){"object"!=typeof e&&(e={});for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var o in i)if(i.hasOwnProperty(o)){if(e===i[o])continue;var r;i[o]&&i[o].constructor&&i[o].constructor===Object?(r=Array.isArray(i[o])?e[o]||[]:e[o]||{},e[o]=t.tools.extend(r,i[o])):void 0!==i[o]&&(e[o]=i[o])}}return e},versionCompare:function(e,n,i,o){if(t.tools.assertActive()){var r=t.websocket.connection.semver;return r[0]!=e?r[0]-e:null!=n&&r[1]!=n?r[1]-n:null!=i&&r[2]!=i?r[2]-i:null!=o&&r.length>3&&r[3]!=o?Number.isInteger(r[3])&&Number.isInteger(o)?r[3]-o:r[3].toString().localeCompare(o.toString()):0}},isVersion:function(e,n,i,o){return 0==t.tools.versionCompare(e,n,i,o)},isActive:function(){return null!=t.websocket.connection&&t.websocket.connection.established},assertActive:function(){if(t.tools.isActive())return!0;throw new Error("A connection to QZ has not been established yet")}},compatible:{data:function(e){if(t.tools.isVersion(2,0)){t.log.trace("Converting print data to v2.0 for "+t.websocket.connection.version);for(var n=0;n<e.length;n++)e[n].constructor===Object&&(e[n].type&&"RAW"===e[n].type.toUpperCase()&&e[n].format&&"IMAGE"===e[n].format.toUpperCase()&&(e[n].flavor&&"BASE64"===e[n].flavor.toUpperCase()&&(e[n].data="data:image/compat;base64,"+e[n].data),e[n].flavor="IMAGE"),(e[n].type&&"RAW"===e[n].type.toUpperCase()||e[n].format&&"COMMAND"===e[n].format.toUpperCase())&&(e[n].format="RAW"),e[n].type=e[n].format,e[n].format=e[n].flavor,delete e[n].flavor)}},config:function(e,n){return t.tools.isVersion(2,0)&&(n.rasterize||(e.rasterize=!0)),t.tools.versionCompare(2,1,2,11)<0&&e.spool&&(e.spool.size&&(e.perSpool=e.spool.size,delete e.spool.size),e.spool.end&&(e.endOfDoc=e.spool.end,delete e.spool.end),delete e.spool),e},networking:function(e,n,i,o,r){return t.tools.isVersion(2,0)?t.tools.promise((function(c,a){t.websocket.dataPromise("websocket.getNetworkInfo",{hostname:e,port:n},i,o).then((function(t){c(void 0!==r?r(t):t)}),a)})):t.tools.promise((function(r,c){t.websocket.dataPromise("networking.device",{hostname:e,port:n},i,o).then((function(t){r({ipAddress:t.ip,macAddress:t.mac})}),c)}))},algorithm:function(e){return!t.tools.isActive()||!t.tools.isVersion(2,0)||(e||t.log.warn("Connected to an older version of QZ, alternate signature algorithms are not supported"),!1)}},SHA:{hash:function(e){e=e.utf8Encode()+String.fromCharCode(128);for(var n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],o=Math.ceil((e.length/4+2)/16),r=new Array(o),c=0;c<o;c++){r[c]=new Array(16);for(var a=0;a<16;a++)r[c][a]=e.charCodeAt(64*c+4*a)<<24|e.charCodeAt(64*c+4*a+1)<<16|e.charCodeAt(64*c+4*a+2)<<8|e.charCodeAt(64*c+4*a+3)}r[o-1][14]=8*(e.length-1)/Math.pow(2,32),r[o-1][14]=Math.floor(r[o-1][14]),r[o-1][15]=8*(e.length-1)&4294967295;var s,l,d,u,p,h,f,b,g=new Array(64);for(c=0;c<o;c++){for(var m=0;m<16;m++)g[m]=r[c][m];for(m=16;m<64;m++)g[m]=t.SHA._dev1(g[m-2])+g[m-7]+t.SHA._dev0(g[m-15])+g[m-16]&4294967295;for(s=i[0],l=i[1],d=i[2],u=i[3],p=i[4],h=i[5],f=i[6],b=i[7],m=0;m<64;m++){var v=b+t.SHA._sig1(p)+t.SHA._ch(p,h,f)+n[m]+g[m],y=t.SHA._sig0(s)+t.SHA._maj(s,l,d);b=f,f=h,h=p,p=u+v&4294967295,u=d,d=l,l=s,s=v+y&4294967295}i[0]=i[0]+s&4294967295,i[1]=i[1]+l&4294967295,i[2]=i[2]+d&4294967295,i[3]=i[3]+u&4294967295,i[4]=i[4]+p&4294967295,i[5]=i[5]+h&4294967295,i[6]=i[6]+f&4294967295,i[7]=i[7]+b&4294967295}return t.SHA._hexStr(i[0])+t.SHA._hexStr(i[1])+t.SHA._hexStr(i[2])+t.SHA._hexStr(i[3])+t.SHA._hexStr(i[4])+t.SHA._hexStr(i[5])+t.SHA._hexStr(i[6])+t.SHA._hexStr(i[7])},_rotr:function(t,e){return e>>>t|e<<32-t},_sig0:function(e){return t.SHA._rotr(2,e)^t.SHA._rotr(13,e)^t.SHA._rotr(22,e)},_sig1:function(e){return t.SHA._rotr(6,e)^t.SHA._rotr(11,e)^t.SHA._rotr(25,e)},_dev0:function(e){return t.SHA._rotr(7,e)^t.SHA._rotr(18,e)^e>>>3},_dev1:function(e){return t.SHA._rotr(17,e)^t.SHA._rotr(19,e)^e>>>10},_ch:function(t,e,n){return t&e^~t&n},_maj:function(t,e,n){return t&e^t&n^e&n},_hexStr:function(t){for(var e="",n=7;n>=0;n--)e+=(t>>>4*n&15).toString(16);return e}}};function e(e,n){this.config=t.tools.extend({},t.printing.defaultConfig),this._dirtyOpts={},this.setPrinter=function(e){"string"==typeof e&&(e={name:e}),e&&e.file&&0!=e.file.indexOf("\\\\")&&t.log.warn("Printing to file is deprecated.  See https://github.com/qzind/tray/issues/730"),this.printer=e},this.getPrinter=function(){return this.printer},this.reconfigure=function(e){for(var n in e)void 0!==e[n]&&(this._dirtyOpts[n]=!0);t.tools.extend(this.config,e)},this.getOptions=function(){return t.compatible.config(this.config,this._dirtyOpts)},this.setPrinter(e),this.reconfigure(n)}e.prototype.print=function(t,e,n){i.print(this,t,e,n)};var i={websocket:{isActive:function(){return t.tools.isActive()},connect:function(e){return t.tools.promise((function(n,i){if(t.tools.isActive())i(new Error("An open connection with QZ Tray already exists"));else if(null==t.websocket.connection)if(t.tools.ws)if(t.tools.ws.CLOSED&&2!=t.tools.ws.CLOSED){null==e&&(e={}),"undefined"!=typeof location&&"https:"===location.protocol||void 0===e.usingSecure&&(t.log.trace("Disabling secure ports due to insecure page"),e.usingSecure=!1),void 0===e.host||Array.isArray(e.host)||(e.host=[e.host]);!function o(r){var c=!1,a=function(){c||(c=!0,e&&r<e.retries?o(r+1):(t.websocket.connection=null,i.apply(null,arguments)))},s=function(){var i=t.tools.extend({},t.websocket.connectConfig,e);t.websocket.setup.findConnection(i,n,a)};0==r?s():setTimeout(s,1e3*e.delay)}(0)}else i(new Error("Unsupported WebSocket version detected: HyBi-00/Hixie-76"));else i(new Error("WebSocket not supported by this browser"));else i(new Error("The current connection attempt has not returned yet"))}))},disconnect:function(){return t.tools.promise((function(e,n){t.tools.isActive()?(t.websocket.connection.close(),t.websocket.connection.promise={resolve:e,reject:n}):n(new Error("No open connection with QZ Tray"))}))},setErrorCallbacks:function(e){t.websocket.errorCallbacks=e},setClosedCallbacks:function(e){t.websocket.closedCallbacks=e},getNetworkInfo:t.compatible.networking,getConnectionInfo:function(){if(t.tools.assertActive()){var e=t.websocket.connection.url.split(/[:\/]+/g);return{socket:e[0],host:e[1],port:+e[2]}}}},printers:{getDefault:function(e,n){return t.websocket.dataPromise("printers.getDefault",null,e,n)},find:function(e,n,i){return t.websocket.dataPromise("printers.find",{query:e},n,i)},details:function(){return t.websocket.dataPromise("printers.detail")},startListening:function(e){return Array.isArray(e)||(e=[e]),t.websocket.dataPromise("printers.startListening",{printerNames:e})},stopListening:function(){return t.websocket.dataPromise("printers.stopListening")},getStatus:function(){return t.websocket.dataPromise("printers.getStatus")},setPrinterCallbacks:function(e){t.printers.printerCallbacks=e}},configs:{setDefaults:function(e){t.tools.extend(t.printing.defaultConfig,e)},create:function(t,n){return new e(t,n)}},print:function(e,n){var i=!1,o=[],r=[];arguments.length>=3&&("boolean"==typeof arguments[2]?(i=arguments[2],arguments.length>=5&&(o=arguments[3],r=arguments[4])):arguments.length>=4&&(o=arguments[2],r=arguments[3]),o&&!Array.isArray(o)&&(o=[o]),r&&!Array.isArray(r)&&(r=[r])),Array.isArray(e)||(e=[e]),Array.isArray(n[0])||(n=[n]);for(var c=0;c<n.length;c++)t.tools.relative(n[c]),t.compatible.data(n[c]);for(var a=function(e){var n={printer:e.config.getPrinter(),options:e.config.getOptions(),data:e.data};return t.websocket.dataPromise("print",n,e.signature,e.timestamp)},s=[],l=0;l<e.length||l<n.length;l++)!function(t){var i={config:e[Math.min(t,e.length-1)],data:n[Math.min(t,n.length-1)],signature:o[t],timestamp:r[t]};s.push((function(){return a(i)}))}(l);var d=null;if(i){var u=[];d=function(t){u.push(t)},s.push((function(){return t.tools.promise((function(t,e){u.length?e(u):t()}))}))}var p=null;return s.reduce((function(t,e){return p=t.catch(d).then(e)}),t.tools.promise((function(t){t()}))),p},serial:{findPorts:function(){return t.websocket.dataPromise("serial.findPorts")},setSerialCallbacks:function(e){t.serial.serialCallbacks=e},openPort:function(e,n){return t.websocket.dataPromise("serial.openPort",{port:e,options:n})},sendData:function(e,n,i){return t.tools.versionCompare(2,1,0,12)>=0&&("object"!=typeof n&&(n={data:n,type:"PLAIN"}),n.type&&"FILE"==n.type.toUpperCase()&&(n.data=t.tools.absolute(n.data))),t.websocket.dataPromise("serial.sendData",{port:e,data:n,options:i})},closePort:function(e){return t.websocket.dataPromise("serial.closePort",{port:e})}},socket:{open:function(e,n,i){return t.websocket.dataPromise("socket.open",{host:e,port:n,options:i})},close:function(e,n){return t.websocket.dataPromise("socket.close",{host:e,port:n})},sendData:function(e,n,i){return"object"!=typeof i&&(i={data:i,type:"PLAIN"}),t.websocket.dataPromise("socket.sendData",{host:e,port:n,data:i})},setSocketCallbacks:function(e){t.socket.socketCallbacks=e}},usb:{listDevices:function(e){return t.websocket.dataPromise("usb.listDevices",{includeHubs:e})},listInterfaces:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("usb.listInterfaces",e)},listEndpoints:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],interface:arguments[2]}),t.websocket.dataPromise("usb.listEndpoints",e)},setUsbCallbacks:function(e){t.usb.usbCallbacks=e},claimDevice:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],interface:arguments[2]}),t.websocket.dataPromise("usb.claimDevice",e)},isClaimed:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("usb.isClaimed",e)},sendData:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],data:arguments[3]}),t.tools.versionCompare(2,1,0,12)>=0&&("object"!=typeof e.data&&(e.data={data:e.data,type:"PLAIN"}),e.data.type&&"FILE"==e.data.type.toUpperCase()&&(e.data.data=t.tools.absolute(e.data.data))),t.websocket.dataPromise("usb.sendData",e)},readData:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],responseSize:arguments[3]}),t.websocket.dataPromise("usb.readData",e)},openStream:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],responseSize:arguments[3],interval:arguments[4]}),t.websocket.dataPromise("usb.openStream",e)},closeStream:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2]}),t.websocket.dataPromise("usb.closeStream",e)},releaseDevice:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("usb.releaseDevice",e)}},hid:{listDevices:function(){return t.websocket.dataPromise("hid.listDevices")},startListening:function(){return t.websocket.dataPromise("hid.startListening")},stopListening:function(){return t.websocket.dataPromise("hid.stopListening")},setHidCallbacks:function(e){t.hid.hidCallbacks=e},claimDevice:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("hid.claimDevice",e)},isClaimed:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("hid.isClaimed",e)},sendData:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],data:arguments[2],endpoint:arguments[3]}),t.tools.versionCompare(2,1,0,12)>=0&&("object"!=typeof e.data&&(e.data={data:e.data,type:"PLAIN"}),e.data.type&&"FILE"==e.data.type.toUpperCase()&&(e.data.data=t.tools.absolute(e.data.data))),t.websocket.dataPromise("hid.sendData",e)},readData:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],responseSize:arguments[2]}),t.websocket.dataPromise("hid.readData",e)},sendFeatureReport:function(e){return t.websocket.dataPromise("hid.sendFeatureReport",e)},getFeatureReport:function(e){return t.websocket.dataPromise("hid.getFeatureReport",e)},openStream:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],responseSize:arguments[2],interval:arguments[3]}),t.websocket.dataPromise("hid.openStream",e)},closeStream:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("hid.closeStream",e)},releaseDevice:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("hid.releaseDevice",e)}},file:{list:function(e,n){var i=t.tools.extend({path:e},n);return t.websocket.dataPromise("file.list",i)},read:function(e,n){var i=t.tools.extend({path:e},n);return t.websocket.dataPromise("file.read",i)},write:function(e,n){var i=t.tools.extend({path:e},n);return t.websocket.dataPromise("file.write",i)},remove:function(e,n){var i=t.tools.extend({path:e},n);return t.websocket.dataPromise("file.remove",i)},startListening:function(e,n){n&&void 0!==n.include&&!Array.isArray(n.include)&&(n.include=[n.include]),n&&void 0!==n.exclude&&!Array.isArray(n.exclude)&&(n.exclude=[n.exclude]);var i=t.tools.extend({path:e},n);return t.websocket.dataPromise("file.startListening",i)},stopListening:function(e,n){var i=t.tools.extend({path:e},n);return t.websocket.dataPromise("file.stopListening",i)},setFileCallbacks:function(e){t.file.fileCallbacks=e}},networking:{device:function(e,n){return t.tools.isVersion(2,0)?t.compatible.networking(e,n,null,null,(function(t){return{ip:t.ipAddress,mac:t.macAddress}})):t.websocket.dataPromise("networking.device",{hostname:e,port:n})},devices:function(e,n){return t.tools.isVersion(2,0)?t.compatible.networking(e,n,null,null,(function(t){return[{ip:t.ipAddress,mac:t.macAddress}]})):t.websocket.dataPromise("networking.devices",{hostname:e,port:n})}},security:{setCertificatePromise:function(e){t.security.certHandler=e},setSignaturePromise:function(e){t.security.signatureFactory=e},setSignatureAlgorithm:function(e){t.compatible.algorithm()&&(["SHA1","SHA256","SHA512"].indexOf(e.toUpperCase())<0?t.log.error("Signing algorithm '"+e+"' is not supported."):t.security.signAlgorithm=e)},getSignatureAlgorithm:function(){return t.security.signAlgorithm}},api:{showDebug:function(e){return t.DEBUG=e},getVersion:function(){return t.websocket.dataPromise("getVersion")},isVersion:t.tools.isVersion,isVersionGreater:function(e,n,i,o){return t.tools.versionCompare(e,n,i,o)>0},isVersionLess:function(e,n,i,o){return t.tools.versionCompare(e,n,i,o)<0},setPromiseType:function(e){t.tools.promise=e},setSha256Type:function(e){t.tools.hash=e},setWebSocketType:function(e){t.tools.ws=e}},version:t.VERSION};return i}())?i.call(e,n,e,t):i)||(t.exports=o)}}]);