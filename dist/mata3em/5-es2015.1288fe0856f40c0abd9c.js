(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{4:function(t,e){},PDX0:function(t,e){(function(e){t.exports=e}).call(this,{})},XoyV:function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),o=n("tyNb"),c=n("fXoL"),r=n("6CRC");let a=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}signOut(){this.authService.logOut()}}return t.\u0275fac=function(e){return new(e||t)(c.Vb(r.a))},t.\u0275cmp=c.Pb({type:t,selectors:[["app-header"]],decls:6,vars:0,consts:[[1,"col-md-12","main-header"],["routerLink","/delivery",1,"nav-box"],[1,"container"],[1,"row","justify-content-between",2,"align-items","left"],[1,"col-md-12","logout",2,"align-items","left","line-height","normal","color","aliceblue",3,"click"]],template:function(t,e){1&t&&(c.bc(0,"div",0),c.bc(1,"div",1),c.bc(2,"div",2),c.bc(3,"div",3),c.bc(4,"div",4),c.nc("click",(function(){return e.signOut()})),c.Rc(5," \u062a\u0633\u062c\u064a\u0644 \u062e\u0631\u0648\u062c "),c.ac(),c.ac(),c.ac(),c.ac(),c.ac())},directives:[o.e],styles:[".main-header[_ngcontent-%COMP%]{padding:5px;background-color:#3e4651;height:70px;box-shadow:1px 1px 5px rgba(0,0,0,.5)}"]}),t})(),s=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Pb({type:t,selectors:[["app-sidebar"]],decls:34,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-3"],["routerLink","/tables",1,"nav-box","text-center"],[1,"row","justify-content-between",2,"align-items","center"],[1,"col-md-6"],["src","../../../../../assets/images/notepad (1)@2x.png","width","50px"],["routerLink","/delivery",1,"nav-box","text-center"],["src","../../../../../assets/images/delivery-guy.png","width","50px"],["routerLink","/report",1,"nav-box","text-center"],["src","../../../../../assets/images/invoice@2x.png","width","50px"],["routerLink","/myorders",1,"nav-box","text-center"]],template:function(t,e){1&t&&(c.bc(0,"div",0),c.bc(1,"div",1),c.bc(2,"div",2),c.bc(3,"div",3),c.bc(4,"div",0),c.bc(5,"div",4),c.bc(6,"div",5),c.Wb(7,"img",6),c.ac(),c.bc(8,"div",5),c.Rc(9," \u0637\u0644\u0628 \u0635\u0627\u0644\u0629 "),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(10,"div",2),c.bc(11,"div",7),c.bc(12,"div",0),c.bc(13,"div",4),c.bc(14,"div",5),c.Wb(15,"img",8),c.ac(),c.bc(16,"div",5),c.Rc(17," \u062f\u0644\u064a\u0641\u0631\u064a "),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(18,"div",2),c.bc(19,"div",9),c.bc(20,"div",0),c.bc(21,"div",4),c.bc(22,"div",5),c.Wb(23,"img",10),c.ac(),c.bc(24,"div",5),c.Rc(25," \u0627\u0644\u0635\u0646\u062f\u0648\u0642 "),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(26,"div",2),c.bc(27,"div",11),c.bc(28,"div",0),c.bc(29,"div",4),c.bc(30,"div",5),c.Wb(31,"img",6),c.ac(),c.bc(32,"div",5),c.Rc(33," \u0637\u0644\u0628\u0627\u062a \u0627\u0644\u064a\u0648\u0645 "),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac())},directives:[o.e],styles:[".nav-box[_ngcontent-%COMP%]{background-color:#fff;padding:25px;border-radius:5px;font-size:18px;font-weight:700;color:#3e4651;cursor:pointer;height:130px;margin-bottom:10px;transition:all .3s ease-out}.nav-box[_ngcontent-%COMP%]:hover{box-shadow:1px 1px 5px rgba(0,0,0,.5)}"]}),t})(),l=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Pb({type:t,selectors:[["app-body"]],decls:9,vars:0,consts:[[1,"container"],[1,"row"],[1,"main-nav"]],template:function(t,e){1&t&&(c.Wb(0,"app-header"),c.bc(1,"div",0),c.bc(2,"div",1),c.bc(3,"nav",2),c.Wb(4,"app-sidebar"),c.ac(),c.ac(),c.ac(),c.bc(5,"div",0),c.bc(6,"div",1),c.bc(7,"div",0),c.Wb(8,"router-outlet"),c.ac(),c.ac(),c.ac())},directives:[a,s,o.i],styles:[".main-nav[_ngcontent-%COMP%]{width:100%;margin-top:80px;margin-bottom:40px}"]}),t})();var d=n("cDTu"),u=n("bCcq"),h=n("sSVM"),p=n("rMZv");function b(t,e){if(1&t&&(c.bc(0,"option",34),c.Rc(1),c.ac()),2&t){const t=e.$implicit;c.yc("value",t.id),c.Eb(1),c.Sc(t.name)}}function g(t,e){1&t&&(c.bc(0,"th"),c.Rc(1,"\u0636\u0631\u064a\u0628\u0629 \u062e\u062f\u0645\u0629"),c.ac())}function f(t,e){if(1&t&&(c.bc(0,"td"),c.Rc(1),c.ac()),2&t){const t=c.qc().$implicit;c.Eb(1),c.Tc("",t.tax.service," %")}}function m(t,e){if(1&t){const t=c.cc();c.bc(0,"tr",37),c.bc(1,"div",38),c.bc(2,"td"),c.Rc(3),c.ac(),c.bc(4,"td"),c.Rc(5),c.ac(),c.bc(6,"td"),c.Wb(7,"input",39),c.ac(),c.ac(),c.bc(8,"td",40),c.Rc(9),c.ac(),c.bc(10,"td"),c.Rc(11),c.ac(),c.bc(12,"td",40),c.bc(13,"input",41),c.nc("change",(function(n){c.Ic(t);const i=e.index;return c.qc(2).updateItems(n,i)})),c.ac(),c.ac(),c.bc(14,"td"),c.Rc(15),c.ac(),c.Pc(16,f,2,1,"td",19),c.bc(17,"td"),c.bc(18,"button",42),c.nc("click",(function(n){c.Ic(t);const i=e.$implicit;return c.qc(2).highlighted(n,i)})),c.Wb(19,"i",43),c.ac(),c.bc(20,"button",44),c.nc("click",(function(n){c.Ic(t);const i=e.index;return c.qc(2).removeRow(n,i)})),c.Wb(21,"i",45),c.ac(),c.ac(),c.ac()}if(2&t){const t=e.$implicit,n=c.qc(2);c.Eb(3),c.Sc(t.name),c.Eb(2),c.Tc("",t.price," \u062c.\u0645"),c.Eb(4),c.Sc(t.name),c.Eb(2),c.Tc("",t.price," \u062c.\u0645"),c.Eb(2),c.zc("value",t.totalamount),c.Eb(2),c.Tc("",t.tax.percentage," %"),c.Eb(1),c.yc("ngIf",n.serviceTax>-1)}}function y(t,e){if(1&t&&(c.bc(0,"tbody",35),c.Pc(1,m,22,7,"tr",36),c.ac()),2&t){const t=c.qc();c.Eb(1),c.yc("ngForOf",t.addItems)}}function v(t,e){if(1&t&&(c.bc(0,"div",46),c.bc(1,"div",47),c.bc(2,"label",48),c.Rc(3," \u0636\u0631\u064a\u0628\u0629 \u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u0636\u0627\u0641\u0629"),c.ac(),c.Wb(4,"input",49),c.rc(5,"number"),c.ac(),c.ac()),2&t){const t=c.qc();c.Eb(4),c.zc("value",c.tc(5,1,t.VAT,"1.2-2"))}}function _(t,e){if(1&t&&(c.bc(0,"div",46),c.bc(1,"div",47),c.bc(2,"label",50),c.Rc(3," \u0636\u0631\u064a\u0628\u0629 \u062e\u062f\u0645\u0629"),c.ac(),c.Wb(4,"input",51),c.rc(5,"number"),c.ac(),c.ac()),2&t){const t=c.qc();c.Eb(4),c.zc("value",c.tc(5,1,t.serviceTax,"1.2-2"))}}function x(t,e){if(1&t&&(c.bc(0,"div",46),c.bc(1,"div",47),c.bc(2,"label",52),c.Rc(3,"\u0645\u0628\u0644\u063a \u0627\u062c\u0645\u0627\u0644\u064a"),c.ac(),c.Wb(4,"input",53),c.rc(5,"number"),c.ac(),c.ac()),2&t){const t=c.qc();c.Eb(4),c.zc("value",c.tc(5,1,t.itemPrice,"1.2-2"))}}function P(t,e){if(1&t&&(c.bc(0,"div",46),c.bc(1,"div",47),c.bc(2,"label",54),c.Rc(3,"\u0627\u0644\u0645\u062c\u0645\u0648\u0639"),c.ac(),c.Wb(4,"input",55),c.rc(5,"number"),c.ac(),c.ac()),2&t){const t=c.qc();c.Eb(4),c.zc("value",c.tc(5,1,t.itemTotal,"1.2-2"))}}function C(t,e){if(1&t){const t=c.cc();c.bc(0,"div",56),c.bc(1,"div",11),c.bc(2,"button",57),c.nc("click",(function(){return c.Ic(t),c.qc().addOrder()})),c.Rc(3," \u0627\u0636\u0627\u0641\u0629 \u0637\u0644\u0628 "),c.ac(),c.ac(),c.ac()}}function k(t,e){if(1&t){const t=c.cc();c.bc(0,"li",58),c.nc("click",(function(){c.Ic(t);const n=e.$implicit;return c.qc().clicked=n}))("click",(function(){c.Ic(t);const n=e.index;return c.qc().getItemsByCategory(n)})),c.Rc(1),c.ac()}if(2&t){const t=e.$implicit,n=c.qc();c.Lb("active",n.clicked===t),c.zc("id",t.id),c.Eb(1),c.Tc(" ",t.name," ")}}function O(t,e){if(1&t){const t=c.cc();c.bc(0,"li",63),c.nc("click",(function(n){c.Ic(t);const i=e.index,o=c.qc().index;return c.qc(2).PutItemForSell(n,i,o)})),c.Wb(1,"img",64),c.Rc(2),c.ac()}if(2&t){const t=e.$implicit;c.zc("id",t.id),c.Eb(2),c.Tc(" ",t.name," ")}}function S(t,e){if(1&t&&(c.bc(0,"ul",5),c.bc(1,"li",61),c.Rc(2),c.ac(),c.Pc(3,O,3,2,"li",62),c.ac()),2&t){const t=e.$implicit;c.Eb(2),c.Sc(t.subcategory.name),c.Eb(1),c.yc("ngForOf",t.subcategory.items)}}function w(t,e){if(1&t&&(c.bc(0,"div",59),c.Pc(1,S,4,2,"ul",60),c.ac()),2&t){const t=c.qc();c.Eb(1),c.yc("ngForOf",t.offeritems)}}function I(t,e){if(1&t){const t=c.cc();c.bc(0,"li",66),c.nc("click",(function(n){c.Ic(t);const i=e.index;return c.qc(2).getItems(n,i)})),c.Wb(1,"img",64),c.Rc(2),c.ac()}if(2&t){const t=e.$implicit;c.zc("id",t.id),c.Eb(2),c.Tc(" ",t.name," ")}}function M(t,e){if(1&t&&(c.bc(0,"ul",5),c.Pc(1,I,3,2,"li",65),c.ac()),2&t){const t=c.qc();c.Eb(1),c.yc("ngForOf",t.subs[0])}}function A(t,e){if(1&t){const t=c.cc();c.bc(0,"li",63),c.nc("click",(function(n){c.Ic(t);const i=e.index;return c.qc(2).PutItemForSell(n,i,0)})),c.Wb(1,"img",64),c.Rc(2),c.ac()}if(2&t){const t=e.$implicit;c.zc("id",t.id),c.Eb(2),c.Tc(" ",t.name," ")}}function E(t,e){if(1&t&&(c.bc(0,"ul",5),c.Pc(1,A,3,2,"li",62),c.ac()),2&t){const t=c.qc();c.Eb(1),c.yc("ngForOf",t.items)}}let R=(()=>{class t{constructor(t,e,n,i){this.route=t,this.service=e,this.datePipe=n,this.router=i,this.isReadyToShow=!1,this.categories=[],this.items=[],this.subs=[],this.offeritems=[],this.addItems=[],this.tblItems=[],this.itemTax=0,this.itemPrice=0,this.itemTotal=0,this.VAT=0,this.serviceTax=0,this.addedItemsForPrint=[],this.discount=0,this.isearchByName=0,d.api.setSha256Type(t=>Object(u.sha256)(t)),d.api.setPromiseType(t=>new Promise(t)),d.websocket.connect().then((function(){return d.printers.find("HP LaserJet 2420")})).then((function(t){console.log(t,"lklkl")})).catch((function(t){console.error(t)})),this.route.paramMap.subscribe(t=>{this.table_id=t.get("table_id"),this.order_id=t.get("order_id"),this.check=t.get("check")})}ngOnInit(){this.service.getMarketersAndPaymentway().subscribe(t=>{console.log(t),this.marketers=t.marketers,this.paymentways=t.paymentsways,this.selectedPaymentways=t.paymentsways[0].id,this.selectedMarketer=t.marketers[0].id}),this.service.getCategoriesData().subscribe(t=>{this.categories.push(t.data)}),1==this.check&&this.service.checkOrderCompletesById(this.order_id).subscribe(t=>{for(let e=0;e<=t.query[0].orderdetails.length-1;e++)this.addItems.push(t.query[0].orderdetails[e].item),this.itemTax=this.addItems[e].tax.percentage,this.addItems[e].totalamount=t.query[0].orderdetails[e].itemamount,0==t.query[0].orderdetails[e].itemtotal?this.addItems[e].price=0:(this.itemPrice+=t.query[0].orderdetails[e].itemtotal,this.addItems[e].tax.percentage>0&&(console.log(this.addItems[e]),this.VAT+=Math.round(t.query[0].orderdetails[e].itemtotal*this.itemTax/100*100)/100),this.addItems[e].tax.service>0&&(console.log(this.addItems[e]),this.serviceTax+=Math.round(t.query[0].orderdetails[e].itemtotal*this.addItems[e].tax.service/100*100)/100));this.itemTotal=Math.round(100*(this.itemPrice+this.VAT+this.serviceTax))/100})}getItemsByCategory(t){console.log(t),this.offer=2==t?1:0;let e=this.categories[0][t].subcategories;this.offeritems=[],this.items=[],this.subs=[],this.subs.push(e),console.log(this.categories)}searchItem(t){console.log(t),this.isearchByName=1,this.service.searchItems({id:t.value,offer:this.offer}).subscribe(t=>{console.log(t.data),this.subs=[],this.offeritems=[],this.items=t.data})}getItems(t,e){console.log(t.target.getAttribute("id")),this.service.getItems(t).subscribe(t=>{this.subs=[],this.items=[],console.log(t.data),this.items=t.data})}getoffersitems(t,e){this.service.getoffersitems(t).subscribe(t=>{this.subs=[],this.items=[],console.log(t.data),this.offeritems=t.data;for(let e=0;e<=this.offeritems.length-1;e++)for(let t=0;t<=this.offeritems[e].subcategory.items.length-1;t++)console.log(this.offeritems[e].subcategory.items[t]),this.items.push(this.offeritems[e].subcategory.items[t]);this.offer=0})}PutItemForSell(t,e,n){0==this.offer?(this.offeritems.length>0?(console.log(this.offeritems[n]),this.addItems.push(this.offeritems[n].subcategory.items[e])):this.addItems.push(this.items[e]),this.addItems[this.addItems.length-1].totalamount=1,this.itemTax=this.items[e].tax.percentage,this.itemPrice+=Math.round(100*this.items[e].price)/100,this.itemTax>0&&(this.VAT=Math.round(this.itemPrice*this.itemTax/100*100)/100),1!=this.delivry&&this.items[e].tax.service>0&&(this.serviceTax=Math.round(this.itemPrice*this.items[e].tax.service/100*100)/100),this.itemTotal=Math.round(100*(this.itemPrice+this.VAT+this.serviceTax))/100):(this.addItems.push(this.items[e]),this.addItems[this.addItems.length-1].totalamount=1,this.itemTax=this.items[e].tax.percentage,this.itemPrice+=Math.round(100*this.items[e].price)/100,this.itemTax>0&&(this.VAT=Math.round(this.itemPrice*this.itemTax/100*100)/100),1!=this.delivry&&this.items[e].tax.service>0&&(this.serviceTax=Math.round(this.itemPrice*this.items[e].tax.service/100*100)/100),this.itemTotal=Math.round(100*(this.itemPrice+this.VAT+this.serviceTax))/100,0==this.isearchByName&&(this.items=[],this.getoffersitems(t,e)))}updateItems(t,e){let n=e,i=t.target.value;t.target.getAttribute("value"),this.itemPrice-=Math.round(this.addItems[n].price*this.addItems[n].totalamount*100)/100,this.itemPrice+=Math.round(this.addItems[n].price*i*100)/100,this.addedItemsForPrint.length>0&&(this.addedItemsForPrint[n].totalamount=i),this.addItems[n].totalamount=i,console.log(this.addItems),this.addItems[n].tax.percentage>0&&(this.VAT=100*Math.round(this.itemPrice*this.addItems[n].tax.percentage/100)/100),1!=this.delivry&&this.addItems[n].tax.service>0&&(this.serviceTax=100*Math.round(this.itemPrice*this.addItems[n].tax.service/100)/100),this.itemTotal=Math.round(100*(this.itemPrice+this.VAT+this.serviceTax))/100}removeRow(t,e){let n=e;console.log(this.addItems[n]),this.addItems[n].price>0&&(this.itemPrice-=Math.round(this.addItems[n].price*this.addItems[n].totalamount*100)/100,this.addItems[n].tax.percentage>0&&(this.VAT-=this.addItems[n].price*this.addItems[n].tax.percentage*this.addItems[n].totalamount/100),1!=this.delivry&&this.addItems[n].tax.service>0&&(console.log(this.addItems[n].price),this.serviceTax-=100*Math.round(this.addItems[n].price*this.addItems[n].tax.service*this.addItems[n].totalamount/100)/100),console.log(this.serviceTax),this.itemTotal=Math.round(100*(this.itemPrice+this.VAT+this.serviceTax))/100),this.addedItemsForPrint=this.arrayRemove(this.addedItemsForPrint,this.addItems[n].index),this.addItems.splice(n,1)}highlighted(t,e){t.target.parentNode.parentNode.classList.toggle("highlighted"),t.target.parentNode.parentNode.classList.contains("highlighted")?(this.addedItemsForPrint.push(e),this.addedItemsForPrint[this.addedItemsForPrint.length-1].index=this.makeid(7),console.log("added")):(console.log("deleted"),console.log(e.index),this.addedItemsForPrint=this.arrayRemove(this.addedItemsForPrint,e.index)),console.log(this.addedItemsForPrint)}makeid(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=n.length,o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*i));return e}arrayRemove(t,e){return t.filter((function(t){return t.index!=e}))}addOrder(){var t=this,e={total:this.itemTotal,service:this.serviceTax,taxes:this.VAT,discount:this.discount,branch_id:localStorage.getItem("branch"),marketer_id:this.selectedMarketer,paymenttype_id:this.selectedPaymentways,platform_id:1};console.log(e),console.log(this.order_id),this.service.EditOrder(e,this.order_id).subscribe(e=>{if(1==e.success){var n=[];this.addItems.forEach((function(t){console.log(t.name),n.push(t.name+"         \x1ba0",+t.price*t.totalamount+"       \x1ba0",+t.totalamount+"\n")}));var i=this.datePipe.transform(new Date,"yyyy-MM-dd hh:mm"),o=[{type:"raw",format:"image",data:"assets/images/62123932_340200260263485_2674160429353140224_n (2).png",options:{encoding:"IBM864",language:"ESCPOS",dotDensity:"double"}},"\x1b@","\x1ba1","\x1bE\r"," \u0637\u0644\u0628 \u0631\u0642\u0645   : "+this.order_id+"\n","  \u0637\u0631\u0627\u0628\u064a\u0632\u0629 \u0631\u0642\u0645 : "+this.table_id+"\n","\n",i+"\n","\n\x1ba2","\u0627\u0644\u0627\u0633\u0645                      \u0627\u0644\u0643\u0645\u064a\u0629     \u0627\u0644\u0633\u0639\u0631\n","\n","\n","------------------------------------------","\n",n.toString().replace(/,/g,""),"\n","\n","\x1ba0","SubTotal   "+Math.round(100*this.itemPrice)/100+"\n","\n","\n","DisCount    "+Math.round(100*this.discount)/100+"\n","\n","Service   "+Math.round(100*this.serviceTax)/100+"\n","\n","Taxes   "+Math.round(100*this.VAT)/100+"\n","\n","Total   "+Math.round(100*this.itemTotal)/100+"\n","\n","\n","\n","------------------------------------------","\n","\n","\n","\x1ba0","\n\n\n\n\n\x1bi","\x10\x14\x01\0\x05"];this.printers=[],console.log("AppComponent____________");const e=d.configs.create(localStorage.getItem("printer").replace(/['"]+/g,""),{encoding:"IBM864"});return d.print(e,o).then((function(e){t.router.navigate(["/tables"])})).catch((function(t){alert("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0642\u0645 \u0628\u0639\u0645\u0644 \u0627\u0639\u0627\u062f\u0629 \u0644\u0628\u0631\u0646\u0627\u0645\u062c qz tray"),console.error(t)}))}})}AddOrderForKitchen(){if(confirm("\u062a\u0627\u0643\u064a\u062f \u0627\u0644\u0637\u0628\u0627\u0639\u0647")){var t=[];for(let e=0;e<=this.addedItemsForPrint.length-1;e++){let n="quantity-"+e;localStorage.getItem(n)&&parseInt(localStorage.getItem(n)),t.push({itemamount:this.addedItemsForPrint[e].totalamount,itemtotal:this.addedItemsForPrint[e].price*this.addedItemsForPrint[e].totalamount,item_id:this.addedItemsForPrint[e].id,order_id:parseInt(this.order_id)})}this.service.adddetailsOrder(t).subscribe(t=>{if(0!=t.id){null==this.table_id&&(this.table_id="T.K");var e=[];this.addedItemsForPrint.forEach((function(t){console.log(t.name),e.push(t.name+"         \x1ba0",+t.price*t.totalamount+"       \x1ba0",+t.totalamount+"\n")}));var n=this.datePipe.transform(new Date,"yyyy-MM-dd hh:mm"),i=[{type:"raw",format:"image",data:"assets/images/Screen Shot 2019-10-21 at 12.35.58 AM.png",options:{encoding:"IBM864",language:"ESCPOS",dotDensity:"double"}},"\x1b@","\x1ba1","\x1bE\r","\u0637\u0644\u0628 \u0631\u0642\u0645   : "+this.order_id+"\n","\n","  \u0637\u0631\u0627\u0628\u064a\u0632\u0629 \u0631\u0642\u0645 : "+this.table_id+"\n","\n",n+"\n","\n\n\x1ba2","\u0627\u0644\u0627\u0633\u0645                      \u0627\u0644\u0643\u0645\u064a\u0629     \u0627\u0644\u0633\u0639\u0631\n","\n","\n","------------------------------------------","\n",e.toString().replace(/,/g,""),"\n","\n","\x1ba0","------------------------------------------","\n","\n","\n","\x1ba0","\n\n\n","\x1bi","\x10\x14\x01\0\x05"];this.printers=[],console.log("AppComponent____________"),console.log(localStorage.getItem("printer").replace(/['"]+/g,""));const t=d.configs.create(localStorage.getItem("printer").replace(/['"]+/g,""),{encoding:"IBM864"});return d.print(t,i).then((function(t){})).catch((function(t){alert("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0642\u0645 \u0628\u0639\u0645\u0644 \u0627\u0639\u0627\u062f\u0629 \u0644\u0628\u0631\u0646\u0627\u0645\u062c qz tray"),console.error(t)}))}alert("\u0644\u0645 \u064a\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0637\u0644\u0628")})}}CompleteOrder(){var t=[];for(let e=0;e<=this.addedItemsForPrint.length-1;e++){let n="quantity-"+e;localStorage.getItem(n)&&parseInt(localStorage.getItem(n)),t.push({itemamount:this.addedItemsForPrint[e].totalamount,itemtotal:this.addedItemsForPrint[e].price*this.addedItemsForPrint[e].totalamount,item_id:this.addedItemsForPrint[e].id,order_id:this.order_id,marketer_id:this.selectedMarketer,paymenttype_id:this.selectedPaymentways,platform_id:1})}this.service.addOrder(t).subscribe(t=>{console.log(t),this.addedItemsForPrint=[]})}print(t){this.AddOrderForKitchen()}printAllOrder(t){this.addOrder()}MakeDiscount(t){var e=t.target.value;this.itemPrice<this.lastitemPrice?(this.itemPrice=this.lastitemPrice,this.VAT=this.lastVAT,this.serviceTax=this.lastserviceTax):(this.lastitemPrice=this.itemPrice,this.lastVAT=this.VAT,this.lastserviceTax=this.serviceTax),this.itemPrice-=this.itemPrice*e/100,this.VAT-=this.VAT*e/100,this.serviceTax-=this.serviceTax*e/100,this.itemTotal=Math.round(100*(this.itemPrice+this.VAT+this.serviceTax))/100,this.discount=this.itemTotal*t.target.value/100,console.log(this.discount)}selectedPaymentway(t){this.selectedPaymentways=t}selectedMarketers(t){this.selectedMarketer=t}}return t.\u0275fac=function(e){return new(e||t)(c.Vb(o.a),c.Vb(h.a),c.Vb(i.e),c.Vb(o.d))},t.\u0275cmp=c.Pb({type:t,selectors:[["app-orders"]],features:[c.Db([i.e])],decls:64,vars:12,consts:[[1,"order-background",2,"background-color","#fff","border-radius","5px"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"print-options"],[1,"list-unstyled","text-right"],[1,"fas","fa-print",3,"click"],[1,"fas","fa-print"],["type","number","min","1",2,"width","70px","margin","auto","text-align","center","background-color","#d8d8d8",3,"change"],[1,"row","orderoptions"],[1,"col-md-4"],[1,"form-group"],["for","country_id"],["id","country_id","name","country_id","required","","country_id","",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"section-background",2,"padding","20px","background-color","#e6eaed"],[1,"table-responsive",2,"height","256px"],[1,"table","text-center"],[2,"background-color","#d8d8d8"],[4,"ngIf"],["style","background-color: #fff",4,"ngIf"],["class","col-md-3",4,"ngIf"],["class","col-md-4 text-right",4,"ngIf"],[1,"container",2,"margin-top","20px"],[1,"col-md-8"],["min","1",2,"width","180px","margin","auto","text-align","center","background-color","#ffffff",3,"keyup"],["search",""],[1,"categories"],[1,"list-unstyled","text-right","categories"],[3,"active","id","click",4,"ngFor","ngForOf"],[1,"items"],["class","offercontainer",4,"ngIf"],["class","list-unstyled text-right",4,"ngIf"],[2,"margin","20px 0","background-color","#5c9d15","color","#fff","padding","5px","width","150px","border","none","border-radius","5px"],[3,"value"],[2,"background-color","#fff"],["style","cursor: pointer; border-bottom: 1px solid #f5f7f8;","class","rowparents",4,"ngFor","ngForOf"],[1,"rowparents",2,"cursor","pointer","border-bottom","1px solid #f5f7f8"],[1,"print-items","d-none"],["type","number","value","1"],[1,"print-item"],["type","number","min","1",1,"form-control",2,"width","70px","margin","auto","text-align","center","background-color","#d8d8d8",3,"value","change"],[1,"btn","btn-warning",2,"border-radius","50%","margin-left","10px","height","35px","width","35px","text-align","center","padding","0",3,"click"],[1,"fas","fa-highlighter",2,"pointer-events","none"],[1,"btn","btn-danger",2,"border-radius","50%","height","35px","width","35px","text-align","center","padding","0",3,"click"],[1,"fas","fa-times"],[1,"col-md-3"],[1,"form-group","text-right"],["for","tax",2,"font-weight","bold"],["id","tax","type","text","disabled","",1,"form-control",3,"value"],["for","serviceTax",2,"font-weight","bold"],["id","serviceTax","type","text","disabled","",1,"form-control",3,"value"],["for","price",2,"font-weight","bold"],["id","price","type","text","disabled","",1,"form-control",3,"value"],["for","total",2,"font-weight","bold"],["id","total","type","text","disabled","",1,"form-control",3,"value"],[1,"col-md-4","text-right"],[1,"btn","btn-primary",3,"click"],[3,"id","click"],[1,"offercontainer"],["class","list-unstyled text-right",4,"ngFor","ngForOf"],[1,"headforoffer"],["data-sub","false",3,"id","click",4,"ngFor","ngForOf"],["data-sub","false",3,"id","click"],["src","http://wokhouse.codesroots.com/img/logo.png",2,"width","100%","height","100%","display","block","border-radius","5px","pointer-events","none"],["data-sub","true",3,"id","click",4,"ngFor","ngForOf"],["data-sub","true",3,"id","click"]],template:function(t,e){if(1&t){const t=c.cc();c.bc(0,"div",0),c.bc(1,"div",1),c.bc(2,"div",2),c.bc(3,"div",3),c.bc(4,"div",4),c.bc(5,"ul",5),c.bc(6,"i",6),c.nc("click",(function(){return e.print("BIXOLON SRP-330")})),c.ac(),c.Rc(7," \u0637\u0628\u0627\u0639\u0647 \u0627\u0644\u0645\u0637\u0628\u062e "),c.bc(8,"li"),c.bc(9,"i",6),c.nc("click",(function(){return e.printAllOrder("BIXOLON SRP-330")})),c.ac(),c.Rc(10," \u0637\u0628\u0627\u0639\u0647 \u0627\u0644\u0643\u0627\u0634\u064a\u0631 "),c.ac(),c.Wb(11,"i",7),c.Rc(12," \u062e\u0635\u0645 "),c.bc(13,"input",8),c.nc("change",(function(t){return e.MakeDiscount(t)})),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(14,"div",9),c.bc(15,"div",10),c.bc(16,"div",11),c.bc(17,"label",12),c.Rc(18,"\u0648\u0633\u064a\u0644\u0629 \u0627\u0644\u062f\u0641\u0639 :"),c.ac(),c.bc(19,"select",13),c.nc("change",(function(t){return e.selectedPaymentway(t.target.value)})),c.Pc(20,b,2,2,"option",14),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(21,"div",1),c.bc(22,"div",15),c.bc(23,"div",2),c.bc(24,"div",3),c.bc(25,"div",16),c.bc(26,"table",17),c.bc(27,"thead",18),c.bc(28,"tr"),c.bc(29,"th"),c.Rc(30,"\u0627\u0644\u0627\u0633\u0645"),c.ac(),c.bc(31,"th"),c.Rc(32,"\u0633\u0639\u0631"),c.ac(),c.bc(33,"th"),c.Rc(34,"\u0648\u062d\u062f\u0627\u062a"),c.ac(),c.bc(35,"th"),c.Rc(36,"\u0636\u0631\u064a\u0628\u0629 \u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u0636\u0627\u0641\u0629"),c.ac(),c.Pc(37,g,2,0,"th",19),c.Wb(38,"th"),c.ac(),c.ac(),c.Pc(39,y,2,1,"tbody",20),c.ac(),c.ac(),c.ac(),c.Pc(40,v,6,4,"div",21),c.Pc(41,_,6,4,"div",21),c.Pc(42,x,6,4,"div",21),c.Pc(43,P,6,4,"div",21),c.Pc(44,C,4,0,"div",22),c.ac(),c.ac(),c.ac(),c.bc(45,"div",23),c.bc(46,"div",15),c.bc(47,"div",2),c.bc(48,"div",24),c.Rc(49," \u0627\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645 \u0628\u0639\u062f \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0642\u0633\u0645 "),c.bc(50,"input",25,26),c.nc("keyup",(function(){c.Ic(t);const n=c.Hc(51);return e.searchItem(n)})),c.ac(),c.ac(),c.ac(),c.bc(52,"div",2),c.bc(53,"div",10),c.bc(54,"div",27),c.bc(55,"ul",28),c.Pc(56,k,2,4,"li",29),c.ac(),c.ac(),c.ac(),c.bc(57,"div",24),c.bc(58,"div",30),c.Pc(59,w,2,1,"div",31),c.Pc(60,M,2,1,"ul",32),c.Pc(61,E,2,1,"ul",32),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(62,"button",33),c.Rc(63," \u062f\u0641\u0639 "),c.ac(),c.ac(),c.ac()}2&t&&(c.Eb(20),c.yc("ngForOf",e.paymentways),c.Eb(17),c.yc("ngIf",e.serviceTax>-1),c.Eb(2),c.yc("ngIf",e.addItems),c.Eb(1),c.yc("ngIf",e.addItems),c.Eb(1),c.yc("ngIf",e.serviceTax>-1&&e.addItems),c.Eb(1),c.yc("ngIf",e.addItems),c.Eb(1),c.yc("ngIf",e.addItems),c.Eb(1),c.yc("ngIf",e.addItems.length>=1),c.Eb(12),c.yc("ngForOf",e.categories[0]),c.Eb(3),c.yc("ngIf",e.offeritems.length>0),c.Eb(1),c.yc("ngIf",e.subs.length>=1),c.Eb(1),c.yc("ngIf",e.items.length>=1&&0==e.offeritems.length))},directives:[i.n,p.e,p.f,p.a,p.d,i.o,p.c],pipes:[i.f],styles:[".highlighted[_ngcontent-%COMP%]{background-color:#e1e9d7!important}.orderoptions[_ngcontent-%COMP%]{text-align:right}.active[_ngcontent-%COMP%]{background-color:#efdede!important}.headforoffer[_ngcontent-%COMP%]{height:10px!important;width:100%!important;text-align:right!important;font-size:15px!important;margin-right:8px}.print-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:20px 0}.print-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;padding:9px;margin-left:10px;background-color:#4a90e2;border-radius:5px;cursor:pointer;border:1px solid #4a90e2;color:#fff}.manage-table[_ngcontent-%COMP%]{padding:0}.manage-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;padding:10px;background-color:#9fa4a7;border:1px solid #eee;border-radius:5px;color:#fff;cursor:pointer}.manage-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i.red-arrow[_ngcontent-%COMP%]{padding:5px;background-color:#ef0000;border-radius:50%;display:inline-block;height:25px;width:25px;line-height:15px;text-align:center}.calculator[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-right:0;margin-bottom:10px}.calculator[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{width:100%;padding:10px;font-size:15px;font-weight:700;color:#414673}.categories[_ngcontent-%COMP%]{height:240px;border:1px solid #414673;margin-top:15px;background-color:#fff;border-radius:5px}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{padding:0;height:100%;margin:0;overflow-y:scroll}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding:10px;cursor:pointer;position:relative;text-align:center;width:150px;border-radius:5px;background-color:#e6eaed;color:#414673;font-size:18px;font-weight:700;margin:10px auto auto;transition:all .3s ease-out}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .subcategories[_ngcontent-%COMP%]{position:absolute;right:0;margin:10px 0;background-color:#fff;box-shadow:1px 1px 5px rgba(0,0,0,.5);border-radius:5px;width:100%;padding:0;display:none}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .subcategories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:9px;transition:all .3s ease-out}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .subcategories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{margin-right:5px}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   li.show-sub-list[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:block}.items[_ngcontent-%COMP%]{height:240px;border:1px solid #414673;margin-top:15px;background-color:#fff;border-radius:5px}.items[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:5px;height:100%;margin:0;overflow-y:scroll}.items[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-align:center;border-radius:5px;color:#414673;display:inline-block;margin-top:10px;margin-left:10px;width:100px;height:65px;cursor:pointer}.offercontainer[_ngcontent-%COMP%]{height:100%;overflow-y:scroll}.client-list[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]:disabled, .form-control[readonly][_ngcontent-%COMP%]{background-color:#fff}.client-list[_ngcontent-%COMP%]{position:absolute;list-style-type:none;width:91%;margin-top:10px;border-radius:5px;padding:5px;box-shadow:1px 1px 5px rgba(0,0,0,.5);z-index:9999}.client-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:5px;transition:all .3s ease-out}.client-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#eee}#invoice-POS[_ngcontent-%COMP%]{box-shadow:0 0 1in -.25in rgba(0,0,0,.5);padding:2mm;margin:0 auto;width:44mm;background:#fff}#invoice-POS[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5em;color:#222}#invoice-POS[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:.9em}#invoice-POS[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2em;font-weight:300;line-height:2em}#invoice-POS[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.7em;color:#666;line-height:1.2em}#invoice-POS[_ngcontent-%COMP%]   #bot[_ngcontent-%COMP%], #invoice-POS[_ngcontent-%COMP%]   #mid[_ngcontent-%COMP%], #invoice-POS[_ngcontent-%COMP%]   #top[_ngcontent-%COMP%]{border-bottom:1px solid #eee}#invoice-POS[_ngcontent-%COMP%]   #top[_ngcontent-%COMP%]{min-height:100px}#invoice-POS[_ngcontent-%COMP%]   #mid[_ngcontent-%COMP%]{min-height:80px}#invoice-POS[_ngcontent-%COMP%]   #bot[_ngcontent-%COMP%]{min-height:50px}#invoice-POS[_ngcontent-%COMP%]   #top[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{height:60px;width:60px;background:url(http://michaeltruong.ca/images/logo1.png) no-repeat;background-size:60px 60px}#invoice-POS[_ngcontent-%COMP%]   .clientlogo[_ngcontent-%COMP%]{float:left;height:60px;width:60px;background:url(http://michaeltruong.ca/images/client.jpg) no-repeat;background-size:60px 60px;border-radius:50px}#invoice-POS[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:block;margin-left:0}#invoice-POS[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{float:right}#invoice-POS[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:right}#invoice-POS[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}#invoice-POS[_ngcontent-%COMP%]   .tabletitle[_ngcontent-%COMP%]{font-size:.5em;background:#eee}#invoice-POS[_ngcontent-%COMP%]   .service[_ngcontent-%COMP%]{border-bottom:1px solid #eee}#invoice-POS[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:24mm}#invoice-POS[_ngcontent-%COMP%]   .itemtext[_ngcontent-%COMP%]{font-size:.5em}#invoice-POS[_ngcontent-%COMP%]   #legalcopy[_ngcontent-%COMP%]{margin-top:5mm}"]}),t})();var T=n("tk/3");let H=(()=>{class t{constructor(t){this.http=t,this.Tablesurl="http://wokhouse.codesroots.com/api/restables/gettablesdata/",this.orderUrl="http://wokhouse.codesroots.com/api/orders/add.json",this.checkOrderComplete="http://wokhouse.codesroots.com/api/orderdetails/getDetailsByOrder/"}getTablesPosition(){return this.http.get(this.Tablesurl+localStorage.getItem("branch")+".json")}addOrder(t){let e={headers:new T.e({"Content-Type":"application/json"})};return this.http.post(this.orderUrl,JSON.stringify(t),e)}checkOrderCompletes(t){let e=new T.e({"Content-Type":"application/json"});return this.http.get(this.checkOrderComplete+t+".json",{headers:e})}}return t.\u0275fac=function(e){return new(e||t)(c.jc(T.b))},t.\u0275prov=c.Rb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const F=function(t){return{"background-color":t}};function D(t,e){if(1&t){const t=c.cc();c.bc(0,"input",14),c.nc("click",(function(e){return c.Ic(t),c.qc(2).addOrder(e)})),c.ac()}if(2&t){const t=c.qc().$implicit;c.zc("id",t.id),c.Ac("value","Table ",t.number,""),c.yc("ngStyle",c.Cc(3,F,t.orders.length>0?"#35e235":"white"))}}function q(t,e){if(1&t&&(c.bc(0,"li"),c.Pc(1,D,1,5,"input",13),c.ac()),2&t){const t=e.$implicit;c.Eb(1),c.yc("ngIf",1==t.position)}}function B(t,e){if(1&t){const t=c.cc();c.bc(0,"input",14),c.nc("click",(function(e){return c.Ic(t),c.qc(2).addOrder(e)})),c.ac()}if(2&t){const t=c.qc().$implicit;c.zc("id",t.id),c.Ac("value","Table ",t.number,""),c.yc("ngStyle",c.Cc(3,F,t.orders.length>0?"#35e235":"white"))}}function N(t,e){if(1&t&&(c.bc(0,"li"),c.Pc(1,B,1,5,"input",13),c.ac()),2&t){const t=e.$implicit;c.Eb(1),c.yc("ngIf",2==t.position)}}function X(t,e){if(1&t){const t=c.cc();c.bc(0,"input",14),c.nc("click",(function(e){return c.Ic(t),c.qc(2).addOrder(e)})),c.ac()}if(2&t){const t=c.qc().$implicit;c.zc("id",t.id),c.Ac("value","Table ",t.number,""),c.yc("ngStyle",c.Cc(3,F,t.orders.length>0?"#35e235":"white"))}}function j(t,e){if(1&t&&(c.bc(0,"li"),c.Pc(1,X,1,5,"input",13),c.ac()),2&t){const t=e.$implicit;c.Eb(1),c.yc("ngIf",3==t.position)}}function z(t,e){if(1&t){const t=c.cc();c.bc(0,"input",14),c.nc("click",(function(e){return c.Ic(t),c.qc(2).addOrder(e)})),c.ac()}if(2&t){const t=c.qc().$implicit;c.zc("id",t.id),c.Ac("value","Table ",t.number,""),c.yc("ngStyle",c.Cc(3,F,t.orders.length>0?"#35e235":"white"))}}function V(t,e){if(1&t&&(c.bc(0,"li"),c.Pc(1,z,1,5,"input",13),c.ac()),2&t){const t=e.$implicit;c.Eb(1),c.yc("ngIf",4==t.position)}}function U(t,e){if(1&t){const t=c.cc();c.bc(0,"input",14,15),c.nc("click",(function(e){return c.Ic(t),c.qc(2).addOrder(e)})),c.ac()}if(2&t){const t=c.qc().$implicit;c.zc("id",t.id),c.Ac("value","Table ",t.number,""),c.yc("ngStyle",c.Cc(3,F,t.orders.length>0?"#35e235":"white"))}}function W(t,e){if(1&t&&(c.bc(0,"li"),c.Pc(1,U,2,5,"input",13),c.ac()),2&t){const t=e.$implicit;c.Eb(1),c.yc("ngIf",5==t.position)}}let L=(()=>{class t{constructor(t,e){this.service=t,this.router=e,this.tables=[]}ngOnInit(){this.service.getTablesPosition().subscribe(t=>{this.tables=t.data,console.log(this.tables)})}addOrder(t){let e=t.target.getAttribute("id");this.service.checkOrderCompletes(e).subscribe(t=>{var n={typeorder:0,total:0,user_id:localStorage.getItem("userid"),waiter_id:1,table_id:parseInt(e),branch_id:localStorage.getItem("branch")};t.query.length>0?(console.log(t.query[0].orderdetails),this.router.navigate(["/orders/"+e+"/"+t.query[0].id+"/1"])):this.service.addOrder(n).subscribe(t=>{this.router.navigate(["/orders/"+e+"/"+t.data.id])})})}}return t.\u0275fac=function(e){return new(e||t)(c.Vb(H),c.Vb(o.d))},t.\u0275cmp=c.Pb({type:t,selectors:[["app-tables"]],decls:32,vars:5,consts:[[1,"container"],[1,"row"],[1,"col-md-12"],[1,"borders"],[1,"border",2,"border-color","transparent !important"],[1,"tables-top"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,""],[1,"tables-right"],[1,"tables-bottom"],[1,"tables-left"],[1,"tables-center"],["type","button",3,"ngStyle","id","value","click",4,"ngIf"],["type","button",3,"ngStyle","id","value","click"],["table_id",""]],template:function(t,e){1&t&&(c.bc(0,"div",0),c.bc(1,"div",1),c.bc(2,"div",2),c.bc(3,"div",3),c.bc(4,"div",4),c.bc(5,"div",5),c.bc(6,"ul",6),c.Pc(7,q,2,1,"li",7),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(8,"div",2),c.bc(9,"div",3),c.bc(10,"div",8),c.bc(11,"div",9),c.bc(12,"ul",6),c.Pc(13,N,2,1,"li",7),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(14,"div",2),c.bc(15,"div",3),c.bc(16,"div",8),c.bc(17,"div",10),c.bc(18,"ul",6),c.Pc(19,j,2,1,"li",7),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(20,"div",2),c.bc(21,"div",3),c.bc(22,"div",8),c.bc(23,"div",11),c.bc(24,"ul",6),c.Pc(25,V,2,1,"li",7),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(26,"div",2),c.bc(27,"div",3),c.bc(28,"div",8),c.bc(29,"div",12),c.bc(30,"ul",6),c.Pc(31,W,2,1,"li",7),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac()),2&t&&(c.Eb(7),c.yc("ngForOf",e.tables),c.Eb(6),c.yc("ngForOf",e.tables),c.Eb(6),c.yc("ngForOf",e.tables),c.Eb(6),c.yc("ngForOf",e.tables),c.Eb(6),c.yc("ngForOf",e.tables))},directives:[i.n,i.o,i.p],styles:["input[_ngcontent-%COMP%]{border-radius:5px!important;cursor:pointer!important;border:1px solid #eee!important;padding:10px!important;font-size:15px!important;font-weight:700!important;color:#414673!important;width:85px!important}ul[_ngcontent-%COMP%]{padding:0;margin-bottom:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;margin-right:5px}.borders[_ngcontent-%COMP%]{border-radius:5px;position:relative}.borders[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{position:absolute;top:0;width:100%}.borders[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]   .tables-top[_ngcontent-%COMP%]{width:100%;margin:auto}.borders[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]   .tables-top[_ngcontent-%COMP%], .tables-right[_ngcontent-%COMP%]{padding:10px;border:1px solid #eee;border-radius:5px;height:150px;overflow-y:scroll}.tables-right[_ngcontent-%COMP%]{position:absolute;right:0;top:190px}.tables-right[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block;margin:0 0 10px}.tables-left[_ngcontent-%COMP%]{position:absolute;left:0;top:190px;padding:10px;border:1px solid #eee;border-radius:5px;height:150px;overflow-y:scroll}.tables-left[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block;margin:0 0 10px}.tables-bottom[_ngcontent-%COMP%]{left:0;bottom:-535px;width:100%}.tables-bottom[_ngcontent-%COMP%], .tables-center[_ngcontent-%COMP%]{position:absolute;padding:10px;border:1px solid #eee;border-radius:5px;height:150px;overflow-y:scroll}.tables-center[_ngcontent-%COMP%]{bottom:-345px;width:45%;right:27%}"]}),t})();function J(t,e){if(1&t&&(c.bc(0,"option",56),c.Rc(1),c.ac()),2&t){const t=e.$implicit;c.yc("value",t.id),c.Eb(1),c.Sc(t.name)}}function $(t,e){if(1&t&&(c.bc(0,"option",56),c.Rc(1),c.ac()),2&t){const t=e.$implicit;c.yc("value",t.id),c.Eb(1),c.Sc(t.name)}}function K(t,e){1&t&&(c.bc(0,"th"),c.Rc(1,"\u0636\u0631\u064a\u0628\u0629 \u062e\u062f\u0645\u0629"),c.ac())}function Y(t,e){if(1&t){const t=c.cc();c.bc(0,"tr",59),c.bc(1,"div",60),c.bc(2,"td"),c.Rc(3),c.ac(),c.bc(4,"td"),c.Rc(5),c.ac(),c.bc(6,"td"),c.Wb(7,"input",61),c.ac(),c.ac(),c.bc(8,"td",62),c.Rc(9),c.ac(),c.bc(10,"td"),c.Rc(11),c.ac(),c.bc(12,"td",62),c.bc(13,"input",63),c.nc("change",(function(n){c.Ic(t);const i=e.index;return c.qc(2).updateItems(n,i)})),c.ac(),c.ac(),c.bc(14,"td"),c.Rc(15),c.ac(),c.bc(16,"td"),c.bc(17,"button",64),c.nc("click",(function(n){c.Ic(t);const i=e.$implicit;return c.qc(2).highlighted(n,i)})),c.Wb(18,"i",65),c.ac(),c.bc(19,"button",66),c.nc("click",(function(n){c.Ic(t);const i=e.index;return c.qc(2).removeRow(n,i)})),c.Wb(20,"i",67),c.ac(),c.ac(),c.ac()}if(2&t){const t=e.$implicit;c.Eb(3),c.Sc(t.name),c.Eb(2),c.Tc("",t.price," \u062c.\u0645"),c.Eb(4),c.Sc(t.name),c.Eb(2),c.Tc("",t.price," \u062c.\u0645"),c.Eb(4),c.Tc("",t.tax.percentage," %"),c.Eb(2),c.zc("id",t.id)}}function G(t,e){if(1&t&&(c.bc(0,"tbody",57),c.Pc(1,Y,21,6,"tr",58),c.ac()),2&t){const t=c.qc();c.Eb(1),c.yc("ngForOf",t.addItems)}}function Z(t,e){if(1&t&&(c.bc(0,"div",68),c.bc(1,"div",69),c.bc(2,"label",70),c.Rc(3," \u0636\u0631\u064a\u0628\u0629 \u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u0636\u0627\u0641\u0629"),c.ac(),c.Wb(4,"input",71),c.rc(5,"number"),c.ac(),c.ac()),2&t){const t=c.qc();c.Eb(4),c.zc("value",c.tc(5,1,t.VAT,"1.2-2"))}}function Q(t,e){if(1&t){const t=c.cc();c.bc(0,"div",68),c.bc(1,"div",69),c.bc(2,"label",72),c.Rc(3," \u0636\u0631\u064a\u0628\u0629 \u062e\u062f\u0645\u0629"),c.ac(),c.bc(4,"input",73),c.nc("change",(function(e){return c.Ic(t),c.qc().ServiceChanged(e)})),c.ac(),c.ac(),c.ac()}}function tt(t,e){if(1&t&&(c.bc(0,"div",68),c.bc(1,"div",69),c.bc(2,"label",74),c.Rc(3,"\u0645\u0628\u0644\u063a \u0627\u062c\u0645\u0627\u0644\u064a"),c.ac(),c.Wb(4,"input",75),c.rc(5,"number"),c.ac(),c.ac()),2&t){const t=c.qc();c.Eb(4),c.zc("value",c.tc(5,1,t.itemPrice,"1.2-2"))}}function et(t,e){if(1&t&&(c.bc(0,"div",68),c.bc(1,"div",69),c.bc(2,"label",76),c.Rc(3,"\u0627\u0644\u0645\u062c\u0645\u0648\u0639"),c.ac(),c.Wb(4,"input",77),c.rc(5,"number"),c.ac(),c.ac()),2&t){const t=c.qc();c.Eb(4),c.zc("value",c.tc(5,1,t.itemTotal,"1.2-2"))}}function nt(t,e){if(1&t){const t=c.cc();c.bc(0,"li",81),c.nc("click",(function(){c.Ic(t);const n=e.index;return c.qc(2).clientInfo(n)})),c.Rc(1),c.ac()}if(2&t){const t=e.$implicit;c.Eb(1),c.Tc(" ",t.mobile," ")}}function it(t,e){if(1&t){const t=c.cc();c.bc(0,"ul",78),c.bc(1,"i",79),c.nc("click",(function(){return c.Ic(t),c.qc().clientArray=[]})),c.ac(),c.Pc(2,nt,2,1,"li",80),c.ac()}if(2&t){const t=c.qc();c.Eb(2),c.yc("ngForOf",t.clientArray)}}function ot(t,e){if(1&t&&(c.bc(0,"div",10),c.Wb(1,"input",82),c.ac()),2&t){const t=c.qc();c.Eb(1),c.zc("value",t.clientExistName)}}function ct(t,e){if(1&t&&(c.bc(0,"div",10),c.Wb(1,"input",82),c.ac()),2&t){const t=c.qc();c.Eb(1),c.zc("value",t.clientExistAddress)}}function rt(t,e){if(1&t&&(c.bc(0,"div",10),c.Wb(1,"input",82),c.ac()),2&t){const t=c.qc();c.Eb(1),c.zc("value",t.clientExistPhone)}}function at(t,e){if(1&t){const t=c.cc();c.bc(0,"li",83),c.nc("click",(function(){c.Ic(t);const n=e.$implicit;return c.qc().clicked=n}))("click",(function(){c.Ic(t);const n=e.index;return c.qc().getItemsByCategory(n)})),c.Rc(1),c.ac()}if(2&t){const t=e.$implicit,n=c.qc();c.Lb("active",n.clicked===t),c.zc("id",t.id),c.Eb(1),c.Tc(" ",t.name," ")}}function st(t,e){if(1&t){const t=c.cc();c.bc(0,"li",88),c.nc("click",(function(n){c.Ic(t);const i=e.index,o=c.qc().index;return c.qc(2).PutItemForSell(n,i,o)})),c.Wb(1,"img",89),c.Rc(2),c.ac()}if(2&t){const t=e.$implicit;c.zc("id",t.id),c.Eb(2),c.Tc(" ",t.name," ")}}function lt(t,e){if(1&t&&(c.bc(0,"ul",5),c.bc(1,"li",86),c.Rc(2),c.ac(),c.Pc(3,st,3,2,"li",87),c.ac()),2&t){const t=e.$implicit;c.Eb(2),c.Sc(t.subcategory.name),c.Eb(1),c.yc("ngForOf",t.subcategory.items)}}function dt(t,e){if(1&t&&(c.bc(0,"div",84),c.Pc(1,lt,4,2,"ul",85),c.ac()),2&t){const t=c.qc();c.Eb(1),c.yc("ngForOf",t.offeritems)}}function ut(t,e){if(1&t){const t=c.cc();c.bc(0,"li",91),c.nc("click",(function(n){c.Ic(t);const i=e.index;return c.qc(2).getItems(n,i)})),c.Wb(1,"img",89),c.Rc(2),c.ac()}if(2&t){const t=e.$implicit;c.zc("id",t.id),c.Eb(2),c.Tc(" ",t.name," ")}}function ht(t,e){if(1&t&&(c.bc(0,"ul",5),c.Pc(1,ut,3,2,"li",90),c.ac()),2&t){const t=c.qc();c.Eb(1),c.yc("ngForOf",t.subs[0])}}function pt(t,e){if(1&t){const t=c.cc();c.bc(0,"li",88),c.nc("click",(function(n){c.Ic(t);const i=e.index;return c.qc(2).PutItemForSell(n,i,0)})),c.Wb(1,"img",89),c.Rc(2),c.ac()}if(2&t){const t=e.$implicit;c.zc("id",t.id),c.Eb(2),c.Tc(" ",t.name," ")}}function bt(t,e){if(1&t&&(c.bc(0,"ul",5),c.Pc(1,pt,3,2,"li",87),c.ac()),2&t){const t=c.qc();c.Eb(1),c.yc("ngForOf",t.items)}}let gt=(()=>{class t extends R{constructor(t,e,n,i){super(t,e,n,i),this.route=t,this.service=e,this.datePipe=n,this.router=i,this.clientArray=[],d.api.setSha256Type(t=>Object(u.sha256)(t)),d.api.setPromiseType(t=>new Promise(t)),this.service.getLastNotCompeleteOrder(localStorage.getItem("branch")).subscribe(t=>{null==t.query?this.addOrders():(this.order_id=t.query.id,console.log(this.order_id),this.service.checkOrderCompletesById(this.order_id).subscribe(t=>{if(null!=t.query[0].orderdetails){for(let e=0;e<=t.query[0].orderdetails.length-1;e++)this.addItems.push(t.query[0].orderdetails[e].item),this.itemTax=this.addItems[e].tax.percentage,this.addItems[e].totalamount=t.query[0].orderdetails[e].itemamount,0==t.query[0].orderdetails[e].itemtotal?this.addItems[e].price=0:(this.itemPrice+=t.query[0].orderdetails[e].itemtotal,this.addItems[e].tax.percentage>0&&(console.log(this.addItems[e]),this.VAT+=Math.round(t.query[0].orderdetails[e].itemtotal*this.itemTax/100*100)/100));this.itemTotal=Math.round(100*(this.itemPrice+this.VAT+this.serviceTax))/100}}))}),this.delivry=1}addOrders(){var t={typeorder:1,total:0,user_id:1,waiter_id:1,table_id:0,branch_id:localStorage.getItem("branch")};this.service.addOrder(t).subscribe(t=>{this.order_id=t.data.id,localStorage.setItem("orderid",this.order_id)})}setClientName(t){this.clientName=t.value}setClientPhone(t){this.clientPhone=t.value}setClientAddress(t){this.clientAddress=t.value}addClient(t){t={firstname:this.clientName,mobile:this.clientPhone,address:this.clientAddress,username:this.clientName,branch_id:localStorage.getItem("branch"),password:"123456",email:"a@a.com",email_verified:1,active:1},console.log(JSON.stringify(t)),this.service.addClient(t).subscribe(t=>{console.log(t),null!=t.data?alert("\u062a\u0645 \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0645\u064a\u0644 \u0628\u0646\u062c\u0627\u062d"):alert("\u0645\u0648\u062c\u0648\u062f \u0645\u0646 \u0642\u0628\u0644")},t=>{alert("\u0645\u0648\u062c\u0648\u062f \u0645\u0646 \u0642\u0628\u0644")})}ServiceChanged(t){this.lastvalue>0&&(this.itemTotal=this.itemTotal-parseInt(this.lastvalue)),this.lastvalue=t.target.value,this.serviceTax=parseInt(t.target.value),this.itemTotal=this.itemTotal+parseInt(t.target.value)}printAllOrder(t){console.log(this.order_id);var e=this;if(null!=this.clientExistName){var n={total:this.itemTotal,service:this.serviceTax,taxes:this.VAT,discount:this.discount,branch_id:localStorage.getItem("branch"),marketer_id:this.selectedMarketer,paymenttype_id:this.selectedPaymentways,platform_id:1};console.log(n),console.log(this.order_id),this.service.EditOrder(n,this.order_id).subscribe(t=>{if(1==t.success){console.log(this.order_id),localStorage.removeItem("orderid");var n=[];this.addItems.forEach((function(t){console.log(t.name),n.push(t.name+"         \x1ba0",+t.totalamount+"       \x1ba0",+t.price*t.totalamount+"\n")})),this.addItems=[];var i=this.datePipe.transform(new Date,"yyyy-MM-dd hh:mm"),o=[{type:"raw",format:"image",data:"assets/images/62123932_340200260263485_2674160429353140224_n (2).png",options:{encoding:"IBM864",language:"ESCPOS",dotDensity:"double"}},"\x1b@","\x1ba2"," \u0637\u0644\u0628 \u0631\u0642\u0645   : "+this.order_id+"\n","  \u0625\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644  : "+this.clientExistName+"\n","\n","  \u0631\u0642\u0645 \u0627\u0644\u0639\u0645\u064a\u0644  : "+this.clientExistPhone+"\n","\n","\n","  \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0639\u0645\u064a\u0644  : "+this.clientExistAddress+"\n","\n","\n",i+"\n","\n\n\x1ba2","\u0627\u0644\u0627\u0633\u0645                      \u0627\u0644\u0643\u0645\u064a\u0629     \u0627\u0644\u0633\u0639\u0631\n","\n","\n","------------------------------------------","\n",n.toString().replace(/,/g,""),"\n","\n","\x1ba0","SubTotal   "+Math.round(100*this.itemPrice)/100+"\n","\n","DisCount    "+Math.round(100*this.discount)/100+"%\n","\n","Service   "+Math.round(100*this.serviceTax)/100+"\n","\n","\n","Taxes   "+Math.round(100*this.VAT)/100+"\n","\n","Total   "+Math.round(100*this.itemTotal)/100+"\n","\n","\n","\n","------------------------------------------","\n","\n","\n","\x1ba0","\n\n\n\n\n\x1bi","\x10\x14\x01\0\x05"];this.printers=[],console.log("AppComponent____________");const t=d.configs.create(localStorage.getItem("printer").replace(/['"]+/g,""),{encoding:"IBM864"});return d.print(t,o).then((function(t){e.router.navigate(["/tables"])})).catch((function(t){alert("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0642\u0645 \u0628\u0639\u0645\u0644 \u0627\u0639\u0627\u062f\u0629 \u0644\u0628\u0631\u0646\u0627\u0645\u062c qz tray"),console.error(t)}))}})}else alert("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0627\u062f\u062e\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644")}searchClient(t){console.log(t);let e={mobile:t};console.log(JSON.stringify(e)),this.service.searchClient(e).subscribe(t=>{console.log(t.data),this.clientArray=t.data})}clientInfo(t){this.clientExistName=this.clientArray[t].username,this.clientExistAddress=this.clientArray[t].address,this.clientExistPhone=this.clientArray[t].mobile,this.clientId=this.clientArray[t].id,this.clientArray=[]}}return t.\u0275fac=function(e){return new(e||t)(c.Vb(o.a),c.Vb(h.a),c.Vb(i.e),c.Vb(o.d))},t.\u0275cmp=c.Pb({type:t,selectors:[["app-orders"]],features:[c.Db([i.e]),c.Bb],decls:104,vars:16,consts:[[1,"order-background",2,"background-color","#fff","border-radius","5px"],[1,"container"],[1,"row"],[1,"col-md-12"],[1,"print-options"],[1,"list-unstyled","text-right"],[1,"fas","fa-print",3,"click"],[1,"fas","fa-print"],["type","number","min","1",2,"width","70px","margin","auto","text-align","center","background-color","#d8d8d8",3,"change"],[1,"row","orderoptions"],[1,"col-md-4"],[1,"form-group"],["for","country_id"],["id","country_id","name","country_id","required","","country_id","",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"section-background",2,"padding","20px","background-color","#e6eaed"],[1,"table-responsive",2,"height","256px"],[1,"table","text-center"],[2,"background-color","#d8d8d8"],[4,"ngIf"],["style","background-color: #fff",4,"ngIf"],["class","col-md-3",4,"ngIf"],[1,"col-md-4","text-right",2,"position","relative"],["type","text","placeholder","\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0639\u0645\u064a\u0644 \u0628\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641",1,"form-control",3,"keyup"],["search",""],["class","client-list",4,"ngIf"],[1,"col-md-4","text-right"],["data-toggle","modal","data-target","#newClientModal",1,"btn","btn-danger"],["id","newClientModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","d-flex","justify-content-between"],["id","exampleModalLabel",1,"modal-title"],[1,"modal-body"],[1,""],[2,"margin-bottom","10px"],["type","text","placeholder","\u0627\u0644\u0627\u0633\u0645",1,"form-control",3,"change"],["clientName",""],["type","text","placeholder","\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641",1,"form-control",3,"change"],["clientPhone",""],["type","text","placeholder","\u0627\u0644\u0639\u0646\u0648\u0627\u0646",1,"form-control",3,"change"],["clientAddress",""],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["class","col-md-4",4,"ngIf"],[1,"container",2,"margin-top","20px"],[1,"col-md-8"],["min","1",2,"width","180px","margin","auto","text-align","center","background-color","#ffffff",3,"keyup"],["searchdelivry",""],[1,"categories"],[1,"list-unstyled","text-right","categories"],[3,"active","id","click",4,"ngFor","ngForOf"],[1,"items"],["class","offercontainer",4,"ngIf"],["class","list-unstyled text-right",4,"ngIf"],[2,"margin","20px 0","background-color","#5c9d15","color","#fff","padding","5px","width","150px","border","none","border-radius","5px"],[3,"value"],[2,"background-color","#fff"],["style","cursor: pointer; border-bottom: 1px solid #f5f7f8;",4,"ngFor","ngForOf"],[2,"cursor","pointer","border-bottom","1px solid #f5f7f8"],[1,"print-items","d-none"],["type","number","value","1"],[1,"print-item"],["type","number","value","1","min","1",1,"form-control",2,"width","70px","margin","auto","text-align","center","background-color","#d8d8d8",3,"change"],[1,"btn","btn-warning",2,"border-radius","50%","margin-left","10px","height","35px","width","35px","text-align","center","padding","0",3,"id","click"],[1,"fas","fa-highlighter"],[1,"btn","btn-danger",2,"border-radius","50%","height","35px","width","35px","text-align","center","padding","0",3,"click"],[1,"fas","fa-times"],[1,"col-md-3"],[1,"form-group","text-right"],["for","tax",2,"font-weight","bold"],["id","tax","type","text","disabled","",1,"form-control",3,"value"],["for","serviceTax",2,"font-weight","bold"],["id","serviceTax","type","text","type","number","min","0","max","99","required","",1,"form-control",3,"change"],["for","price",2,"font-weight","bold"],["id","price","type","text","disabled","",1,"form-control",3,"value"],["for","total",2,"font-weight","bold"],["id","total","type","text","disabled","",1,"form-control",3,"value"],[1,"client-list"],[1,"far","fa-times-circle",2,"color","red","cursor","pointer",3,"click"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["type","text","disabled","",1,"form-control",3,"value"],[3,"id","click"],[1,"offercontainer"],["class","list-unstyled text-right",4,"ngFor","ngForOf"],[1,"headforoffer"],["data-sub","false",3,"id","click",4,"ngFor","ngForOf"],["data-sub","false",3,"id","click"],["src","http://wokhouse.codesroots.com/img/logo.png",2,"width","100%","height","100%","display","block","border-radius","5px","pointer-events","none"],["data-sub","true",3,"id","click",4,"ngFor","ngForOf"],["data-sub","true",3,"id","click"]],template:function(t,e){if(1&t){const t=c.cc();c.bc(0,"div",0),c.bc(1,"div",1),c.bc(2,"div",2),c.bc(3,"div",3),c.bc(4,"div",4),c.bc(5,"ul",5),c.bc(6,"i",6),c.nc("click",(function(){return e.print("BIXOLON SRP-330")})),c.ac(),c.Rc(7," \u0637\u0628\u0627\u0639\u0647 \u0627\u0644\u0645\u0637\u0628\u062e "),c.bc(8,"li"),c.bc(9,"i",6),c.nc("click",(function(){return e.printAllOrder("BIXOLON SRP-330")})),c.ac(),c.Rc(10," \u0637\u0628\u0627\u0639\u0647 \u0627\u0644\u0643\u0627\u0634\u064a\u0631 "),c.ac(),c.Wb(11,"i",7),c.Rc(12," \u062e\u0635\u0645 "),c.bc(13,"input",8),c.nc("change",(function(t){return e.MakeDiscount(t)})),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(14,"div",9),c.bc(15,"div",10),c.bc(16,"div",11),c.bc(17,"label",12),c.Rc(18,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u0648\u0642:"),c.ac(),c.bc(19,"select",13),c.nc("change",(function(t){return e.selectedMarketers(t.target.value)})),c.Pc(20,J,2,2,"option",14),c.ac(),c.ac(),c.ac(),c.bc(21,"div",10),c.bc(22,"div",11),c.bc(23,"label",12),c.Rc(24,"\u0648\u0633\u064a\u0644\u0629 \u0627\u0644\u062f\u0641\u0639 :"),c.ac(),c.bc(25,"select",13),c.nc("change",(function(t){return e.selectedPaymentway(t.target.value)})),c.Pc(26,$,2,2,"option",14),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(27,"div",1),c.bc(28,"div",15),c.bc(29,"div",2),c.bc(30,"div",3),c.bc(31,"div",16),c.bc(32,"table",17),c.bc(33,"thead",18),c.bc(34,"tr"),c.bc(35,"th"),c.Rc(36,"\u0627\u0644\u0627\u0633\u0645"),c.ac(),c.bc(37,"th"),c.Rc(38,"\u0633\u0639\u0631"),c.ac(),c.bc(39,"th"),c.Rc(40,"\u0648\u062d\u062f\u0627\u062a"),c.ac(),c.bc(41,"th"),c.Rc(42,"\u0636\u0631\u064a\u0628\u0629 \u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u0636\u0627\u0641\u0629"),c.ac(),c.Pc(43,K,2,0,"th",19),c.Wb(44,"th"),c.ac(),c.ac(),c.Pc(45,G,2,1,"tbody",20),c.ac(),c.ac(),c.ac(),c.Pc(46,Z,6,4,"div",21),c.Pc(47,Q,5,0,"div",21),c.Pc(48,tt,6,4,"div",21),c.Pc(49,et,6,4,"div",21),c.bc(50,"div",22),c.bc(51,"div",11),c.bc(52,"input",23,24),c.nc("keyup",(function(t){return e.searchClient(t.target.value)})),c.ac(),c.Pc(54,it,3,1,"ul",25),c.ac(),c.ac(),c.bc(55,"div",26),c.bc(56,"div",11),c.bc(57,"button",27),c.Rc(58," \u0627\u0636\u0627\u0641\u0629 \u0639\u0645\u064a\u0644 "),c.ac(),c.ac(),c.ac(),c.bc(59,"div",28),c.bc(60,"div",29),c.bc(61,"div",30),c.bc(62,"div",31),c.bc(63,"h5",32),c.Rc(64,"\u0627\u0636\u0627\u0641\u0629 \u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f"),c.ac(),c.ac(),c.bc(65,"div",33),c.bc(66,"div",1),c.bc(67,"div",2),c.bc(68,"div",3),c.bc(69,"form",34),c.bc(70,"div",35),c.bc(71,"input",36,37),c.nc("change",(function(){c.Ic(t);const n=c.Hc(72);return e.setClientName(n)})),c.ac(),c.ac(),c.bc(73,"div",35),c.bc(74,"input",38,39),c.nc("change",(function(){c.Ic(t);const n=c.Hc(75);return e.setClientPhone(n)})),c.ac(),c.ac(),c.bc(76,"div",35),c.bc(77,"input",40,41),c.nc("change",(function(){c.Ic(t);const n=c.Hc(78);return e.setClientAddress(n)})),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(79,"div",42),c.bc(80,"button",43),c.nc("click",(function(){return e.addClient(e.clientArray)})),c.Rc(81," \u0627\u0636\u0627\u0641\u0629 \u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f "),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.Pc(82,ot,2,1,"div",44),c.Pc(83,ct,2,1,"div",44),c.Pc(84,rt,2,1,"div",44),c.ac(),c.ac(),c.ac(),c.bc(85,"div",45),c.bc(86,"div",15),c.bc(87,"div",2),c.bc(88,"div",46),c.Rc(89," \u0627\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645 \u0628\u0639\u062f \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0642\u0633\u0645 "),c.bc(90,"input",47,48),c.nc("keyup",(function(){c.Ic(t);const n=c.Hc(91);return e.searchItem(n)})),c.ac(),c.ac(),c.ac(),c.bc(92,"div",2),c.bc(93,"div",10),c.bc(94,"div",49),c.bc(95,"ul",50),c.Pc(96,at,2,4,"li",51),c.ac(),c.ac(),c.ac(),c.bc(97,"div",46),c.bc(98,"div",52),c.Pc(99,dt,2,1,"div",53),c.Pc(100,ht,2,1,"ul",54),c.Pc(101,bt,2,1,"ul",54),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(102,"button",55),c.Rc(103," \u062f\u0641\u0639 "),c.ac(),c.ac(),c.ac()}2&t&&(c.Eb(20),c.yc("ngForOf",e.marketers),c.Eb(6),c.yc("ngForOf",e.paymentways),c.Eb(17),c.yc("ngIf",e.serviceTax>-1),c.Eb(2),c.yc("ngIf",e.addItems),c.Eb(1),c.yc("ngIf",e.addItems),c.Eb(1),c.yc("ngIf",e.serviceTax>-1&&e.addItems),c.Eb(1),c.yc("ngIf",e.addItems),c.Eb(1),c.yc("ngIf",e.addItems),c.Eb(5),c.yc("ngIf",e.clientArray.length>=1),c.Eb(28),c.yc("ngIf",e.clientExistName),c.Eb(1),c.yc("ngIf",e.clientExistAddress),c.Eb(1),c.yc("ngIf",e.clientExistPhone),c.Eb(12),c.yc("ngForOf",e.categories[0]),c.Eb(3),c.yc("ngIf",e.offeritems.length>0),c.Eb(1),c.yc("ngIf",e.subs.length>=1),c.Eb(1),c.yc("ngIf",e.items.length>=1&&0==e.offeritems.length))},directives:[i.n,p.e,p.f,p.a,p.d,i.o,p.c],pipes:[i.f],styles:[".highlighted[_ngcontent-%COMP%]{background-color:#e1e9d7!important}.orderoptions[_ngcontent-%COMP%]{text-align:right}.print-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:20px 0;float:right}.print-options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;padding:9px;margin-left:10px;background-color:#4a90e2;border-radius:5px;cursor:pointer;color:#fff}.manage-table[_ngcontent-%COMP%]{padding:0}.manage-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;padding:10px;background-color:#9fa4a7;border:1px solid #eee;border-radius:5px;color:#fff;cursor:pointer}.manage-table[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i.red-arrow[_ngcontent-%COMP%]{padding:5px;background-color:#ef0000;border-radius:50%;display:inline-block;height:25px;width:25px;line-height:15px;text-align:center}.calculator[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-right:0;margin-bottom:10px}.calculator[_ngcontent-%COMP%]   input[type=button][_ngcontent-%COMP%]{width:100%;padding:10px;font-size:15px;font-weight:700;color:#414673}.categories[_ngcontent-%COMP%]{height:240px;border:1px solid #414673;margin-top:15px;background-color:#fff;border-radius:5px}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]{padding:0;height:100%;margin:0;overflow-y:scroll}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding:10px;cursor:pointer;position:relative;text-align:center;width:150px;border-radius:5px;background-color:#e6eaed;color:#414673;font-size:18px;font-weight:700;margin:10px auto auto;transition:all .3s ease-out}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .subcategories[_ngcontent-%COMP%]{position:absolute;right:0;margin:10px 0;background-color:#fff;box-shadow:1px 1px 5px rgba(0,0,0,.5);border-radius:5px;width:100%;padding:0;display:none}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .subcategories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:9px;transition:all .3s ease-out}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .subcategories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{margin-right:5px}.categories[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%]   li.show-sub-list[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{display:block}.items[_ngcontent-%COMP%]{height:240px;border:1px solid #414673;margin-top:15px;background-color:#fff;border-radius:5px}.items[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:5px;height:100%;margin:0;overflow-y:scroll}.items[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-align:center;border-radius:5px;color:#414673;display:inline-block;margin-top:10px;margin-left:10px;width:100px;height:65px;cursor:pointer}.offercontainer[_ngcontent-%COMP%]{height:100%;overflow-y:scroll}.headforoffer[_ngcontent-%COMP%]{height:10px!important;width:100%!important;text-align:right!important;font-size:15px!important;margin-right:8px}.client-list[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]:disabled, .form-control[readonly][_ngcontent-%COMP%]{background-color:#fff}.client-list[_ngcontent-%COMP%]{position:absolute;list-style-type:none;width:91%;margin-top:10px;border-radius:5px;padding:5px;box-shadow:1px 1px 5px rgba(0,0,0,.5);z-index:9999}.client-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;padding:5px;transition:all .3s ease-out}.client-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#eee}"]}),t})(),ft=(()=>{class t{constructor(t){this.http=t,this.categoriesUrl="http://wokhouse.codesroots.com/api/orderdetails/getSellsByCategory.json",this.categoriesUrlByDate="http://wokhouse.codesroots.com/api/orderdetails/getSellsByCategoryByDate.json",this.ExpensesByDay="http://wokhouse.codesroots.com/api/expenses/getDailyExpenses.json",this.ExpensesByDayByDate="http://wokhouse.codesroots.com/api/expenses/getDailyExpensesByDate.json",this.PaymentStaffByDay="http://wokhouse.codesroots.com/api/StaffPayments/getDailyStaffPayments.json",this.EaymentStaffByDayByDate="http://wokhouse.codesroots.com/api/StaffPayments/getDailyStaffPaymentsByDate.json",this.headers=new T.e({"Content-Type":"application/json"}),this.options={headers:this.headers}}getdayreport(t){let e={headers:new T.e({"Content-Type":"application/json"})};return this.http.post(this.categoriesUrl,JSON.stringify(t),e)}getdayreportByDate(t){let e={headers:new T.e({"Content-Type":"application/json"})};return this.http.post(this.categoriesUrlByDate,JSON.stringify(t),e)}ExpensesByDaysDate(t){let e={headers:new T.e({"Content-Type":"application/json"})};return this.http.post(this.ExpensesByDayByDate,JSON.stringify(t),e)}ExpensesByDays(t){let e={headers:new T.e({"Content-Type":"application/json"})};return this.http.post(this.ExpensesByDay,JSON.stringify(t),e)}StaffPaymentsByDaysDate(t){let e={headers:new T.e({"Content-Type":"application/json"})};return this.http.post(this.EaymentStaffByDayByDate,JSON.stringify(t),e)}StaffPaymentsByDays(t){let e={headers:new T.e({"Content-Type":"application/json"})};return this.http.post(this.PaymentStaffByDay,JSON.stringify(t),e)}}return t.\u0275fac=function(e){return new(e||t)(c.jc(T.b))},t.\u0275prov=c.Rb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var mt=n("1kSV");function yt(t,e){if(1&t&&(c.bc(0,"td"),c.Rc(1),c.ac()),2&t){const t=c.qc().$implicit;c.Eb(1),c.Tc(" ",t.item.subcategory.category.name,"")}}function vt(t,e){if(1&t&&(c.bc(0,"td"),c.Rc(1),c.rc(2,"number"),c.ac()),2&t){const t=c.qc().$implicit;c.Eb(1),c.Tc(" ",c.tc(2,1,t.SumTotal,"1.2-2"),"")}}function _t(t,e){if(1&t&&(c.bc(0,"tr",12),c.Pc(1,yt,2,1,"td",13),c.Pc(2,vt,3,4,"td",13),c.ac()),2&t){const t=e.$implicit;c.Eb(1),c.yc("ngIf",null!=t.item.subcategory&&null!=t.item),c.Eb(1),c.yc("ngIf",null!=t.item.subcategory&&null!=t.item)}}function xt(t,e){if(1&t&&(c.bc(0,"tr"),c.bc(1,"td"),c.Rc(2),c.ac(),c.bc(3,"td"),c.Rc(4),c.ac(),c.ac()),2&t){const t=e.$implicit;c.Eb(2),c.Tc(" \u0628\u064a\u0639 \u0627\u0644\u0639\u0631\u0648\u0636 \u0641\u064a ",t.key,""),c.Eb(2),c.Tc(" ",t.value,"")}}function Pt(t,e){1&t&&(c.bc(0,"td"),c.Rc(1," \u062f\u0644\u064a\u0641\u0631\u064a "),c.ac())}function Ct(t,e){1&t&&(c.bc(0,"td"),c.Rc(1," \u0635\u0627\u0644\u0629 "),c.ac())}function kt(t,e){if(1&t){const t=c.cc();c.bc(0,"tr",9),c.bc(1,"td"),c.Rc(2),c.ac(),c.bc(3,"td"),c.Rc(4),c.ac(),c.Pc(5,Pt,2,0,"td",10),c.Pc(6,Ct,2,0,"td",10),c.bc(7,"td",11),c.Rc(8),c.rc(9,"date"),c.ac(),c.bc(10,"td"),c.Rc(11),c.ac(),c.bc(12,"td",11),c.Rc(13),c.ac(),c.bc(14,"td"),c.bc(15,"button",12),c.nc("click",(function(){c.Ic(t);const n=e.index;return c.qc(2).printAllOrder(n)})),c.Wb(16,"i",13),c.ac(),c.ac(),c.ac()}if(2&t){const t=e.$implicit;c.Eb(2),c.Sc(t.id),c.Eb(2),c.Tc("",t.total," \u062c.\u0645"),c.Eb(1),c.yc("ngIf",1==t.typeorder),c.Eb(1),c.yc("ngIf",0==t.typeorder),c.Eb(2),c.Sc(c.tc(9,7,t.modified,"H:m")),c.Eb(3),c.Tc("",t.taxes," \u062c.\u0645"),c.Eb(2),c.Tc(" ",t.service," \u062c.\u0645 ")}}function Ot(t,e){if(1&t&&(c.bc(0,"tbody",7),c.Pc(1,kt,17,10,"tr",8),c.ac()),2&t){const t=c.qc();c.Eb(1),c.yc("ngForOf",t.addedorders)}}const St=[{path:"",component:l,children:[{path:"orders/:table_id/:order_id/:check",component:R},{path:"orders/:table_id/:order_id",component:R},{path:"tables",component:L},{path:"delivery",component:gt},{path:"report",component:(()=>{class t{constructor(t,e,n){this.service=t,this.calendar=e,this.datePipe=n,this.isExpresesVisible=!1,this.categories=[],d.api.setSha256Type(t=>Object(u.sha256)(t)),d.api.setPromiseType(t=>new Promise(t)),d.websocket.connect().then((function(){return d.printers.find("HP LaserJet 2420")})).then((function(t){console.log(t)})).catch((function(t){console.error(t)}))}locationsSum(){return this.categories.map(t=>t.SumTotal).reduce((t,e)=>t+e,0)}selectToday(){this.model=this.calendar.getToday()}ngOnInit(){this.getdayreport()}getdayreport(){var t=[];t.push({branch_id:localStorage.getItem("branch")}),this.service.getdayreport(t).subscribe(t=>{this.maindata=t,this.alltotal=Math.round(100*this.maindata.allsales[0].SumTotal)/100,this.services=Math.round(100*this.maindata.allsales[0].TaxesTotal)/100,this.taxes=Math.round(100*this.maindata.allsales[0].ServiceTotal)/100,this.discount=Math.round(100*this.maindata.allsales[0].DiscountTotal)/100,console.log(this.maindata.offerdetailsarray),this.categories=this.maindata.query}),this.service.ExpensesByDays(t).subscribe(t=>{console.log(t),this.expenses=Math.round(100*t.query[0].SumTotal)/100}),this.service.StaffPaymentsByDays(t).subscribe(t=>{console.log(t),this.staffpayments=Math.round(100*t.query[0].SumTotal)/100})}ServiceChanged(t){this.date=t.target.value;var e=[];e.push({date:this.date,branch_id:localStorage.getItem("branch")}),this.service.getdayreportByDate(e).subscribe(t=>{this.maindata=t,this.alltotal=Math.round(100*this.maindata.allsales[0].SumTotal)/100,this.services=Math.round(100*this.maindata.allsales[0].TaxesTotal)/100,this.taxes=Math.round(100*this.maindata.allsales[0].ServiceTotal)/100,this.discount=Math.round(100*this.maindata.allsales[0].DiscountTotal)/100,console.log(this.discount),this.categories=this.maindata.query}),this.service.ExpensesByDaysDate(e).subscribe(t=>{console.log(t),this.expenses=Math.round(100*t.query[0].SumTotal)/100}),this.service.StaffPaymentsByDaysDate(e).subscribe(t=>{console.log(t),this.staffpayments=Math.round(100*t.query[0].SumTotal)/100})}printAllOrder(t){null==this.date&&(this.date=this.datePipe.transform(new Date,"yyyy-MM-dd hh:mm"));var e=[];this.categories.forEach((function(t){e.push(t.item.subcategory.category.name+"                      "+t.SumTotal+"\n")})),console.log(e.toString().replace(/,/g,""));var n=[{type:"raw",format:"image",data:"assets/images/62123932_340200260263485_2674160429353140224_n (2).png",options:{encoding:"IBM864",language:"ESCPOS",dotDensity:"double"}},"\x1b@","\x1ba2","\u0645\u0628\u064a\u0639\u0627\u062a  : "+Math.round(100*this.maindata.allsales[0].SumTotal)/100+"\n","\n","\n","\n",this.date+"\n","\n\u0627\u0644\u0642\u0633\u0645                      \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a\n","\n","\n","------------------------------------------","\n",e.toString().replace(/,/g,""),"\n","\n","------------------------------------------","\n","\n","\n","\x1ba0","\n\n\n\n\n\x1bi","\x10\x14\x01\0\x05"];this.printers=[],console.log("AppComponent____________");const i=d.configs.create(localStorage.getItem("printer").replace(/['"]+/g,""),{encoding:"IBM864"});return d.print(i,n).catch((function(t){console.error(t)}))}showProducts(){this.isExpresesVisible=!0}handleCancelisExpresesVisible(){this.isExpresesVisible=!1}}return t.\u0275fac=function(e){return new(e||t)(c.Vb(ft),c.Vb(mt.a),c.Vb(i.e))},t.\u0275cmp=c.Pb({type:t,selectors:[["app-final-report"]],features:[c.Db([i.e])],decls:62,vars:36,consts:[[1,"container"],[1,"row"],[1,"col-md-6"],["data-format","Y-m-d","type","date",3,"change"],[2,"text-align","right"],[1,"fas","fa-print",3,"click"],[1,"row","totalsales"],[1,"col-md-12"],[1,"sumkitchen"],[3,"click"],["class","col-md-4 cateogrysales",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"col-md-4","cateogrysales"],[4,"ngIf"]],template:function(t,e){1&t&&(c.bc(0,"div",0),c.bc(1,"div",1),c.bc(2,"div",2),c.bc(3,"input",3),c.nc("change",(function(t){return e.ServiceChanged(t)})),c.ac(),c.ac(),c.bc(4,"div",2),c.bc(5,"li",4),c.bc(6,"i",5),c.nc("click",(function(){return e.printAllOrder("BIXOLON SRP-330")})),c.ac(),c.Rc(7," \u0637\u0628\u0627\u0639\u0647 \u0627\u0644\u0643\u0627\u0634\u064a\u0631 "),c.ac(),c.ac(),c.ac(),c.bc(8,"div",6),c.Wb(9,"div",7),c.bc(10,"table",7),c.bc(11,"tr"),c.bc(12,"th"),c.Rc(13,"\u0645\u0628\u064a\u0639\u0627\u062a"),c.ac(),c.bc(14,"th"),c.Rc(15),c.rc(16,"number"),c.ac(),c.ac(),c.bc(17,"tr",8),c.bc(18,"td"),c.Rc(19,"\u062e\u062f\u0645\u0629"),c.ac(),c.bc(20,"td"),c.Rc(21),c.rc(22,"number"),c.ac(),c.ac(),c.bc(23,"tr",8),c.bc(24,"td"),c.Rc(25,"\u0636\u0631\u064a\u0628\u0629"),c.ac(),c.bc(26,"td"),c.Rc(27),c.rc(28,"number"),c.ac(),c.ac(),c.bc(29,"tr",8),c.bc(30,"td"),c.Rc(31,"\u0645\u0628\u064a\u0639\u0627\u062a \u0627\u0644\u0645\u0637\u0628\u062e"),c.ac(),c.bc(32,"td"),c.Rc(33),c.rc(34,"number"),c.ac(),c.ac(),c.bc(35,"tr",8),c.bc(36,"td"),c.Rc(37,"\u0645\u0635\u0627\u0631\u064a\u0641 "),c.ac(),c.bc(38,"td"),c.Rc(39),c.rc(40,"number"),c.ac(),c.ac(),c.bc(41,"tr",8),c.bc(42,"td",9),c.nc("click",(function(){return e.showProducts()})),c.Rc(43,"\u0627\u0644\u0633\u0644\u0641"),c.ac(),c.bc(44,"td"),c.Rc(45),c.rc(46,"number"),c.ac(),c.ac(),c.bc(47,"tr",8),c.bc(48,"td"),c.Rc(49,"\u0627\u0644\u0635\u0627\u0641\u064a"),c.ac(),c.bc(50,"td"),c.Rc(51),c.rc(52,"number"),c.ac(),c.ac(),c.bc(53,"tr"),c.bc(54,"td"),c.Rc(55,"\u062e\u0635\u0648\u0645\u0627\u062a"),c.ac(),c.bc(56,"td"),c.Rc(57),c.rc(58,"number"),c.ac(),c.ac(),c.Pc(59,_t,3,2,"tr",10),c.Pc(60,xt,5,2,"tr",11),c.rc(61,"keyvalue"),c.ac(),c.ac(),c.ac()),2&t&&(c.Eb(15),c.Sc(c.tc(16,10,e.alltotal,"1.2-2")),c.Eb(6),c.Sc(c.tc(22,13,e.services,"1.2-2")),c.Eb(6),c.Sc(c.tc(28,16,e.taxes,"1.2-2")),c.Eb(6),c.Sc(c.tc(34,19,e.locationsSum(),"1.2-2")),c.Eb(6),c.Sc(c.tc(40,22,e.expenses,"1.2-2")),c.Eb(6),c.Sc(c.tc(46,25,e.staffpayments,"1.2-2")),c.Eb(6),c.Sc(c.tc(52,28,e.alltotal-e.expenses-e.staffpayments,"1.2-2")),c.Eb(6),c.Sc(c.tc(58,31,e.discount,"1.2-2")),c.Eb(2),c.yc("ngForOf",e.categories),c.Eb(1),c.yc("ngForOf",c.sc(61,34,e.maindata.offerdetailsarray)))},directives:[p.f,p.a,p.d,i.n,i.o],pipes:[i.f,i.i],styles:[".totalsales[_ngcontent-%COMP%]{background-color:#fff!important;height:500px;border-radius:10px;text-align:center;font-size:20px;padding-top:20px}.cateogrysales[_ngcontent-%COMP%]{border:1px solid #d3d3d3;background-color:salmon}.sumkitchen[_ngcontent-%COMP%]{background-color:#f4a460}table[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{border:1px solid #d3d3d3}"]}),t})()},{path:"myorders",component:(()=>{class t{constructor(t){this.service=t,this.addedorders=[],d.api.setSha256Type(t=>Object(u.sha256)(t)),d.api.setPromiseType(t=>new Promise(t)),d.websocket.connect().then((function(){return d.printers.find("HP LaserJet 2420")})).then((function(t){console.log(t,"lklkl")})).catch((function(t){console.error(t)}))}ngOnInit(){this.service.getMyOrderData().subscribe(t=>{this.addedorders=t.data,console.log(this.addedorders)})}printAllOrder(t){var e=[];this.addedorders[t].orderdetails.forEach((function(t){console.log(t),e.push(t.item.name+"         \x1ba0",+t.itemtotal+"       \x1ba0",+t.itemamount+"\n")}));var n=[{type:"raw",format:"image",data:"assets/images/62123932_340200260263485_2674160429353140224_n (2).png",options:{encoding:"IBM864",language:"ESCPOS",dotDensity:"double"}},"\x1b@","\x1ba1","\x1bE\r"," \u0637\u0644\u0628 \u0631\u0642\u0645   : "+this.addedorders[t].id+"\n","  \u0637\u0631\u0627\u0628\u064a\u0632\u0629 \u0631\u0642\u0645 : "+this.addedorders[t].table_id+"\n","\n","\n\x1ba2","\u0627\u0644\u0627\u0633\u0645                      \u0627\u0644\u0643\u0645\u064a\u0629     \u0627\u0644\u0633\u0639\u0631\n","\n","\n","------------------------------------------","\n",e.toString().replace(/,/g,""),"\n","\n","\x1ba0","\n","Taxes    "+Math.round(this.addedorders[t].service)+"\n","\n","DisCount    "+Math.round(this.addedorders[t].discount)+"%\n","\n","Service   "+Math.round(100*this.addedorders[t].taxes)/100+"\n","\n","Total   "+Math.round(100*this.addedorders[t].total)/100+"\n","\n","\n","\n","------------------------------------------","\n","\n","\n","\x1ba0","\n\n\n\n\n\x1bi","\x10\x14\x01\0\x05"];console.log("AppComponent____________");const i=d.configs.create(localStorage.getItem("printer").replace(/['"]+/g,""),{encoding:"IBM864"});return d.print(i,n).then((function(t){})).catch((function(t){alert("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0642\u0645 \u0628\u0639\u0645\u0644 \u0627\u0639\u0627\u062f\u0629 \u0644\u0628\u0631\u0646\u0627\u0645\u062c qz tray"),console.error(t)}))}}return t.\u0275fac=function(e){return new(e||t)(c.Vb(h.a))},t.\u0275cmp=c.Pb({type:t,selectors:[["app-myorders"]],decls:23,vars:1,consts:[[1,"container"],[1,"section-background",2,"padding","20px","background-color","#e6eaed"],[1,"row"],[1,"table-responsive",2,"height","256px"],[1,"table","text-center"],[2,"background-color","#d8d8d8"],["style","background-color: #fff",4,"ngIf"],[2,"background-color","#fff"],["style","cursor: pointer; border-bottom: 1px solid #f5f7f8;",4,"ngFor","ngForOf"],[2,"cursor","pointer","border-bottom","1px solid #f5f7f8"],[4,"ngIf"],[1,"print-item"],[1,"btn","btn-warning",2,"border-radius","50%","margin-left","10px","height","35px","width","35px","text-align","center","padding","0",3,"click"],[1,"fas","fa-highlighter",2,"pointer-events","none"]],template:function(t,e){1&t&&(c.bc(0,"div",0),c.bc(1,"div",1),c.bc(2,"div",2),c.bc(3,"div",3),c.bc(4,"table",4),c.bc(5,"thead",5),c.bc(6,"tr"),c.bc(7,"th"),c.Rc(8,"\u0631\u0642\u0645 \u0627\u0644\u0637\u0644\u0628"),c.ac(),c.bc(9,"th"),c.Rc(10,"\u0633\u0639\u0631"),c.ac(),c.bc(11,"th"),c.Rc(12,"\u0646\u0648\u0639 \u0627\u0644\u0637\u0644\u0628"),c.ac(),c.bc(13,"th"),c.Rc(14,"\u0627\u0644\u062a\u0627\u0631\u064a\u062e \u0648\u0627\u0644\u0648\u0642\u062a"),c.ac(),c.bc(15,"th"),c.Rc(16,"\u0627\u0644\u0636\u0631\u064a\u0628\u0629"),c.ac(),c.bc(17,"th"),c.Rc(18,"\u0636\u0631\u064a\u0628\u0629 \u062e\u062f\u0645\u0629"),c.ac(),c.bc(19,"th"),c.Rc(20,"\u0637\u0628\u0627\u0639\u0629"),c.ac(),c.Wb(21,"th"),c.ac(),c.ac(),c.Pc(22,Ot,2,1,"tbody",6),c.ac(),c.ac(),c.ac(),c.ac(),c.ac()),2&t&&(c.Eb(22),c.yc("ngIf",e.addedorders))},directives:[p.e,p.f,p.a,p.d,i.o,p.c,i.n],pipes:[i.e],styles:[""]}),t})()}]}];let wt=(()=>{class t{}return t.\u0275mod=c.Tb({type:t}),t.\u0275inj=c.Sb({factory:function(e){return new(e||t)},imports:[[o.h.forChild(St)],o.h]}),t})();var It=n("dEAy"),Mt=n("0nng");n.d(e,"DashboardModule",(function(){return At}));let At=(()=>{class t{}return t.\u0275mod=c.Tb({type:t}),t.\u0275inj=c.Sb({factory:function(e){return new(e||t)},imports:[[i.c,It.a,Mt.a,wt]]}),t})()},bCcq:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__("PDX0"),ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});var createOutputMethod=function(t,e){return function(n){return new Sha256(e,!0).update(n)[t]()}},createMethod=function(t){var e=createOutputMethod("hex",t);NODE_JS&&(e=nodeWrap(e,t)),e.create=function(){return new Sha256(t)},e.update=function(t){return e.create().update(t)};for(var n=0;n<OUTPUT_TYPES.length;++n){var i=OUTPUT_TYPES[n];e[i]=createOutputMethod(i,t)}return e},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(t){if("string"==typeof t)return crypto.createHash(algorithm).update(t,"utf8").digest("hex");if(null==t)throw new Error(ERROR);return t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(t)).digest("hex"):method(t)};return nodeMethod},createHmacOutputMethod=function(t,e){return function(n,i){return new HmacSha256(n,e,!0).update(i)[t]()}},createHmacMethod=function(t){var e=createHmacOutputMethod("hex",t);e.create=function(e){return new HmacSha256(e,t)},e.update=function(t,n){return e.create(t).update(n)};for(var n=0;n<OUTPUT_TYPES.length;++n){var i=OUTPUT_TYPES[n];e[i]=createHmacOutputMethod(i,t)}return e};function Sha256(t,e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}function HmacSha256(t,e,n){var i,o=typeof t;if("string"===o){var c,r=[],a=t.length,s=0;for(i=0;i<a;++i)(c=t.charCodeAt(i))<128?r[s++]=c:c<2048?(r[s++]=192|c>>6,r[s++]=128|63&c):c<55296||c>=57344?(r[s++]=224|c>>12,r[s++]=128|c>>6&63,r[s++]=128|63&c):(c=65536+((1023&c)<<10|1023&t.charCodeAt(++i)),r[s++]=240|c>>18,r[s++]=128|c>>12&63,r[s++]=128|c>>6&63,r[s++]=128|63&c);t=r}else{if("object"!==o)throw new Error(ERROR);if(null===t)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||ARRAY_BUFFER&&ArrayBuffer.isView(t)))throw new Error(ERROR)}t.length>64&&(t=new Sha256(e,!0).update(t).array());var l=[],d=[];for(i=0;i<64;++i){var u=t[i]||0;l[i]=92^u,d[i]=54^u}Sha256.call(this,e,n),this.update(d),this.oKeyPad=l,this.inner=!0,this.sharedMemory=n}Sha256.prototype.update=function(t){if(!this.finalized){var e,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(ERROR);if(null===t)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||ARRAY_BUFFER&&ArrayBuffer.isView(t)))throw new Error(ERROR);e=!0}for(var i,o,c=0,r=t.length,a=this.blocks;c<r;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)for(o=this.start;c<r&&o<64;++c)a[o>>2]|=t[c]<<SHIFT[3&o++];else for(o=this.start;c<r&&o<64;++c)(i=t.charCodeAt(c))<128?a[o>>2]|=i<<SHIFT[3&o++]:i<2048?(a[o>>2]|=(192|i>>6)<<SHIFT[3&o++],a[o>>2]|=(128|63&i)<<SHIFT[3&o++]):i<55296||i>=57344?(a[o>>2]|=(224|i>>12)<<SHIFT[3&o++],a[o>>2]|=(128|i>>6&63)<<SHIFT[3&o++],a[o>>2]|=(128|63&i)<<SHIFT[3&o++]):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++c)),a[o>>2]|=(240|i>>18)<<SHIFT[3&o++],a[o>>2]|=(128|i>>12&63)<<SHIFT[3&o++],a[o>>2]|=(128|i>>6&63)<<SHIFT[3&o++],a[o>>2]|=(128|63&i)<<SHIFT[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=a[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=EXTRA[3&e],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var t,e,n,i,o,c,r=this.h0,a=this.h1,s=this.h2,l=this.h3,d=this.h4,u=this.h5,h=this.h6,p=this.h7,b=this.blocks;for(t=16;t<64;++t)b[t]=b[t-16]+(((e=b[t-15])>>>7|e<<25)^(e>>>18|e<<14)^e>>>3)+b[t-7]+(((e=b[t-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)<<0;for(c=a&s,t=0;t<64;t+=4)this.first?(this.is224?(n=300032,p=(e=b[0]-1413257819)-150054599<<0,l=e+24177077<<0):(n=704751109,p=(e=b[0]-210244248)-1521486534<<0,l=e+143694565<<0),this.first=!1):(p=l+(e=p+((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&u^~d&h)+K[t]+b[t])<<0,l=e+(((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+((n=r&a)^r&s^c))<<0),h=s+(e=h+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&d^~p&u)+K[t+1]+b[t+1])<<0,s=e+(((l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10))+((i=l&r)^l&a^n))<<0,u=a+(e=u+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&p^~h&d)+K[t+2]+b[t+2])<<0,a=e+(((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+((o=s&l)^s&r^i))<<0,d=r+(e=d+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))+(u&h^~u&p)+K[t+3]+b[t+3])<<0,r=e+(((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+((c=a&s)^a&l^o))<<0;this.h0=this.h0+r<<0,this.h1=this.h1+a<<0,this.h2=this.h2+s<<0,this.h3=this.h3+l<<0,this.h4=this.h4+d<<0,this.h5=this.h5+u<<0,this.h6=this.h6+h<<0,this.h7=this.h7+p<<0},Sha256.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,i=this.h3,o=this.h4,c=this.h5,r=this.h6,a=this.h7,s=HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]+HEX_CHARS[c>>28&15]+HEX_CHARS[c>>24&15]+HEX_CHARS[c>>20&15]+HEX_CHARS[c>>16&15]+HEX_CHARS[c>>12&15]+HEX_CHARS[c>>8&15]+HEX_CHARS[c>>4&15]+HEX_CHARS[15&c]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r];return this.is224||(s+=HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]),s},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,i=this.h3,o=this.h4,c=this.h5,r=this.h6,a=this.h7,s=[t>>24&255,t>>16&255,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24&255,n>>16&255,n>>8&255,255&n,i>>24&255,i>>16&255,i>>8&255,255&i,o>>24&255,o>>16&255,o>>8&255,255&o,c>>24&255,c>>16&255,c>>8&255,255&c,r>>24&255,r>>16&255,r>>8&255,255&r];return this.is224||s.push(a>>24&255,a>>16&255,a>>8&255,255&a),s},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=(function(){return exports}).call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()},cDTu:function(t,e,n){"use strict";var i,o;void 0===(o="function"==typeof(i=function(){Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))}),void 0===String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(t){return this}});var t={VERSION:"2.1.3",DEBUG:!1,log:{trace:function(){t.DEBUG&&console.log.apply(console,arguments)},info:function(){console.info.apply(console,arguments)},warn:function(){console.warn.apply(console,arguments)},allay:function(){t.DEBUG&&console.warn.apply(console,arguments)},error:function(){console.error.apply(console,arguments)}},streams:{serial:"SERIAL",usb:"USB",hid:"HID",printer:"PRINTER",file:"FILE",socket:"SOCKET"},websocket:{connection:null,connectConfig:{host:["localhost","localhost.qz.io"],hostIndex:0,usingSecure:!0,protocol:{secure:"wss://",insecure:"ws://"},port:{secure:[8181,8282,8383,8484],insecure:[8182,8283,8384,8485],portIndex:0},keepAlive:60,retries:0,delay:0},setup:{findConnection:function(e,n,i){if(e.port.secure.length)e.port.insecure.length||e.usingSecure||(t.log.trace("No insecure ports specified - forcing secure connection"),e.usingSecure=!0);else{if(!e.port.insecure.length)return void i(new Error("No ports have been specified to connect over"));e.usingSecure&&(t.log.error("No secure ports specified - forcing insecure connection"),e.usingSecure=!1)}var o,c=function(){if(e.port.portIndex++,e.usingSecure&&e.port.portIndex>=e.port.secure.length||!e.usingSecure&&e.port.portIndex>=e.port.insecure.length){if(e.hostIndex>=e.host.length-1)return void i(new Error("Unable to establish connection with QZ"));e.hostIndex++,e.port.portIndex=0}t.websocket.setup.findConnection(e,n,i)};o=e.usingSecure?e.protocol.secure+e.host[e.hostIndex]+":"+e.port.secure[e.port.portIndex]:e.protocol.insecure+e.host[e.hostIndex]+":"+e.port.insecure[e.port.portIndex];try{t.log.trace("Attempting connection",o),t.websocket.connection=new t.tools.ws(o)}catch(r){return t.log.error(r),void c()}null!=t.websocket.connection?(t.websocket.connection.established=!1,t.websocket.connection.onopen=function(c){if(!t.websocket.connection.established&&(t.log.trace(c),t.log.info("Established connection with QZ Tray on "+o),t.websocket.setup.openConnection({resolve:n,reject:i}),e.keepAlive>0))var r=setInterval((function(){t.tools.isActive()?t.websocket.connection.send("ping"):clearInterval(r)}),1e3*e.keepAlive)},t.websocket.connection.onclose=function(){t.websocket.connection&&"undefined"!=typeof navigator&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&t.websocket.connection.onerror()},t.websocket.connection.onerror=function(e){t.log.trace(e),t.websocket.connection=null,c()}):i(new Error("Unable to create a websocket connection"))},openConnection:function(e){function n(n){void 0===n&&(n=null),i.api.getVersion().then((function(e){t.websocket.connection.version=e,t.websocket.connection.semver=e.toLowerCase().replace(/-rc\./g,"-rc").split(/[\\+\\.-]/g);for(var n=0;n<t.websocket.connection.semver.length;n++){try{if(3==n&&0==t.websocket.connection.semver[n].toLowerCase().indexOf("rc")){t.websocket.connection.semver[n]=-t.websocket.connection.semver[n].replace(/\D/g,"");continue}t.websocket.connection.semver[n]=parseInt(t.websocket.connection.semver[n])}catch(i){}t.websocket.connection.semver.length<4&&(t.websocket.connection.semver[3]=0)}t.compatible.algorithm(!0)})).then((function(){t.websocket.connection.sendData({certificate:n,promise:e})}))}t.websocket.connection.established=!0,t.websocket.connection.onclose=function(e){for(var n in t.log.trace(e),t.websocket.connection=null,t.websocket.callClose(e),t.log.info("Closed connection with QZ Tray"),t.websocket.pendingCalls)t.websocket.pendingCalls.hasOwnProperty(n)&&t.websocket.pendingCalls[n].reject(new Error("Connection closed before response received"));null!=this.promise&&this.promise.resolve()},t.websocket.connection.onerror=function(e){t.websocket.callError(e)},t.websocket.connection.sendData=function(e){t.log.trace("Preparing object for websocket",e),null==e.timestamp&&(e.timestamp=Date.now(),"number"!=typeof e.timestamp&&(e.timestamp=(new Date).getTime())),null!=e.promise&&(e.uid=t.websocket.setup.newUID(),t.websocket.pendingCalls[e.uid]=e.promise),e.signAlgorithm=t.security.signAlgorithm,e.position={x:"undefined"!=typeof screen?(screen.availWidth||screen.width)/2+(screen.left||screen.availLeft):0,y:"undefined"!=typeof screen?(screen.availHeight||screen.height)/2+(screen.top||screen.availTop):0};try{if(null!=e.call&&null==e.signature){var n=t.tools.hash(t.tools.stringify({call:e.call,params:e.params,timestamp:e.timestamp}));n.then||(n=t.tools.promise((function(t){t(n)}))),n.then((function(e){return t.security.callSign(e)})).then((function(n){t.log.trace("Signature for call",n),e.signature=n,t.signContent=void 0,t.websocket.connection.send(t.tools.stringify(e))}))}else t.log.trace("Signature for call",e.signature),t.websocket.connection.send(t.tools.stringify(e))}catch(i){t.log.error(i),null!=e.promise&&(e.promise.reject(i),delete t.websocket.pendingCalls[e.uid])}},t.websocket.connection.onmessage=function(e){var n=JSON.parse(e.data);if(null!=n.uid){t.log.trace("Received response from websocket",n);var i=t.websocket.pendingCalls[n.uid];null==i?t.log.allay("No promise found for returned response"):null!=n.error?i.reject(new Error(n.error)):i.resolve(n.result),delete t.websocket.pendingCalls[n.uid]}else if(null==n.type)t.websocket.connection.close(4003,"Connected to incompatible QZ Tray version");else switch(n.type){case t.streams.serial:n.event||(n.event=JSON.stringify({portName:n.key,output:n.data})),t.serial.callSerial(JSON.parse(n.event));break;case t.streams.socket:t.socket.callSocket(JSON.parse(n.event));break;case t.streams.usb:n.event||(n.event=JSON.stringify({vendorId:n.key[0],productId:n.key[1],output:n.data})),t.usb.callUsb(JSON.parse(n.event));break;case t.streams.hid:t.hid.callHid(JSON.parse(n.event));break;case t.streams.printer:t.printers.callPrinter(JSON.parse(n.event));break;case t.streams.file:t.file.callFile(JSON.parse(n.event));break;default:t.log.allay("Cannot determine stream type for callback",n)}},t.security.callCert().then(n).catch(n)},newUID:function(){return(new Array(7).join("0")+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)}},dataPromise:function(e,n,i,o){return t.tools.promise((function(c,r){t.websocket.connection.sendData({call:e,promise:{resolve:c,reject:r},params:n,signature:i,timestamp:o})}))},pendingCalls:{},errorCallbacks:[],callError:function(e){if(Array.isArray(t.websocket.errorCallbacks))for(var n=0;n<t.websocket.errorCallbacks.length;n++)t.websocket.errorCallbacks[n](e);else t.websocket.errorCallbacks(e)},closedCallbacks:[],callClose:function(e){if(Array.isArray(t.websocket.closedCallbacks))for(var n=0;n<t.websocket.closedCallbacks.length;n++)t.websocket.closedCallbacks[n](e);else t.websocket.closedCallbacks(e)}},printing:{defaultConfig:{bounds:null,colorType:"color",copies:1,density:0,duplex:!1,fallbackDensity:null,interpolation:"bicubic",jobName:null,legacy:!1,margins:0,orientation:null,paperThickness:null,printerTray:null,rasterize:!1,rotation:0,scaleContent:!0,size:null,units:"in",altPrinting:!1,encoding:null,spool:null}},serial:{serialCallbacks:[],callSerial:function(e){if(Array.isArray(t.serial.serialCallbacks))for(var n=0;n<t.serial.serialCallbacks.length;n++)t.serial.serialCallbacks[n](e);else t.serial.serialCallbacks(e)}},socket:{socketCallbacks:[],callSocket:function(e){if(Array.isArray(t.socket.socketCallbacks))for(var n=0;n<t.socket.socketCallbacks.length;n++)t.socket.socketCallbacks[n](e);else t.socket.socketCallbacks(e)}},usb:{usbCallbacks:[],callUsb:function(e){if(Array.isArray(t.usb.usbCallbacks))for(var n=0;n<t.usb.usbCallbacks.length;n++)t.usb.usbCallbacks[n](e);else t.usb.usbCallbacks(e)}},hid:{hidCallbacks:[],callHid:function(e){if(Array.isArray(t.hid.hidCallbacks))for(var n=0;n<t.hid.hidCallbacks.length;n++)t.hid.hidCallbacks[n](e);else t.hid.hidCallbacks(e)}},printers:{printerCallbacks:[],callPrinter:function(e){if(Array.isArray(t.printers.printerCallbacks))for(var n=0;n<t.printers.printerCallbacks.length;n++)t.printers.printerCallbacks[n](e);else t.printers.printerCallbacks(e)}},file:{fileCallbacks:[],callFile:function(e){if(Array.isArray(t.file.fileCallbacks))for(var n=0;n<t.file.fileCallbacks.length;n++)t.file.fileCallbacks[n](e);else t.file.fileCallbacks(e)}},security:{certHandler:function(t,e){e()},callCert:function(){return"function"==typeof t.security.certHandler.then||"AsyncFunction"===t.security.certHandler.constructor.name?t.security.certHandler():t.tools.promise(t.security.certHandler)},signatureFactory:function(){return function(t){t()}},callSign:function(e){return"function"==typeof t.security.signatureFactory.then||"AsyncFunction"===t.security.signatureFactory.constructor.name?t.security.signatureFactory(e):t.tools.promise(t.security.signatureFactory(e))},signAlgorithm:"SHA1"},tools:{promise:function(e){return"undefined"!=typeof RSVP?new RSVP.Promise(e):"undefined"!=typeof Promise?new Promise(e):void t.log.error("Promise/A+ support is required.  See qz.api.setPromiseType(...)")},stringify:function(t){var e=Array.prototype.toJSON;delete Array.prototype.toJSON;var n=JSON.stringify(t);return e&&(Array.prototype.toJSON=e),n},hash:function(e){return"undefined"!=typeof Sha256?Sha256.hash(e):t.SHA.hash(e)},ws:"undefined"!=typeof WebSocket?WebSocket:null,absolute:function(t){if("undefined"!=typeof window&&"function"==typeof document.createElement){var e=document.createElement("a");return e.href=t,e.href}return n(4).resolve(t),t},relative:function(e){for(var n=0;n<e.length;n++)if(e[n].constructor===Object){var i=!1;0===e[n].data.search(/data:image\/\w+;base64,/)?(e[n].flavor="base64",e[n].data=e[n].data.replace(/^data:image\/\w+;base64,/,"")):e[n].flavor?["FILE","XML"].indexOf(e[n].flavor.toUpperCase())>-1&&(i=!0):e[n].format&&["HTML","IMAGE","PDF","FILE","XML"].indexOf(e[n].format.toUpperCase())>-1?i=!0:e[n].type&&(["PIXEL","IMAGE","PDF"].indexOf(e[n].type.toUpperCase())>-1&&!e[n].format||["HTML","PDF"].indexOf(e[n].type.toUpperCase())>-1&&(!e[n].format||"FILE"===e[n].format.toUpperCase()))&&(i=!0),i&&(e[n].data=t.tools.absolute(e[n].data)),e[n].options&&"string"==typeof e[n].options.overlay&&(e[n].options.overlay=t.tools.absolute(e[n].options.overlay))}},extend:function(e){"object"!=typeof e&&(e={});for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var o in i)if(i.hasOwnProperty(o)){if(e===i[o])continue;var c;i[o]&&i[o].constructor&&i[o].constructor===Object?(c=Array.isArray(i[o])?e[o]||[]:e[o]||{},e[o]=t.tools.extend(c,i[o])):void 0!==i[o]&&(e[o]=i[o])}}return e},versionCompare:function(e,n,i,o){if(t.tools.assertActive()){var c=t.websocket.connection.semver;return c[0]!=e?c[0]-e:null!=n&&c[1]!=n?c[1]-n:null!=i&&c[2]!=i?c[2]-i:null!=o&&c.length>3&&c[3]!=o?Number.isInteger(c[3])&&Number.isInteger(o)?c[3]-o:c[3].toString().localeCompare(o.toString()):0}},isVersion:function(e,n,i,o){return 0==t.tools.versionCompare(e,n,i,o)},isActive:function(){return null!=t.websocket.connection&&t.websocket.connection.established},assertActive:function(){if(t.tools.isActive())return!0;throw new Error("A connection to QZ has not been established yet")}},compatible:{data:function(e){if(t.tools.isVersion(2,0)){t.log.trace("Converting print data to v2.0 for "+t.websocket.connection.version);for(var n=0;n<e.length;n++)e[n].constructor===Object&&(e[n].type&&"RAW"===e[n].type.toUpperCase()&&e[n].format&&"IMAGE"===e[n].format.toUpperCase()&&(e[n].flavor&&"BASE64"===e[n].flavor.toUpperCase()&&(e[n].data="data:image/compat;base64,"+e[n].data),e[n].flavor="IMAGE"),(e[n].type&&"RAW"===e[n].type.toUpperCase()||e[n].format&&"COMMAND"===e[n].format.toUpperCase())&&(e[n].format="RAW"),e[n].type=e[n].format,e[n].format=e[n].flavor,delete e[n].flavor)}},config:function(e,n){return t.tools.isVersion(2,0)&&(n.rasterize||(e.rasterize=!0)),t.tools.versionCompare(2,1,2,11)<0&&e.spool&&(e.spool.size&&(e.perSpool=e.spool.size,delete e.spool.size),e.spool.end&&(e.endOfDoc=e.spool.end,delete e.spool.end),delete e.spool),e},networking:function(e,n,i,o,c){return t.tools.isVersion(2,0)?t.tools.promise((function(r,a){t.websocket.dataPromise("websocket.getNetworkInfo",{hostname:e,port:n},i,o).then((function(t){r(void 0!==c?c(t):t)}),a)})):t.tools.promise((function(c,r){t.websocket.dataPromise("networking.device",{hostname:e,port:n},i,o).then((function(t){c({ipAddress:t.ip,macAddress:t.mac})}),r)}))},algorithm:function(e){return!t.tools.isActive()||!t.tools.isVersion(2,0)||(e||t.log.warn("Connected to an older version of QZ, alternate signature algorithms are not supported"),!1)}},SHA:{hash:function(e){e=e.utf8Encode()+String.fromCharCode(128);for(var n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],o=Math.ceil((e.length/4+2)/16),c=new Array(o),r=0;r<o;r++){c[r]=new Array(16);for(var a=0;a<16;a++)c[r][a]=e.charCodeAt(64*r+4*a)<<24|e.charCodeAt(64*r+4*a+1)<<16|e.charCodeAt(64*r+4*a+2)<<8|e.charCodeAt(64*r+4*a+3)}c[o-1][14]=8*(e.length-1)/Math.pow(2,32),c[o-1][14]=Math.floor(c[o-1][14]),c[o-1][15]=8*(e.length-1)&4294967295;var s,l,d,u,h,p,b,g,f=new Array(64);for(r=0;r<o;r++){for(var m=0;m<16;m++)f[m]=c[r][m];for(m=16;m<64;m++)f[m]=t.SHA._dev1(f[m-2])+f[m-7]+t.SHA._dev0(f[m-15])+f[m-16]&4294967295;for(s=i[0],l=i[1],d=i[2],u=i[3],h=i[4],p=i[5],b=i[6],g=i[7],m=0;m<64;m++){var y=g+t.SHA._sig1(h)+t.SHA._ch(h,p,b)+n[m]+f[m],v=t.SHA._sig0(s)+t.SHA._maj(s,l,d);g=b,b=p,p=h,h=u+y&4294967295,u=d,d=l,l=s,s=y+v&4294967295}i[0]=i[0]+s&4294967295,i[1]=i[1]+l&4294967295,i[2]=i[2]+d&4294967295,i[3]=i[3]+u&4294967295,i[4]=i[4]+h&4294967295,i[5]=i[5]+p&4294967295,i[6]=i[6]+b&4294967295,i[7]=i[7]+g&4294967295}return t.SHA._hexStr(i[0])+t.SHA._hexStr(i[1])+t.SHA._hexStr(i[2])+t.SHA._hexStr(i[3])+t.SHA._hexStr(i[4])+t.SHA._hexStr(i[5])+t.SHA._hexStr(i[6])+t.SHA._hexStr(i[7])},_rotr:function(t,e){return e>>>t|e<<32-t},_sig0:function(e){return t.SHA._rotr(2,e)^t.SHA._rotr(13,e)^t.SHA._rotr(22,e)},_sig1:function(e){return t.SHA._rotr(6,e)^t.SHA._rotr(11,e)^t.SHA._rotr(25,e)},_dev0:function(e){return t.SHA._rotr(7,e)^t.SHA._rotr(18,e)^e>>>3},_dev1:function(e){return t.SHA._rotr(17,e)^t.SHA._rotr(19,e)^e>>>10},_ch:function(t,e,n){return t&e^~t&n},_maj:function(t,e,n){return t&e^t&n^e&n},_hexStr:function(t){for(var e="",n=7;n>=0;n--)e+=(t>>>4*n&15).toString(16);return e}}};function e(e,n){this.config=t.tools.extend({},t.printing.defaultConfig),this._dirtyOpts={},this.setPrinter=function(e){"string"==typeof e&&(e={name:e}),e&&e.file&&0!=e.file.indexOf("\\\\")&&t.log.warn("Printing to file is deprecated.  See https://github.com/qzind/tray/issues/730"),this.printer=e},this.getPrinter=function(){return this.printer},this.reconfigure=function(e){for(var n in e)void 0!==e[n]&&(this._dirtyOpts[n]=!0);t.tools.extend(this.config,e)},this.getOptions=function(){return t.compatible.config(this.config,this._dirtyOpts)},this.setPrinter(e),this.reconfigure(n)}e.prototype.print=function(t,e,n){i.print(this,t,e,n)};var i={websocket:{isActive:function(){return t.tools.isActive()},connect:function(e){return t.tools.promise((function(n,i){if(t.tools.isActive())i(new Error("An open connection with QZ Tray already exists"));else if(null==t.websocket.connection)if(t.tools.ws)if(t.tools.ws.CLOSED&&2!=t.tools.ws.CLOSED){null==e&&(e={}),"undefined"!=typeof location&&"https:"===location.protocol||void 0===e.usingSecure&&(t.log.trace("Disabling secure ports due to insecure page"),e.usingSecure=!1),void 0===e.host||Array.isArray(e.host)||(e.host=[e.host]);var o=function(c){var r=!1,a=function(){r||(r=!0,e&&c<e.retries?o(c+1):(t.websocket.connection=null,i.apply(null,arguments)))},s=function(){var i=t.tools.extend({},t.websocket.connectConfig,e);t.websocket.setup.findConnection(i,n,a)};0==c?s():setTimeout(s,1e3*e.delay)};o(0)}else i(new Error("Unsupported WebSocket version detected: HyBi-00/Hixie-76"));else i(new Error("WebSocket not supported by this browser"));else i(new Error("The current connection attempt has not returned yet"))}))},disconnect:function(){return t.tools.promise((function(e,n){t.tools.isActive()?(t.websocket.connection.close(),t.websocket.connection.promise={resolve:e,reject:n}):n(new Error("No open connection with QZ Tray"))}))},setErrorCallbacks:function(e){t.websocket.errorCallbacks=e},setClosedCallbacks:function(e){t.websocket.closedCallbacks=e},getNetworkInfo:t.compatible.networking,getConnectionInfo:function(){if(t.tools.assertActive()){var e=t.websocket.connection.url.split(/[:\/]+/g);return{socket:e[0],host:e[1],port:+e[2]}}}},printers:{getDefault:function(e,n){return t.websocket.dataPromise("printers.getDefault",null,e,n)},find:function(e,n,i){return t.websocket.dataPromise("printers.find",{query:e},n,i)},details:function(){return t.websocket.dataPromise("printers.detail")},startListening:function(e){return Array.isArray(e)||(e=[e]),t.websocket.dataPromise("printers.startListening",{printerNames:e})},stopListening:function(){return t.websocket.dataPromise("printers.stopListening")},getStatus:function(){return t.websocket.dataPromise("printers.getStatus")},setPrinterCallbacks:function(e){t.printers.printerCallbacks=e}},configs:{setDefaults:function(e){t.tools.extend(t.printing.defaultConfig,e)},create:function(t,n){return new e(t,n)}},print:function(e,n){var i=!1,o=[],c=[];arguments.length>=3&&("boolean"==typeof arguments[2]?(i=arguments[2],arguments.length>=5&&(o=arguments[3],c=arguments[4])):arguments.length>=4&&(o=arguments[2],c=arguments[3]),o&&!Array.isArray(o)&&(o=[o]),c&&!Array.isArray(c)&&(c=[c])),Array.isArray(e)||(e=[e]),Array.isArray(n[0])||(n=[n]);for(var r=0;r<n.length;r++)t.tools.relative(n[r]),t.compatible.data(n[r]);for(var a=function(e){var n={printer:e.config.getPrinter(),options:e.config.getOptions(),data:e.data};return t.websocket.dataPromise("print",n,e.signature,e.timestamp)},s=[],l=0;l<e.length||l<n.length;l++)!function(t){var i={config:e[Math.min(t,e.length-1)],data:n[Math.min(t,n.length-1)],signature:o[t],timestamp:c[t]};s.push((function(){return a(i)}))}(l);var d=null;if(i){var u=[];d=function(t){u.push(t)},s.push((function(){return t.tools.promise((function(t,e){u.length?e(u):t()}))}))}var h=null;return s.reduce((function(t,e){return h=t.catch(d).then(e)}),t.tools.promise((function(t){t()}))),h},serial:{findPorts:function(){return t.websocket.dataPromise("serial.findPorts")},setSerialCallbacks:function(e){t.serial.serialCallbacks=e},openPort:function(e,n){return t.websocket.dataPromise("serial.openPort",{port:e,options:n})},sendData:function(e,n,i){return t.tools.versionCompare(2,1,0,12)>=0&&("object"!=typeof n&&(n={data:n,type:"PLAIN"}),n.type&&"FILE"==n.type.toUpperCase()&&(n.data=t.tools.absolute(n.data))),t.websocket.dataPromise("serial.sendData",{port:e,data:n,options:i})},closePort:function(e){return t.websocket.dataPromise("serial.closePort",{port:e})}},socket:{open:function(e,n,i){return t.websocket.dataPromise("socket.open",{host:e,port:n,options:i})},close:function(e,n){return t.websocket.dataPromise("socket.close",{host:e,port:n})},sendData:function(e,n,i){return"object"!=typeof i&&(i={data:i,type:"PLAIN"}),t.websocket.dataPromise("socket.sendData",{host:e,port:n,data:i})},setSocketCallbacks:function(e){t.socket.socketCallbacks=e}},usb:{listDevices:function(e){return t.websocket.dataPromise("usb.listDevices",{includeHubs:e})},listInterfaces:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("usb.listInterfaces",e)},listEndpoints:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],interface:arguments[2]}),t.websocket.dataPromise("usb.listEndpoints",e)},setUsbCallbacks:function(e){t.usb.usbCallbacks=e},claimDevice:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],interface:arguments[2]}),t.websocket.dataPromise("usb.claimDevice",e)},isClaimed:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("usb.isClaimed",e)},sendData:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],data:arguments[3]}),t.tools.versionCompare(2,1,0,12)>=0&&("object"!=typeof e.data&&(e.data={data:e.data,type:"PLAIN"}),e.data.type&&"FILE"==e.data.type.toUpperCase()&&(e.data.data=t.tools.absolute(e.data.data))),t.websocket.dataPromise("usb.sendData",e)},readData:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],responseSize:arguments[3]}),t.websocket.dataPromise("usb.readData",e)},openStream:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2],responseSize:arguments[3],interval:arguments[4]}),t.websocket.dataPromise("usb.openStream",e)},closeStream:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],endpoint:arguments[2]}),t.websocket.dataPromise("usb.closeStream",e)},releaseDevice:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("usb.releaseDevice",e)}},hid:{listDevices:function(){return t.websocket.dataPromise("hid.listDevices")},startListening:function(){return t.websocket.dataPromise("hid.startListening")},stopListening:function(){return t.websocket.dataPromise("hid.stopListening")},setHidCallbacks:function(e){t.hid.hidCallbacks=e},claimDevice:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("hid.claimDevice",e)},isClaimed:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("hid.isClaimed",e)},sendData:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],data:arguments[2],endpoint:arguments[3]}),t.tools.versionCompare(2,1,0,12)>=0&&("object"!=typeof e.data&&(e.data={data:e.data,type:"PLAIN"}),e.data.type&&"FILE"==e.data.type.toUpperCase()&&(e.data.data=t.tools.absolute(e.data.data))),t.websocket.dataPromise("hid.sendData",e)},readData:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],responseSize:arguments[2]}),t.websocket.dataPromise("hid.readData",e)},sendFeatureReport:function(e){return t.websocket.dataPromise("hid.sendFeatureReport",e)},getFeatureReport:function(e){return t.websocket.dataPromise("hid.getFeatureReport",e)},openStream:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1],responseSize:arguments[2],interval:arguments[3]}),t.websocket.dataPromise("hid.openStream",e)},closeStream:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("hid.closeStream",e)},releaseDevice:function(e){return"object"!=typeof e&&(e={vendorId:arguments[0],productId:arguments[1]}),t.websocket.dataPromise("hid.releaseDevice",e)}},file:{list:function(e,n){var i=t.tools.extend({path:e},n);return t.websocket.dataPromise("file.list",i)},read:function(e,n){var i=t.tools.extend({path:e},n);return t.websocket.dataPromise("file.read",i)},write:function(e,n){var i=t.tools.extend({path:e},n);return t.websocket.dataPromise("file.write",i)},remove:function(e,n){var i=t.tools.extend({path:e},n);return t.websocket.dataPromise("file.remove",i)},startListening:function(e,n){n&&void 0!==n.include&&!Array.isArray(n.include)&&(n.include=[n.include]),n&&void 0!==n.exclude&&!Array.isArray(n.exclude)&&(n.exclude=[n.exclude]);var i=t.tools.extend({path:e},n);return t.websocket.dataPromise("file.startListening",i)},stopListening:function(e,n){var i=t.tools.extend({path:e},n);return t.websocket.dataPromise("file.stopListening",i)},setFileCallbacks:function(e){t.file.fileCallbacks=e}},networking:{device:function(e,n){return t.tools.isVersion(2,0)?t.compatible.networking(e,n,null,null,(function(t){return{ip:t.ipAddress,mac:t.macAddress}})):t.websocket.dataPromise("networking.device",{hostname:e,port:n})},devices:function(e,n){return t.tools.isVersion(2,0)?t.compatible.networking(e,n,null,null,(function(t){return[{ip:t.ipAddress,mac:t.macAddress}]})):t.websocket.dataPromise("networking.devices",{hostname:e,port:n})}},security:{setCertificatePromise:function(e){t.security.certHandler=e},setSignaturePromise:function(e){t.security.signatureFactory=e},setSignatureAlgorithm:function(e){t.compatible.algorithm()&&(["SHA1","SHA256","SHA512"].indexOf(e.toUpperCase())<0?t.log.error("Signing algorithm '"+e+"' is not supported."):t.security.signAlgorithm=e)},getSignatureAlgorithm:function(){return t.security.signAlgorithm}},api:{showDebug:function(e){return t.DEBUG=e},getVersion:function(){return t.websocket.dataPromise("getVersion")},isVersion:t.tools.isVersion,isVersionGreater:function(e,n,i,o){return t.tools.versionCompare(e,n,i,o)>0},isVersionLess:function(e,n,i,o){return t.tools.versionCompare(e,n,i,o)<0},setPromiseType:function(e){t.tools.promise=e},setSha256Type:function(e){t.tools.hash=e},setWebSocketType:function(e){t.tools.ws=e}},version:t.VERSION};return i}())?i.call(e,n,e,t):i)||(t.exports=o)}}]);